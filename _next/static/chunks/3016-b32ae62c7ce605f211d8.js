"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3016],{47337:function(e,n,t){t.d(n,{k:function(){return h}});var i=t(92809),o=t(42283),r=t(79665),a=t(97202),s=t(78215),c=t(2356),d=t(65375),u=t(71247),l=t(83528),m=t(46482),p=t(19501),y=(0,p.Ry)().shape({name:(0,p.Z_)(),invoicingEntity:(0,p.Z_)(),addressLine1:(0,p.Z_)().required(),addressLine2:(0,p.Z_)(),addressLine3:(0,p.Z_)(),city:(0,p.Z_)().required(),postCode:(0,p.Z_)().matches("^([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9][A-Za-z]?))))\\s?[0-9][A-Za-z]{2})$|^([AC-FHKNPRTV-Y]\\d{2}|D6W)\\s[0-9AC-FHKNPRTV-Y]{4}$").required(),county:(0,p.Z_)(),countryId:(0,p.Z_)().required()}),f=t(66805),v=t(17044),b=t(85893);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var h=function(e){var n=e.defaultValues,t=(e.onCancel,e.onSubmit),i=e.type,p=(0,o.cI)({defaultValues:g({},n),resolver:(0,r.S)(y)}),x=p.control,h=p.errors,j=p.handleSubmit,I={control:x,errors:h,register:p.register};return(0,b.jsxs)(a.Z,{id:"offCanvasForm",handleSubmit:j(t),children:[(0,b.jsxs)(s.Z,{children:[(0,b.jsx)(c.Z,{md:12,children:(0,b.jsx)(d.Z,{label:"Address name",children:(0,b.jsx)(u.Z,g(g({},I),{},{name:"name"}))})}),"invoice"===i&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{md:12,children:(0,b.jsx)(d.Z,{label:"invoicing email",children:(0,b.jsx)(u.Z,g(g({},I),{},{name:"invoicingEmail",type:"email"}))})}),(0,b.jsx)(c.Z,{md:12,children:(0,b.jsx)(d.Z,{label:"Invoicing entity",children:(0,b.jsx)(l.Z,g(g({},I),{},{name:"invoicingEntity",rows:4}))})})]}),(0,b.jsx)(c.Z,{md:6,children:(0,b.jsx)(d.Z,{label:"Address Line 1",children:(0,b.jsx)(u.Z,g(g({},I),{},{name:"addressLine1"}))})}),(0,b.jsx)(c.Z,{md:6,children:(0,b.jsx)(d.Z,{label:"Address Line 2",children:(0,b.jsx)(u.Z,g(g({},I),{},{name:"addressLine2"}))})}),(0,b.jsx)(c.Z,{md:6,children:(0,b.jsx)(d.Z,{label:"Address Line 3",children:(0,b.jsx)(u.Z,g(g({},I),{},{name:"addressLine3"}))})}),(0,b.jsx)(c.Z,{md:6,children:(0,b.jsx)(d.Z,{label:"City",children:(0,b.jsx)(u.Z,g(g({},I),{},{name:"city"}))})}),(0,b.jsx)(c.Z,{md:6,children:(0,b.jsx)(d.Z,{label:"Post Code",children:(0,b.jsx)(u.Z,g(g({},I),{},{name:"postCode"}))})}),(0,b.jsx)(c.Z,{md:6,children:(0,b.jsx)(d.Z,{label:"County",children:(0,b.jsx)(u.Z,g(g({},I),{},{name:"county"}))})}),(0,b.jsx)(c.Z,{md:6,children:(0,b.jsx)(d.Z,{label:"Country",children:(0,b.jsx)(m.Z,g(g({},I),{},{name:"countryId",options:v.O}))})})]}),(0,b.jsx)(s.Z,{justify:"end",children:(0,b.jsx)(c.Z,{md:12,children:(0,b.jsx)(f.H,{content:"Submit",type:"submit"})})}),(null===n||void 0===n?void 0:n.id)&&(0,b.jsx)(u.Z,g(g({},I),{},{name:"id",type:"hidden"})),(null===n||void 0===n?void 0:n.meta)&&(0,b.jsx)(u.Z,g(g({},I),{},{name:"meta",type:"hidden"}))]})}},7755:function(e,n,t){t.d(n,{H:function(){return q}});var i=t(92809),o=t(30266),r=t(83789),a=t(80318),s=t(64687),c=t.n(s),d=t(67294),u=t(93633),l=t(75709),m=t(88402),p=t(11417),y=t(11570),f=t(80880),v=t(91126),b=t(65375),x=t(34610),g=t(18944),h=t(39759),j=t(22796),I=t(52002),S=t(66805),A=t(47337),_=t(55863),Z=t(85893);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(e){var n=e.addresses,t=e.entity,i=e.entityId,r=(e.id,e.loading),s=e.onSelected,u=e.refetch,p=e.selectable,y=e.selected,O=e.type,w=(0,d.useContext)(f.Z),P=(0,l.D)(m.BO,{onCompleted:function(){w.close(),u()}}),q=(0,a.Z)(P,1)[0],R=(0,l.D)(m._r,{onCompleted:function(){w.close(),u()}}),T=(0,a.Z)(R,1)[0],$=function(){var e=(0,o.Z)(c().mark((function e(n){var o,r,a,s,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=n).countryId||(o.countryId=1),r={address:o},e.next=5,window.fetch("".concat("https://aws-staging.cleverly.works","/google/maps/geocode"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(r)}).then((function(e){return e.json()})).catch((function(e){(0,_.Tb)({message:e,section:"fetch"})}));case 5:if(a=e.sent,n.id?o.meta=C({invoicingEmail:n.invoicingEmail},n.meta):o.meta={invoicingEmail:n.invoicingEmail},delete o.invoicingEmail,null!==(s=(null===a||void 0===a?void 0:a.coordinates)||null)&&void 0!==s&&s.lat&&null!==s&&void 0!==s&&s.lng&&(o.geo={type:"Point",coordinates:[s.lng,s.lat]}),!n.id){e.next=16;break}return d=parseInt(n.id),e.next=14,T({variables:{id:d,changes:o}});case 14:e.next=19;break;case 16:return o.Address_Entities={data:{entity:t,entityId:i,status:"active"}},e.next=19,q({variables:{objects:[o]}});case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(e){w.close()},L=function(e){var t,i={},o=n.find((function(n){return n.id===e.id})),r=o?o.address:null;r&&(i.id=r.id,i.invoicingEmail=null===(t=r.meta)||void 0===t?void 0:t.invoicingEmail,i.invoicingEntity=r.invoicingEntity,i.name=r.name,i.addressLine1=r.addressLine1,i.addressLine2=r.addressLine2,i.addressLine3=r.addressLine3,i.city=r.city,i.postCode=r.postCode,i.county=r.county,i.countryId=r.countryId);w.show({content:(0,Z.jsx)(A.k,{defaultValues:i,onCancel:U,onSubmit:$,type:O}),title:r?"Edit address":"invoice"===O?"Add new invoice address":"Add new address",submit:!1})},D=[{hidden:!0},{hidden:!p,text:"Select"},{text:"Address"},{hidden:"invoice"!==O,text:"Email"},{formatter:v.Z,formatterData:[{context:"secondary",icon:["fas","edit"],onClick:function(e,n){return L(n)},tooltip:"Edit"}],text:"Actions"}];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(S.H,{content:"Add new address",handleClick:L}),(0,Z.jsx)(j.Z,{marginBottom:"xs"}),(0,Z.jsx)(I.Z,{columns:D,loading:r,rows:n.map((function(e,n){var t,i=e.address;return{id:e.id,select:function(){return(0,Z.jsx)(b.Z,{children:(0,Z.jsx)(x.Z,{context:"secondary",onToggle:function(e){return function(e,n){s(e,n)}(i.id,e)},size:"sm",toggled:Number(y)===i.id})})},address:function(){var e;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(g.Z,{content:null===i||void 0===i?void 0:i.name,size:"md"}),(0,Z.jsx)(h.Z,{country:(null===(e=i.country)||void 0===e?void 0:e.name)||"",line1:i.addressLine1,town:i.city})]})},email:(null===(t=i.meta)||void 0===t?void 0:t.invoicingEmail)||"-",actions:""}}))})]})};w.defaultProps={addresses:[],selectable:!1,selected:""};var P=t(70448),q=function(e){var n,t,s=e.addressId,f=e.entity,v=e.entityId,b=e.id,x=e.onSubmit,g=e.type,h=(0,d.useState)(s||null),j=h[0],I=h[1],S=(0,d.useState)(!1),A=S[0],_=S[1],O=(0,d.useState)(null),C=O[0],q=O[1],R=(0,P.DM)(g),T=(0,P.VJ)(f),$=(0,u.a)(T,{variables:{id:v}}),U=$.loading,L=$.data,D=(L=void 0===L?{item:null}:L).item,N=$.refetch,J=(0,l.D)(m.Ar,{onCompleted:function(e){x&&x(e)}}),k=(0,a.Z)(J,1)[0],E=(0,l.D)(m.x0,{onCompleted:function(e){x&&x(e)}}),Q=(0,a.Z)(E,1)[0],F=(0,l.D)(m.Y3,{onCompleted:function(e){x&&x(e)}}),H=(0,a.Z)(F,1)[0],M=(0,l.D)(m.y8,{onCompleted:function(e){x&&x(e)}}),V=(0,a.Z)(M,1)[0],G=[];D&&(D.addresses&&G.push.apply(G,(0,r.Z)(D.addresses)),D.accounts&&null!==(n=D.accounts[0])&&void 0!==n&&null!==(t=n.account)&&void 0!==t&&t.addresses&&D.accounts[0].account.addresses.forEach((function(e){G.find((function(n){return n.address.id===e.address.id}))||G.push(e)})));var z=function(){var e=(0,o.Z)(c().mark((function e(n,t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!1),_(!1),!t){e.next=8;break}return I(parseInt(n)),e.next=6,W(parseInt(n));case 6:e.next=9;break;case 8:_(!0);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),W=function(){var e=(0,o.Z)(c().mark((function e(n){var t,o,r,a,s,d,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j===n){e.next=32;break}if(t=null,o=null,r=null,G.forEach((function(e){e.address.id===n?(t=e.entity,o=e.id):e.address.id===j&&(r=e.id)})),!o||t!==f){e.next=19;break}if(!b){e.next=13;break}return a={idNew:parseInt(o),idOld:parseInt(r),changesNew:(0,i.Z)({},g,!0),changesOld:(0,i.Z)({},g,!1)},e.next=10,V({variables:a});case 10:q(!0),e.next=17;break;case 13:return s={id:parseInt(o),changes:(0,i.Z)({},g,!0)},e.next=16,H({variables:s});case 16:q(!0);case 17:e.next=30;break;case 19:if(d=[(0,i.Z)({addressId:parseInt(n),entity:f,entityId:v,status:"active"},g,!0)],!b){e.next=27;break}return u={idOld:parseInt(b),changesOld:(0,i.Z)({},g,!1),objects:d},e.next=24,Q({variables:u});case 24:q(!0),e.next=30;break;case 27:return e.next=29,k({variables:{objects:d}});case 29:q(!0);case 30:e.next=33;break;case 32:x&&x(null);case 33:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(p.Z,{tag:"h4",content:R}),C&&(0,Z.jsx)(y.Z,{content:"Selection saved.",context:"primary"}),A&&(0,Z.jsx)(y.Z,{content:"You should select at least one address.",context:"info"}),(0,Z.jsx)(w,{addresses:G,entity:f,entityId:v,id:b,loading:U,refetch:N,selectable:!0,selected:j,type:g,onSelected:z})]})}},66639:function(e,n,t){t.d(n,{f:function(){return C}});var i=t(67294),o=t(30493),r=t(80880),a=t(58448),s=t(14347),c=t(80284),d=t(63785),u=t(93443),l=t(18944),m=t(39759),p=t(70448),y=t(24237),f=t(93633),v=t(19952),b=t(11163),x=t(97721),g=t(4513),h=t(46991),j=t(28323),I=t(77567),S=t(85893),A=function(e){var n,t,o,r=e.propertyId,a=e.toggleShow,s=(0,b.useRouter)();(0,i.useEffect)((function(){var e=function(e){a()};return s.events.on("routeChangeComplete",e),function(){s.events.off("routeChangeComplete",e)}}),[]);var c=(0,f.a)(v.t,{variables:{id:r}}),d=c.loading,u=c.data,l=(u=void 0===u?{location:{}}:u).location;if(d)return(0,S.jsx)(x.Z,{indicator:(0,S.jsx)(g.Z,{})});var m=l.createdAt,y=l.customer,A=l.supplier,_=l.user,Z=(0,p.WE)(l,"registered"),O=(0,p.WE)(l,"invoice");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(I.g,{avatar:(0,j.Q)(null===(n=l.customer[0].account)||void 0===n?void 0:n.media),editable:!1,entity:{id:l.id,description:l.customer[0].account.name,name:l.name},entityName:"Location",linkTitleTo:"/dashboard/properties/view?id=".concat(l.id)}),(0,S.jsx)(h.J,{data:{accountName:y.length&&y[0].account.name||A.length&&A[0].account.name,country:null===Z||void 0===Z||null===(t=Z.address)||void 0===t||null===(o=t.country)||void 0===o?void 0:o.name,createdAt:m,fullName:null===_||void 0===_?void 0:_.fullName,position:null===_||void 0===_?void 0:_.position,phone:null===_||void 0===_?void 0:_.phone}}),Z&&(0,S.jsx)(C,{address:Z.address,edit:!1,entity:"Location",entityId:l.id,id:Z.id,showMap:!0,title:"Address",type:"registered"}),O&&(0,S.jsx)(C,{address:O.address,edit:!1,entity:"Location",entityId:l.id,id:O.id,title:"Invoice Address",type:"invoice"})]})},_=function(e){var n=e.propertyId,t=e.propertyName,o=(0,i.useContext)(r.Z);return(0,S.jsx)(Z,{onClick:function(){o.show({title:"Property information",content:(0,S.jsx)(A,{propertyId:n,toggleShow:o.close})})},children:t})},Z=y.ZP.a.withConfig({displayName:"link__StyledLink",componentId:"sc-1tj5316-0"})(["cursor:pointer;text-decoration:none;"]),O=t(7755),C=function(e){var n=e.access,t=e.address,y=e.edit,f=e.entity,v=e.entityId,b=e.id,x=e.name,g=e.open,h=e.refetch,j=e.showMap,I=e.showLink,A=e.title,Z=e.type,C=(0,i.useContext)(r.Z),w=function(e){e&&h&&h()},P=function(e){e.stopPropagation(),C.show({content:(0,S.jsx)(O.H,{entity:f,entityId:v,id:b,onSubmit:w,addressId:t.id,type:Z}),submit:!1,title:"Manage addresses"})},q=(0,p.UC)(t),R=function(){return(0,S.jsx)(a.Z,{children:(0,S.jsx)(s.Z,{context:"secondary",content:"Edit",onClick:P,size:"sm"})})};return(0,S.jsxs)(c.Z,{handleClick:P,open:g,title:A,toolbar:y&&(0,S.jsx)(R,{}),children:[j&&o.ie.map&&(0,S.jsx)(d.Z,{apiKey:o.ie.map,center:q,location:q,markers:[q],style:{width:"100%",height:"auto"}}),x&&(0,S.jsx)(u.Z,{content:"Property",text:I?(0,S.jsx)(_,{propertyId:v,propertyName:x}):x}),"invoice"===Z&&t.invoicingEntity&&(0,S.jsx)(u.Z,{content:"Invoicing Entity",text:t.invoicingEntity}),t.name&&"invoice"!==Z&&(0,S.jsx)(u.Z,{content:"Name",text:t.name}),(0,S.jsx)(l.Z,{children:" Address "}),(0,S.jsx)(m.Z,{county:t.county,line1:t.addressLine1,line2:t.addressLine2,line3:t.addressLine3,postcode:t.postCode,town:t.city}),n&&(0,S.jsx)(u.Z,{content:"Access",text:n})]})};C.defaultProps={edit:!1,open:!0,showMap:!1,showLink:!0,title:"Address"}},40140:function(e,n,t){t.d(n,{$g:function(){return a},V2:function(){return s},Xj:function(){return c}});var i=t(92809);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var a=function(e){var n;e.customerSelected=e.customer&&{value:e.customer.id,label:e.customer.name},e.locationSelected=e.location&&{value:e.location.id,label:e.location.name},e.assetCategory=e.category&&{value:e.category.id,label:e.category.name,childs:(null===(n=e.category)||void 0===n?void 0:n.childs)||[]};var t=r(r({},e),e.customFields||{});return t.bookable="yes"===e.bookable,Object.keys(t).filter((function(e){return e.includes("date")})).forEach((function(e){t[e]=t[e]?new Date(t[e]):""})),t},s=function(e){var n,t={accountId:e.customerSelected.value,bookable:e.bookable||"no",categoryId:null===(n=e.assetCategory)||void 0===n?void 0:n.value,description:e.description,name:e.name,locationId:e.locationSelected.value,parentId:e.parentId&&e.parentId.value,userId:e.userId&&e.userId.value,status:e.status};return delete e.customerSelected,delete e.assetCategory,delete e.bookable,delete e.description,delete e.name,delete e.locationSelected,delete e.parentId,delete e.userId,delete e.status,t.customFields=e,t},c=function(e,n){var t=n.object,i=n.string,o={};return null===e||void 0===e||e.forEach((function(e){var n;null!==(n=e.meta)&&void 0!==n&&n.required&&(o[e.name]=i().required())})),t().shape(r({},o))}},28323:function(e,n,t){t.d(n,{Q:function(){return i}});var i=function(e){var n,t,i=e&&e.length>0&&e.find((function(e){var n;return"avatar"===(null===(n=e.medium)||void 0===n?void 0:n.category)}));if(!i)return null;var o="".concat("https://d1hk88326p7ilp.cloudfront.net","/").concat(i.medium.filename),r=null===i||void 0===i||null===(n=i.medium)||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.thumbnails;if(null!==r&&void 0!==r&&r.length){var a=r.find((function(e){return"small"===e.name}));null!==a&&void 0!==a&&a.relativePath&&(o="".concat("https://d1hk88326p7ilp.cloudfront.net","/").concat(a.relativePath))}return o}},65570:function(e,n,t){t.d(n,{D:function(){return m}});var i=t(67294),o=t(24237),r=t(80880),a=t(18944),s=t(6608),c=t(68343),d=t(12517),u=t(88989),l=t(85893),m=function(e){var n=e.id,t=e.invoiceNumber,o=e.number,m=e.numberPrefix,y=e.numberSuffix,f=e.openCanvas,v=e.isQuote,b=e.shortJobDesc,x=e.status,g=e.style,h=e.type,j=e.toggleShow,I=(0,i.useContext)(r.Z);return(0,l.jsxs)("div",{style:g,children:[(0,l.jsxs)(p,{onClick:function(e){return f&&function(e){e.stopPropagation(),I.show({content:(0,l.jsx)(d.g,{jobId:n,toggleShow:function(){I.close(),j&&j()},numberPrefix:m,numberSuffix:y}),submit:!1,title:v?"Quote Details":"Job Details",width:"50%"})}(e)},openCanvas:f,children:[x&&(0,c.B)({value:x,withTooltip:!0}),"".concat((0,s.y)(h)," ").concat("quote"!==h&&v?"Q":""),(0,u.p)({id:n,number:o,invoiceNumber:t,numberPrefix:m,numberSuffix:y})]}),b&&(0,l.jsx)(a.Z,{size:"xs",children:b})]})},p=o.ZP.a.withConfig({displayName:"renderJobId__StyledLink",componentId:"sc-j20nx5-0"})(["display:flex;color:",";cursor:",";"],(function(e){var n=e.openCanvas,t=e.theme;return n&&t.COLOUR.secondary}),(function(e){return e.openCanvas&&"pointer"}));m.defaultProps={openCanvas:!1,numberPrefix:"",numberSuffix:""}},12841:function(e,n,t){t.d(n,{I:function(){return c}});var i=t(80284),o=t(93443),r=t(26398),a=t(80285),s=t(85893),c=function(e){var n,t,c=e.job;return e.show?(0,s.jsxs)(i.Z,{title:"Customer",children:[(0,s.jsx)(o.Z,{content:"Name",text:(0,s.jsx)(r.Z,{to:"/dashboard/customers/view?id=".concat(c.customer.id),passHref:!0,children:c.customer.name})}),(0,s.jsx)(o.Z,{content:"Contact",text:c.customerUser&&(0,s.jsx)(r.Z,{to:"/dashboard/users/view?id=".concat(c.customerUser.id),passHref:!0,children:c.customerUser.fullName})}),(0,s.jsx)(o.Z,{content:"Email",text:null===(n=c.customerUser)||void 0===n?void 0:n.email}),(0,s.jsx)(o.Z,{content:"Phone",text:null===(t=c.customerUser)||void 0===t?void 0:t.phone}),(0,s.jsx)(o.Z,{content:"Payment method",text:c.paymentMethod}),(0,s.jsx)(o.Z,{content:"Spend Threshold",text:(0,a.Z)(c.customerSpendThreshold)})]}):null};c.defaultProps={show:!0}},28865:function(e,n,t){t.d(n,{p:function(){return P}});var i=t(67294),o=t(42593),r=t(80880),a=t(80284),s=t(14347),c=t(93443),d=t(26398),u=t(18862),l=t(18944),m=t(71070),p=t(92809);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,p.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=t(68343),b=t(65570),x=t(42283),g=t(79665),h=t(97202),j=t(65375),I=t(71247),S=t(95146),A=t(19501),_=(0,A.Ry)().shape({assignedTo:(0,A.Ry)().required()}),Z=t(85893);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,p.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(e){var n=e.defaultValues,t=e.onSuccess,i=e.user,o=(0,x.cI)({defaultValues:n,resolver:(0,g.S)(_)}),r=o.control,a=o.errors,s=o.handleSubmit,c={control:r,errors:a,register:o.register};return(0,Z.jsxs)(h.Z,{id:"offCanvasForm",handleSubmit:s((function(e){t(e)})),children:[(0,Z.jsx)(S.P,C(C({},c),{},{accountId:i.accountId,errors:C({},a),label:"Assigned to",name:"assignedTo",type:"user"})),(0,Z.jsx)(j.Z,{label:"Customer reference",children:(0,Z.jsx)(I.Z,C(C({},c),{},{name:"reference"}))})]})},P=function(e){var n,t,p,y,x,g,h=e.isQuotes,j=e.job,I=e.numberPrefix,S=e.numberSuffix,A=e.refetch,_=e.showOrder,O=e.updateJob,C=e.user,P=(0,i.useContext)(o.Z).hasRole,q=(0,i.useContext)(r.Z),R=function(e,n){var t,i,o,r,a,s,c;if(null!==(t=e.meta)&&void 0!==t&&null!==(i=t.customerVATInvoice)&&void 0!==i&&null!==(o=i.rateInfo)&&void 0!==o&&o.selectedSla)return e.meta.customerVATInvoice.rateInfo.selectedSla;var d=f({},e.sla);d.entity="Job";var u=f({},null===(r=e.location)||void 0===r||null===(a=r.slas)||void 0===a?void 0:a.find((function(e){return e.slaId===(null===d||void 0===d?void 0:d.id)&&e.inUse})));null!==u&&void 0!==u&&u.sla&&(u.entity="Property",u.name=u.sla.name);var l=f({},null===(s=e.customer)||void 0===s||null===(c=s.slas)||void 0===c?void 0:c.find((function(e){return e.slaId===(null===d||void 0===d?void 0:d.id)&&e.inUse})));return null!==l&&void 0!==l&&l.sla&&(l.entity="Customer",l.name=l.sla.name),f(f(f({},d),l),u)}(j),T=function(e){O({variables:{id:j.id,changes:{managerId:e.assignedTo.value,reference:e.reference}}}),A(),q.close()};return(0,Z.jsxs)(a.Z,{dataSet:{"data-cy":"jobDetails"},open:!0,title:"Details",toolbar:O&&P("admin")&&(0,Z.jsx)(s.Z,{content:"Edit",context:"secondary",size:"sm",onClick:function(e){return function(e){var n;e.stopPropagation();var t,i,o,r={reference:j.reference};null!==(n=j.manager)&&void 0!==n&&n.id&&(r.assignedTo={value:null===(t=j.manager)||void 0===t?void 0:t.id,label:"".concat(null===(i=j.manager)||void 0===i?void 0:i.nameFirst," ").concat(null===(o=j.manager)||void 0===o?void 0:o.nameLast)}),q.show({content:(0,Z.jsx)(w,{defaultValues:r,onSuccess:T,user:C}),title:"Edit Assignee"})}(e)}}),children:[_&&(0,Z.jsx)(c.Z,{content:"Order",text:(0,Z.jsx)(d.Z,{to:"/dashboard/issues/view?id=".concat(j.number),passHref:!0,children:(0,Z.jsx)(b.D,{id:j.id,number:j.number,numberPrefix:I,numberSuffix:S,type:j.type})})}),j.tenantUser&&(0,Z.jsx)(c.Z,{content:"Tenant",text:j.tenantUser&&j.tenantUser.fullName}),!h&&j.reference&&(0,Z.jsx)(c.Z,{content:"Reference",text:j.reference}),(0,Z.jsx)(c.Z,{content:h?"Description":"Short Job Description",text:(null===j||void 0===j||null===(n=j.shortJobDesc)||void 0===n?void 0:n.length)>0&&(null===j||void 0===j||null===(t=j.shortJobDesc[0])||void 0===t?void 0:t.taxonomy.name)||j.title}),(0,Z.jsx)(c.Z,{content:"Status",text:(0,Z.jsx)(v.B,{value:j.status})}),h&&(0,Z.jsx)(c.Z,{content:"Quote due date",text:(0,u.Z)(j.quoteDue)}),h&&(0,Z.jsx)(c.Z,{content:"Supplier(s)"}),h&&j.quotations.map((function(e){return(0,Z.jsx)(l.Z,{children:e.supplier.name})})),h&&(0,Z.jsx)(c.Z,{content:"Quotation",text:j.quotations.length}),h&&(0,Z.jsx)(c.Z,{content:"Received",text:"".concat((j.quotations||[]).reduce((function(e,n){return"supplierQuoteComplete"===n.status?e+1:e}),0),"/").concat((null===(p=j.quotations)||void 0===p?void 0:p.length)||0)}),!h&&(0,Z.jsx)(c.Z,{content:"Cost Category",text:null===(y=j.costCategoryTaxonomy)||void 0===y?void 0:y.name}),!h&&(0,Z.jsx)(c.Z,{content:"Service",text:null===(x=j.service)||void 0===x?void 0:x.name}),!h&&(0,Z.jsx)(c.Z,{content:"Priority",text:(0,Z.jsxs)(Z.Fragment,{children:["".concat((null===R||void 0===R?void 0:R.name)||"Not Specified "," (").concat((null===R||void 0===R?void 0:R.entity)||"Default",")"),(0,Z.jsx)(m.Z,{content:(0,Z.jsxs)(Z.Fragment,{children:["Minimum Length: ".concat(R.minimumLength||"-"),(0,Z.jsx)("br",{}),"Minimum Interval: ".concat(R.minimumInterval||"-")]}),context:"black",children:(0,Z.jsx)("span",{children:"(ML: ".concat(R.minimumLength||"-",") (MI: ").concat(R.minimumInterval||"-",")")})})]})}),(0,Z.jsx)(c.Z,{content:"Assigned To",text:j.manager?"".concat(j.manager.nameFirst," ").concat(j.manager.nameLast," "):"Unassigned"}),(null===(g=j.compliances)||void 0===g?void 0:g.length)>0&&(0,Z.jsx)(c.Z,{content:"Compliance",text:j.compliances[0].compliance.name})]})};P.defaultProps={showOrder:!0}},88989:function(e,n,t){t.d(n,{p:function(){return i}});var i=function(e){var n=e.id,t=e.number,i=e.invoiceNumber,o=e.numberPrefix,r=e.numberSuffix,a=t||n,s=n?"".concat(o," ").concat(a," ").concat(r):"";return i?"".concat(s," / ").concat(i):s}},84774:function(e,n,t){t.d(n,{E6:function(){return h},mJ:function(){return j},qD:function(){return I},uA:function(){return S},FA:function(){return A},r2:function(){return _},k7:function(){return Z},TY:function(){return O},Ab:function(){return C},bZ:function(){return w},Tw:function(){return P},wU:function(){return q},iU:function(){return R}});var i,o,r,a,s,c,d,u,l,m,p,y,f,v,b=t(52209),x=t(54397),g=t(88402),h=(0,x.Ps)(i||(i=(0,b.Z)(['\n  query GetJob($adminId: Int!, $number: String!) {\n    job: Job(where: { adminId: { _eq: $adminId }, number: { _eq: $number } }) {\n      id\n      number\n      adminId\n      title\n      description\n      reference\n      access\n      costCategory\n      pricing\n      timing\n      timingStart\n      timingEnd\n      timingNormalHours\n      paymentMethod\n      customerSpendThreshold\n      time\n      amount\n      supplierLabourAmount\n      supplierMaterialsAmount\n      source\n      discount\n      customerDeposit\n      timingStatus\n      correctDuration\n      correctStart\n      correctEnd\n      invoiceNumbers: Invoices(where: { invoiceType: { _eq: "customerVat" } }) {\n        id\n      }\n      invoices: Invoices {\n        reconciledAmount: Reconciliations_aggregate {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n        amountPaid: Reconciliations_aggregate(where: { creditEntity: { _eq: "PaymentReceipt" } }) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n        amountDeducted: Reconciliations_aggregate(where: { creditEntity: { _eq: "CreditNote" } }) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      customer: Customer {\n        meta\n      }\n      supplierDeposit\n      rebate\n      status\n      workStatus\n      supplierNotes\n      ppm\n      quoted\n      quoteNumber\n      quoteDue\n      scheduledAt\n      createdAt\n      updatedAt\n      customerId\n      customerUserId\n      locationId\n      managerId\n      parentId\n      serviceId\n      slaId\n      siteVisitStart\n      siteVisitEnd\n      siteVisitWeekends\n      tenantId\n      quoteCharge\n      quoteChargeAmount\n      jobScheduleId\n      type\n      meta\n      compliances: Compliances(where: { entity: { _eq: "Job" } }) {\n        id\n        compliance: Compliance {\n          id\n          name\n        }\n      }\n      assets: Assets {\n        id\n        status\n        entity\n        entityId\n        Asset {\n          name\n          serialNumber\n          id\n        }\n      }\n      assetCategory: AssetCategory {\n        name\n        id\n      }\n      asset: Asset {\n        id\n        bookable\n        createdAt\n        locationId\n        meta\n        name\n        customFields\n        customer: Account {\n          id\n          name\n          type\n        }\n        location: Location {\n          id\n          name\n        }\n        userId: User {\n          value: id\n          label: fullName\n        }\n        parentId: ParentAsset {\n          value: id\n          label: fullName\n          media: Media(where: { entity: { _eq: "Asset" } }) {\n            id\n            item: Medium {\n              id\n              name\n              filename\n              category\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n        meta\n        bankAccounts: BankAccounts {\n          id\n          bank\n          stripeId\n          accountNumber\n          routingNumber\n          bic\n          iban\n          status\n          default\n          createdAt\n          meta\n        }\n        addresses: Addresses {\n          id\n          registered\n          operating\n          trading\n          invoice\n          status\n          createdAt\n          address: Address {\n            id\n            name\n            addressLine1\n            addressLine2\n            addressLine3\n            city\n            county\n            geo\n            postCode\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n      }\n      customer: Customer {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n        financial: Financial {\n          id\n          amountOutstanding\n          approvalThreshold\n          arrangementFee\n          createdAt\n          creditLimit\n          creditRating\n          defaultPaymentMethod\n          invoicing\n          serviceRate\n          spendThreshold\n          stripeId\n          totalRevenue\n          unpaidInvoices\n        }\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n        services: Services(where: { entity: { _eq: "Account" } }) {\n          id\n          dayRate\n          dayRateOOH\n          dayRatePremium\n          hourRate\n          hourRateOOH\n          hourRatePremium\n          meta\n          minimumInterval\n          minimumLength\n          callOutHourRate\n          callOutHourRateOOH\n          callOutHourRatePremium\n          notes\n          delivery\n          createdAt\n          updatedAt\n          entity\n          entityId\n          serviceId\n        }\n        addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        meta\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      expenses: Expenses {\n        id\n        amount\n        description\n        markup\n        total\n        unit\n        vat\n        paid\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            countryId\n            country: Country {\n              id\n              name\n              code\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n        services: Services(where: { entity: { _eq: "Location" } }) {\n          id\n          dayRate\n          dayRateOOH\n          dayRatePremium\n          hourRate\n          hourRateOOH\n          hourRatePremium\n          meta\n          minimumInterval\n          minimumLength\n          callOutHourRate\n          callOutHourRateOOH\n          callOutHourRatePremium\n          notes\n          delivery\n          createdAt\n          updatedAt\n          entity\n          entityId\n          serviceId\n        }\n      }\n      financeLogs: JobFinanceLogs(order_by: { createdAt: desc }) {\n        id\n        type\n        value\n        difference\n        createdAt\n      }\n      manager: Manager {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      quotations: SupplierQuotes(\n        where: { status: { _neq: "cancelled" } }\n        order_by: { quoteNumber: asc }\n      ) {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        rebate\n        recommended\n        status\n        totalDuration\n        totalDurationUnit\n        meta\n        updatedAt\n        siteVisitAt\n        type\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          supplierTotal\n          total\n          type\n          unitRate\n        }\n        supplier: Supplier {\n          id\n          companyNumber\n          createdAt\n          name\n          status\n          type\n          updatedAt\n          website\n          clientType\n          managerId\n          vatId\n          meta\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n          media: Media {\n            id\n            medium: Medium {\n              id\n              category\n              filename\n              meta\n              type\n            }\n          }\n          manager: Manager {\n            id\n            fullName\n          }\n        }\n        media: Media(where: { entity: { _eq: "Quotation" } }) {\n          id\n        }\n      }\n      report: JobReport {\n        id\n        completion\n        meta\n        notes\n        timing\n        createdAt\n        updatedAt\n      }\n      service: Service {\n        id\n        name\n        countryId\n        currencyId\n        customerDayRate\n        customerDayRateOOH\n        customerDayRatePremium\n        customerHourRate\n        customerHourRateOOH\n        customerHourRatePremium\n        supplierDayRate\n        supplierDayRateOOH\n        supplierDayRatePremium\n        supplierHourRate\n        supplierHourRateOOH\n        supplierHourRatePremium\n        minimumInterval\n        minimumLength\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          type\n          filename\n          category\n          meta\n        }\n      }\n      supplier: Supplier {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            name: nameFirst\n            nameFirst\n            nameLast\n            phone\n            status\n            email\n            createdAt\n            fullName\n            accounts: Account_Users {\n              id\n              role\n              position\n              isContact\n              status\n              account: Account {\n                id\n                name\n                type\n              }\n            }\n          }\n        }\n        addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        services: Services(where: { entity: { _eq: "Account" } }) {\n          id\n          dayRate\n          dayRateOOH\n          dayRatePremium\n          hourRate\n          hourRateOOH\n          hourRatePremium\n          meta\n          minimumInterval\n          minimumLength\n          callOutHourRate\n          callOutHourRateOOH\n          callOutHourRatePremium\n          notes\n          delivery\n          createdAt\n          updatedAt\n          entity\n          entityId\n          serviceId\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        meta\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      supplierOffers: SupplierOffers {\n        id\n        status\n        rate\n        dayRate\n        meta\n        notes\n        statusLog\n        account: Supplier {\n          id\n          companyNumber\n          createdAt\n          name\n          status\n          type\n          updatedAt\n          website\n          clientType\n          managerId\n          vatId\n          meta\n          media: Media {\n            id\n            medium: Medium {\n              id\n              category\n              filename\n              meta\n              type\n            }\n          }\n          manager: Manager {\n            id\n            fullName\n          }\n        }\n      }\n      tenant: Tenant {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      tenantUser: TenantUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      timings: JobTimings(order_by: { id: desc }) {\n        id\n        status\n        notes\n        meta\n        quoteId\n        createdAt\n        user: User {\n          id\n          fullName\n        }\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      answers: Taxonomy(\n        where: { Taxonomy: { type: { _eq: "jobQuestion" } } }\n        order_by: { taxonomyId: asc }\n      ) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      parentJob: ParentJob {\n        createdAt\n        id\n        number\n        reference\n        status\n        title\n        type\n      }\n      childJobs: Jobs {\n        createdAt\n        id\n        number\n        reference\n        status\n        title\n        type\n      }\n      compliances: Compliances(where: { entity: { _eq: "Job" } }) {\n        id\n      }\n    }\n  }\n  ',"\n  ","\n"])),g.WW,g.MR),j=((0,x.Ps)(o||(o=(0,b.Z)(["\n  mutation AddJob($objects: [Job_insert_input!]!) {\n    insert_Job(objects: $objects) {\n      affected_rows\n      returning {\n        id\n      }\n    }\n  }\n"]))),(0,x.Ps)(r||(r=(0,b.Z)(["\n  mutation MyMutation($objects: [CreateJobInput]!, $adminId: Int!) {\n    createJob(adminId: $adminId, objects: $objects) {\n      data\n    }\n  }\n"])))),I=(0,x.Ps)(a||(a=(0,b.Z)(["\n  mutation UpdateJob($id: Int!, $changes: Job_set_input) {\n    update_Job_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n      status\n    }\n  }\n"]))),S=(0,x.Ps)(s||(s=(0,b.Z)(['\n  mutation UpdateJob(\n    $jobId: Int!\n    $changes: Job_set_input\n    $deletedAssetIds: [Int!]\n    $assets: [Asset_Entity_insert_input!]!\n    $questions: [Taxonomy_Entity_insert_input!]!\n    $hasQuestions: Boolean!\n    $compliances: [Compliance_Entity_insert_input!]!\n  ) {\n    update_Job_by_pk(pk_columns: { id: $jobId }, _set: $changes) {\n      id\n      status\n      number\n    }\n    insert_Asset_Entity(objects: $assets) {\n      returning {\n        assetId\n        entity\n        id\n        entityId\n        status\n      }\n    }\n    delete_Asset_Entity(where: { id: { _in: $deletedAssetIds } }) {\n      returning {\n        assetId\n        entityId\n        entity\n        id\n      }\n    }\n    delete_Taxonomy_Entity(where: { entityId: { _eq: $jobId }, entity: { _eq: "Job" } }) {\n      returning {\n        id\n      }\n    }\n    insert_Taxonomy_Entity(objects: $questions) @include(if: $hasQuestions) {\n      returning {\n        id\n      }\n    }\n    delete_Compliance_Entity(where: { entityId: { _eq: $jobId }, entity: { _eq: "Job" } }) {\n      returning {\n        id\n      }\n    }\n    insert_Compliance_Entity(objects: $compliances) {\n      returning {\n        id\n      }\n    }\n  }\n']))),A=(0,x.Ps)(c||(c=(0,b.Z)(['\n  mutation UpdateJob(\n    $jobId: Int!\n    $changes: Job_set_input\n    $questions: [Taxonomy_Entity_insert_input!]!\n    $hasQuestions: Boolean!\n  ) {\n    update_Job_by_pk(pk_columns: { id: $jobId }, _set: $changes) {\n      id\n      status\n    }\n    delete_Taxonomy_Entity(where: { entityId: { _eq: $jobId }, entity: { _eq: "Job" } }) {\n      returning {\n        id\n      }\n    }\n    insert_Taxonomy_Entity(objects: $questions) @include(if: $hasQuestions) {\n      returning {\n        id\n      }\n    }\n  }\n']))),_=(0,x.Ps)(d||(d=(0,b.Z)(["\n  mutation AddJob($objects: [JobTiming_insert_input!]!) {\n    insert_JobTiming(objects: $objects) {\n      returning {\n        id\n        status\n        notes\n        createdAt\n      }\n    }\n  }\n"]))),Z=(0,x.Ps)(u||(u=(0,b.Z)(["\n  mutation DeleteJobTiming($id: Int!, $quoteId: Int, $status: String) {\n    delete_JobTiming(\n      where: { jobId: { _eq: $id }, quoteId: { _eq: $quoteId }, status: { _eq: $status } }\n    ) {\n      returning {\n        jobId\n        status\n      }\n    }\n  }\n"]))),O=(0,x.Ps)(l||(l=(0,b.Z)(['\n  query GetJobPredefined(\n    $accountId: Int!\n    $locationId: Int!\n    $parentId: Int!\n    $assetId: Int!\n    $includeAccount: Boolean!\n    $includeLocation: Boolean!\n    $includeParentJob: Boolean!\n    $includeAsset: Boolean!\n  ) {\n    parentJob: Job_by_pk(id: $parentId) @include(if: $includeParentJob) {\n      id\n      title\n      description\n      reference\n      access\n      source\n      slaId\n      paymentMethod\n      pricing\n      customerSpendThreshold\n      amount\n      supplierLabourAmount\n      supplierMaterialsAmount\n      admin: Admin {\n        id\n        name\n      }\n      customer: Customer {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n      }\n      assets: Assets {\n        id\n        status\n        entity\n        entityId\n        Asset {\n          name\n          serialNumber\n          id\n        }\n      }\n      assetCategory: AssetCategory {\n        name\n        id\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      answers: Taxonomy(\n        where: { Taxonomy: { type: { _eq: "jobQuestion" } } }\n        order_by: { taxonomyId: asc }\n      ) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      childJobs: Jobs {\n        createdAt\n        id\n        reference\n        status\n        title\n      }\n      compliances: Compliances(where: { entity: { _eq: "Job" } }) {\n        id\n        compliance: Compliance {\n          id\n          name\n        }\n      }\n      manager: Manager {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      service: Service {\n        id\n        name\n        countryId\n        currencyId\n        customerDayRate\n        customerDayRateOOH\n        customerDayRatePremium\n        customerHourRate\n        customerHourRateOOH\n        customerHourRatePremium\n        supplierDayRate\n        supplierDayRateOOH\n        supplierDayRatePremium\n        supplierHourRate\n        supplierHourRateOOH\n        supplierHourRatePremium\n        minimumInterval\n        minimumLength\n      }\n    }\n    customer: Account_by_pk(id: $accountId) @include(if: $includeAccount) {\n      id\n      name\n    }\n    location: Location_by_pk(id: $locationId) @include(if: $includeLocation) {\n      id\n      name\n      customerAssociations: Account_Locations(where: { Account: { type: { _eq: "customer" } } }) {\n        customer: Account {\n          id\n          name\n        }\n      }\n    }\n    asset: Asset_by_pk(id: $assetId) @include(if: $includeAsset) {\n      id\n      name\n      Category {\n        name\n        id\n      }\n    }\n  }\n']))),C=(0,x.Ps)(m||(m=(0,b.Z)(['\n  query GetSLAsForJobManage($customerId: Int, $locationId: Int) {\n    customerSlas: SLA_Entity(\n      where: { entityId: { _eq: $customerId }, entity: { _eq: "Account" } }\n    ) {\n      sla: SLA {\n        name\n      }\n      id\n      inUse\n      onSite\n      onSiteUnit\n      createdAt\n      updatedAt\n      notes\n      slaId\n    }\n    locationSlas: SLA_Entity(\n      where: { entityId: { _eq: $locationId }, entity: { _eq: "Location" } }\n    ) {\n      sla: SLA {\n        name\n      }\n      id\n      inUse\n      onSite\n      onSiteUnit\n      createdAt\n      updatedAt\n      notes\n      slaId\n      entity\n    }\n    slas: SLA(where: { status: { _eq: "active" } }, order_by: { name: asc }) {\n      id\n      label: name\n      notes\n      onSite\n      onSiteUnit\n      createdAt\n      updatedAt\n      type\n    }\n  }\n']))),w=(0,x.Ps)(p||(p=(0,b.Z)(["\n  query GetJobFinanceLogs($jobId: Int!) {\n    logs: JobFinanceLog(where: { jobId: { _eq: $jobId } }, order_by: { createdAt: desc }) {\n      id\n      type\n      value\n      difference\n      createdAt\n      meta\n    }\n  }\n"]))),P=(0,x.Ps)(y||(y=(0,b.Z)(["\n  mutation AddJobFinanceLog($objects: [JobFinanceLog_insert_input!]!) {\n    insert_JobFinanceLog(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),q=(0,x.Ps)(f||(f=(0,b.Z)(["\n  mutation AddJob(\n    $timing: [JobTiming_insert_input!]!\n    $financeLog: [JobFinanceLog_insert_input!]!\n    $hasFinanceLog: Boolean!\n    $jobId: Int!\n    $jobChange: Job_set_input\n  ) {\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        notes\n        createdAt\n      }\n    }\n    insert_JobFinanceLog(objects: $financeLog) @include(if: $hasFinanceLog) {\n      returning {\n        id\n      }\n    }\n    update_Job_by_pk(pk_columns: { id: $jobId }, _set: $jobChange) @include(if: $hasFinanceLog) {\n      id\n      status\n    }\n  }\n"]))),R=(0,x.Ps)(v||(v=(0,b.Z)(["\n  mutation calculateJobFinance($jobId: Int!, $invoiceType: String!) {\n    calculateJobFinance(jobId: $jobId, invoiceType: $invoiceType) {\n      data\n    }\n  }\n"])))},45935:function(e,n,t){t.d(n,{$z:function(){return c},I2:function(){return d},lV:function(){return u},xv:function(){return l},OU:function(){return m},v8:function(){return p},eD:function(){return y},G2:function(){return f}});var i=t(83789),o=t(30381),r=t.n(o),a=t(91966),s=t.n(a),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o={assetSelected:null,costCategorySelected:null,customerSelected:null,customerUserSelected:null,locationSelected:null,subLocationSelected:null,managerSelected:null,serviceSelected:null,siteVisitReq:!1,taxonomyId_ShortDesc:null,assetCategorySelected:null,access:null,paymentMethod:"invoice"};if(e.customer&&(o.customerSelected={value:e.customer.id,label:e.customer.name}),e.location){var r,a,s,c,d=e.location.customerAssociations;o.locationSelected={value:e.location.id,label:e.location.name},o.customerSelected={value:null===(r=d[0])||void 0===r||null===(a=r.customer)||void 0===a?void 0:a.id,label:null===(s=d[0])||void 0===s||null===(c=s.customer)||void 0===c?void 0:c.name}}if(e.asset&&(o.assetSelected={value:e.asset.id,label:e.asset.name},o.assetCategorySelected={value:e.asset.Category.id,label:e.asset.Category.name}),n("admin")&&(o.managerSelected={value:t.id,label:"".concat(t.nameFirst," ").concat(t.nameLast)}),n("customer")&&(o.customerUserSelected={value:t.id,label:"".concat(t.nameFirst," ").concat(t.nameLast)}),e.parentJob){var u,l=e.parentJob,m=l.access,p=l.answers,y=l.assetCategory,f=l.assets,v=l.compliances,b=l.costCategoryTaxonomy,x=l.customer,g=l.customerUser,h=l.manager,j=l.siteVisitAt,I=l.service,S=l.shortJobDesc,A=l.location;if(o.access=m,x&&(o.customerSelected={value:x.id,label:x.name}),g&&(o.customerUserSelected={value:g.id,label:"".concat(g.nameFirst," ").concat(g.nameLast)}),A&&(o.locationSelected={value:A.id,label:A.name}),h&&(o.managerSelected={value:h.id,label:"".concat(h.nameFirst," ").concat(h.nameLast),accounts:h.accounts}),"true"===i)o.title="Recall: ".concat((null===l||void 0===l||null===(u=l.shortJobDesc[0])||void 0===u?void 0:u.taxonomy.name)||l.title),o.description=l.description,o.reference=l.reference,o.source=l.source,o.slaId=l.slaId.toString(),o.paymentMethod=l.paymentMethod,o.pricing=l.pricing,o.taxonomyId_ShortDesc={value:S[0].taxonomyId,label:S[0].taxonomy.name},I&&(o.serviceSelected={value:I.id,label:I.name}),f&&f.length>0?o.assetSelected=f.map((function(e){var n=e.Asset.serialNumber?" (".concat(e.Asset.serialNumber,")"):"";return{value:e.Asset.id,label:e.Asset.name+n,assetId:e.id,jobId:e.entityId}})):o.assetSelected=[],y&&(o.assetCategorySelected={value:y.id,label:y.name}),j&&(o.siteVisitReq=!0),o.questions=p.map((function(e){var n;return{id:e.id,taxonomyId:e.taxonomyId,comments:e.comments,name:null===(n=e.taxonomy)||void 0===n?void 0:n.name}})),b&&(o.costCategorySelected={value:b.id,label:b.name}),v[0]&&(o.complianceSelected={value:v[0].compliance.id,label:v[0].compliance.name},o.compliance=!0)}return o},d=function(e){var n={};return Object.keys(e).map((function(t){var i=e[t];return"number"===typeof i&&(i=i.toString()),["timingStart","timingEnd","quoteDue","siteVisitStart","siteVisitEnd"].includes(t)&&null!==i&&(i=new Date(i)),n[t]=i,n})),n.siteVisitReq||(n.siteVisitWeekends=!1),delete n.siteVisitReq,n.siteVisitWeekends?n.siteVisitWeekends=!0:n.siteVisitWeekends=!1,e.customer&&(n.customerSelected={value:e.customer.id,label:e.customer.name}),e.customerUser&&(n.customerUserSelected={value:e.customerUser.id,label:"".concat(e.customerUser.nameFirst," ").concat(e.customerUser.nameLast)}),e.location&&(n.locationSelected={value:e.location.id,label:e.location.name}),e.manager&&(n.managerSelected={value:e.manager.id,label:"".concat(e.manager.nameFirst," ").concat(e.manager.nameLast),accounts:e.manager.accounts}),e.service&&(n.serviceSelected={value:e.service.id,label:e.service.name}),e.assets&&e.assets.length>0?(n.assetSelected=e.assets.map((function(e){var n=e.Asset.serialNumber?" (".concat(e.Asset.serialNumber,")"):"";return{value:e.Asset.id,label:e.Asset.name+n,assetId:e.id,jobId:e.entityId}})),delete n.assets):n.assetSelected=[],n.assetCategory&&(n.assetCategorySelected={value:n.assetCategory.id,label:n.assetCategory.name},delete n.assetCategory),n.siteVisitReq=!1,e.siteVisitStart&&(n.siteVisitReq=!0),n.shortJobDesc&&n.shortJobDesc.length>0&&(n.taxonomyId_ShortDesc={value:n.shortJobDesc[0].taxonomyId,label:n.shortJobDesc[0].taxonomy.name}),n.questions=n.answers.map((function(e){var n;return{id:e.id,taxonomyId:e.taxonomyId,comments:e.comments,name:null===(n=e.taxonomy)||void 0===n?void 0:n.name}})),delete n.answers,n.costCategoryTaxonomy?n.costCategorySelected={value:n.costCategoryTaxonomy.id,label:n.costCategoryTaxonomy.name}:n.costCategorySelected=null,e.compliances&&e.compliances[0]&&(n.complianceSelected={value:e.compliances[0].compliance.id,label:e.compliances[0].compliance.name},n.compliance=!0),n.allowTimingNormalHours=!e.timingNormalHours,n},u=function(e,n,t,o){var a;n.title=null;["slaId","customerSpendThreshold"].map((function(e){return n[e]?n[e]=parseInt(n[e]):n[e]=null,n})),delete n.timeSpan;["quoteDue","timingEnd","timingStart","endDate"].map((function(e){return n[e]&&(n[e]=r()(n[e]).utc().format()),"quoteDue"===e&&(n[e]=r()(n[e]).format()),n}));n.siteVisitReq?["siteVisitStart","siteVisitEnd"].map((function(e){return n[e]&&(n[e]=r()(n[e]).format()),n})):(n.siteVisitStart=null,n.siteVisitEnd=null),n.siteVisitWeekends="true"===n.siteVisitWeekends,delete n.siteVisitReq;["costCategory","customer","customerUser","location","manager","service"].map((function(e){return n[e+"Selected"]&&n[e+"Selected"].value&&(n[e+"Id"]=n[e+"Selected"].value),delete n[e+"Selected"],n})),"allowTimingNormalHours"===n.allowTimingNormalHours?n.timingNormalHours=!1:n.timingNormalHours=!0,delete n.allowTimingNormalHours,n.multipleDays&&"fixed"===n.pricing||(n.endDate=null),delete n.multipleDays,n.complianceSelected&&(n.Compliances={data:{complianceId:n.complianceSelected.value,entity:"Job",status:"active"}}),delete n.complianceSelected,delete n.compliance;var s="";e.quoted?(n.type="quote",n.slaId="3",n.serviceId=null,n.quoted=!0,n.pricing="fixed",s="quoteNew"):e.ppm?(n.type="ppm",n.ppm=!0,s="ppmNew"):null!==(a=n.Compliances)&&void 0!==a&&a.data?(n.type="cppm",s=t("admin")?"raised":"pending"):(n.type="reactive",s=t("admin")?"raised":"pending"),e.id||(n.status=s,n.JobTimings={data:{status:n.status,userId:o.id}},t("admin")?n.adminId=o.accountId:n.adminId=o.adminId||1),e.parentId&&(n.parentId=parseInt(e.parentId)),n.timing&&"at"===n.timing&&(n.timingEnd=null),"foc"===n.quoteCharge&&(n.quoteChargeAmount=null);var c=[];return n.questions&&(c=JSON.parse(n.questions).map((function(e){return{comments:e.comments,entity:e.entity,taxonomyId:e.taxonomyId}}))),!e.id&&n.taxonomyId_ShortDesc&&(n.Taxonomy={data:[{entity:"Job",taxonomyId:n.taxonomyId_ShortDesc.value}].concat((0,i.Z)(c))}),delete n.taxonomyId_ShortDesc,delete n.questions,n},l=function(e){var n=e.form,t=e.jobId,i=[];return n.compliance&&n.complianceSelected&&(i={complianceId:n.complianceSelected.value,entity:"Job",entityId:t,status:"active"}),delete n.complianceSelected,delete n.compliance,i},m=function(e){if(e.assetSelected&&e.assetSelected.length>0){var n=[];e.assetSelected.map((function(e,t){return n[t]={assetId:e.value,status:"active",entity:"Job"}}));var t={};t.data=n,e.Assets=t}return delete e.assetSelected,e.assetCategoryId=e.assetCategorySelected&&e.assetCategorySelected.value,delete e.assetCategorySelected,e},p=function(e){var n=e.data,t=e.defaultAssets,i=e.entity,o=e.entityId,r=[],a=s()(n.assetSelected,t).map((function(e,n){return r[n]={assetId:e.value,status:"active",entity:i,entityId:o}})),c=s()(t,n.assetSelected).map((function(e){return e.assetId}));return n.assetCategorySelected&&(n.assetCategoryId=n.assetCategorySelected.value),delete n.assetSelected,delete n.assetCategorySelected,{deletedAssetIds:c,addedAssets:a}},y=function(e,n){var t;if(n){if(null===(t=e.taxonomyId_ShortDesc)||void 0===t||!t.value)return{};var o=JSON.parse(e.questions).map((function(e){return{comments:e.comments,entityId:n,entity:"Job",taxonomyId:e.taxonomyId}}));return[{entityId:n,entity:"Job",taxonomyId:e.taxonomyId_ShortDesc.value}].concat((0,i.Z)(o))}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{slas:[],customerSlas:[],locationSlas:[]},n=e.slas,t=e.customerSlas,i=e.locationSlas;return n.map((function(e){var n=null===i||void 0===i?void 0:i.find((function(n){return n.slaId===e.id&&n.inUse})),o=null===t||void 0===t?void 0:t.find((function(n){return n.slaId===e.id&&n.inUse})),r=(null===n||void 0===n?void 0:n.notes)||(null===o||void 0===o?void 0:o.notes),a=(null===n||void 0===n?void 0:n.onSite)||(null===o||void 0===o?void 0:o.onSite),s=(null===n||void 0===n?void 0:n.onSiteUnit)||(null===o||void 0===o?void 0:o.onSiteUnit);return{id:e.id,label:e.label,value:e.id,notes:r||e.notes,onSite:a||e.onSite,onSiteUnit:s||e.onSiteUnit,disabled:!!(null!==i&&void 0!==i&&i.find((function(n){return n.slaId===e.id&&!n.inUse}))||null!==t&&void 0!==t&&t.find((function(n){return n.slaId===e.id&&!n.inUse})))}}))}},12517:function(e,n,t){t.d(n,{g:function(){return Z}});var i=t(67294),o=t(93633),r=t(38478),a=t(11163),s=t(42593),c=t(97721),d=t(4513),u=t(78215),l=t(2356),m=t(66639),p=t(70448),y=t(12841),f=t(80285),v=t(80284),b=t(93443),x=t(55148),g=t(1323),h=t(85893),j=function(e){var n=e.quotation,t="supplier"===(0,g.x)().user.accountType,i=x.E6.find((function(e){return e.value===n.status}))||{text:"-",context:"info"},o=(0,f.Z)(null===n||void 0===n?void 0:n.lineItems.filter((function(e){return"Labour"===e.type})).reduce((function(e,n){return e+n.supplierTotal}),0)),r=(0,f.Z)(null===n||void 0===n?void 0:n.lineItems.filter((function(e){return"Materials"===e.type})).reduce((function(e,n){return e+n.supplierTotal}),0)),a=(0,f.Z)(null===n||void 0===n?void 0:n.lineItems.reduce((function(e,n){return e+n.supplierTotal}),0)),s=(0,f.Z)(null===n||void 0===n?void 0:n.lineItems.reduce((function(e,n){return e+n.total}),0));return(0,h.jsxs)(v.Z,{fitParentHeight:!0,open:!0,title:"Quotation",children:[(0,h.jsx)(b.Z,{content:"Status",text:i.text}),(0,h.jsx)(b.Z,{content:"Labour Total",text:o}),(0,h.jsx)(b.Z,{content:"Materials Total",text:r}),(0,h.jsx)(b.Z,{content:"Supplier Total",text:a}),!t&&(0,h.jsx)(b.Z,{content:"Customer Total",text:s})]})},I=t(28865),S=t(86353),A=t(38401),_=t(77567),Z=function(e){var n=e.jobId,t=e.toggleShow,f=e.numberPrefix,v=e.numberSuffix,b=(0,i.useContext)(s.Z).hasRole,x=(0,a.useRouter)(),g=x.asPath.includes("quotes");(0,i.useEffect)((function(){var e=function(e){t()};return x.events.on("routeChangeComplete",e),function(){x.events.off("routeChangeComplete",e)}}),[]);var Z=(0,o.a)(r.Vw,{variables:{jobId:n}}),O=Z.loading,C=Z.data,w=(C=void 0===C?{job:{}}:C).job;if(O)return(0,h.jsx)(c.Z,{indicator:(0,h.jsx)(d.Z,{})});var P=(0,p.WE)(null===w||void 0===w?void 0:w.location,"registered");return(0,h.jsxs)(h.Fragment,{children:[w.customer&&(0,h.jsx)(_.g,{editable:!1,entity:{id:w.customer.id,name:w.customer.name,website:w.customer.website},entityName:"Account"}),(0,h.jsxs)(u.Z,{children:[(0,h.jsxs)(l.Z,{md:6,children:[(0,h.jsx)(I.p,{isQuotes:g,job:w,numberPrefix:f,numberSuffix:v}),(0,h.jsx)(y.I,{job:w,show:b(["admin","customer"])}),b(["admin"])&&w.supplier&&(0,h.jsx)(S.U,{job:w},"supplier-".concat(w.id))]}),(0,h.jsxs)(l.Z,{md:6,children:[P&&(0,h.jsx)(m.f,{address:P.address,edit:!1,entity:"Location",entityId:w.location.id,id:P.id,title:"Address",type:"registered"}),(0,h.jsx)(A.j,{isQuotes:g,job:w,edit:!1}),!!w.quotations.length&&g&&w.quotations.map((function(e){return(0,h.jsx)(j,{quotation:e})}))]})]})]})};Z.defaultProps={numberPrefix:"",numberSuffix:""}},38478:function(e,n,t){t.d(n,{aL:function(){return b},pf:function(){return x},wd:function(){return g},H_:function(){return h},xY:function(){return j},yT:function(){return I},sW:function(){return S},Vw:function(){return A},EY:function(){return _},iU:function(){return Z}});var i,o,r,a,s,c,d,u,l,m,p,y=t(52209),f=t(54397),v=t(88402),b=(0,f.Ps)(i||(i=(0,y.Z)(["\n  fragment JobFields on Job {\n    access\n    adminId\n    costCategory\n    createdAt\n    description\n    id\n    meta\n    pricing\n    reference\n    scheduledAt\n    status\n    supplierLabourAmount\n    supplierMaterialsAmount\n    timing\n    timingEnd\n    timingNormalHours\n    timingStart\n    title\n    type\n    siteVisitStart\n    siteVisitEnd\n    siteVisitWeekends\n    amount\n    number\n    quoted\n    timingStatus\n    correctDuration\n    correctStart\n    correctEnd\n  }\n"]))),x=(0,f.Ps)(o||(o=(0,y.Z)(["\n  fragment JobQuoteFields on Job {\n    quoted\n    quoteNumber\n    quoteDue\n    quoteCharge\n  }\n"]))),g=(0,f.Ps)(r||(r=(0,y.Z)(["\n  fragment JobAdminFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]))),h=(0,f.Ps)(a||(a=(0,y.Z)(["\n  fragment JobSupplierFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]))),j=((0,f.Ps)(s||(s=(0,y.Z)(["\n  fragment JobCustomerFields on Job {\n    customerId\n    customerUserId\n    locationId\n  }\n"]))),(0,f.Ps)(c||(c=(0,y.Z)(["\n  mutation UpdateJob($id: Int!, $changes: Job_set_input, $timing: [JobTiming_insert_input!]!) {\n    update_Job_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"])))),I=(0,f.Ps)(d||(d=(0,y.Z)(["\n  mutation InsertJobTiming($timing: [JobTiming_insert_input!]!) {\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]))),S=(0,f.Ps)(u||(u=(0,y.Z)(['\n  query GetJobHistory(\n    $jobId: Int\n    $locationId: Int!\n    $limit: Int\n    $offset: Int\n    $serviceId: Int\n    $startDate: timestamptz!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      id\n      title\n      status\n      scheduledAt\n      createdAt\n      meta\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']))),A=(0,f.Ps)(l||(l=(0,y.Z)(['\n  query GetJob($jobId: Int!) {\n    job: Job_by_pk(id: $jobId) {\n      access\n      costCategory\n      customerSpendThreshold\n      description\n      supplierLabourAmount\n      supplierMaterialsAmount\n      quoteDue\n      quoteNumber\n      id\n      number\n      meta\n      paymentMethod\n      reference\n      status\n      title\n      type\n      quotations: SupplierQuotes {\n        id\n        quoteNumber\n        status\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          total\n          type\n          unitRate\n          supplierTotal\n        }\n        supplier: Supplier {\n          id\n          type\n          name\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      customer: Customer {\n        id\n        name\n        website\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        nameFirst\n        nameLast\n        fullName\n        email\n        phone\n      }\n      supplier: Supplier {\n        id\n        name\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          id\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            fullName\n            nameFirst\n            nameLast\n            email\n            phone\n          }\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"])),v.WW,v.MR),_=(0,f.Ps)(m||(m=(0,y.Z)(["\n  query GetAllAdmins($adminId: Int!) {\n    users: User(where: { Account_Users: { Account: { id: { _eq: $adminId } } } }) {\n      id\n      fullName\n      email\n      phone\n    }\n  }\n"]))),Z=(0,f.Ps)(p||(p=(0,y.Z)(["\n  mutation calculateJobFinance($jobId: Int!, $invoiceType: String!) {\n    calculateJobFinance(jobId: $jobId, invoiceType: $invoiceType) {\n      data\n    }\n  }\n"])))},68343:function(e,n,t){t.d(n,{B:function(){return l}});var i=t(83789),o=t(24237),r=t(71070),a=t(18944),s=t(55148),c=t(90358),d=t(1323),u=t(85893),l=function(e){var n=e.size,t=e.value,o=e.withTooltip,l=e.textColor,p=(0,c.t)(t),y=(0,d.x)().hasRole,f=[].concat((0,i.Z)(s.iz),(0,i.Z)(s.yW),(0,i.Z)(s.l8)).find((function(e){return e.value===t}))||{statusText:""},v=f.text,b=f.customerText,x=f.supplierText,g=y("admin")?v:y("supplier")?x||v:y("customer")&&b||v;return o?(0,u.jsx)(r.Z,{content:g,context:"black",children:(0,u.jsx)(m,{children:(0,u.jsx)("svg",{height:"16",width:"16",children:(0,u.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:p})})})}):(0,u.jsxs)(m,{children:[(0,u.jsx)("svg",{height:"16",width:"16",children:(0,u.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:p})}),(0,u.jsx)(a.Z,{size:n,context:l,children:g})]})},m=o.ZP.span.withConfig({displayName:"status__StyledLabel",componentId:"sc-sb0gv0-0"})(["display:flex;align-items:center;"]);l.defaultProps={size:"sm",withTooltip:!1}},86353:function(e,n,t){t.d(n,{U:function(){return s}});var i=t(80284),o=t(93443),r=t(26398),a=t(85893),s=function(e){var n,t,s,c,d,u,l=e.job,m=l.supplier.contactUsers[0],p=(null===(n=l.supplierUser)||void 0===n?void 0:n.id)&&(null===m||void 0===m?void 0:m.user)&&(null===(t=l.supplierUser)||void 0===t?void 0:t.id)!==(null===m||void 0===m?void 0:m.user.id);return(0,a.jsxs)(i.Z,{fitParentHeight:!0,title:"Supplier",children:[(0,a.jsx)(o.Z,{content:"Name",text:(0,a.jsx)(r.Z,{to:"/dashboard/suppliers/view?id=".concat(l.supplier.id),passHref:!0,children:l.supplier.name})})," ",(0,a.jsx)(o.Z,{content:p?"Contact":"Contact / Operative",text:m?(0,a.jsx)(r.Z,{to:"/dashboard/users/view?id=".concat(m.user.id),passHref:!0,children:m.user.fullName}):""}),(0,a.jsx)(o.Z,{content:p?"Contact email":"Email",text:null===m||void 0===m||null===(s=m.user)||void 0===s?void 0:s.email}),(0,a.jsx)(o.Z,{content:p?"Contact phone":"Phone",text:null===m||void 0===m||null===(c=m.user)||void 0===c?void 0:c.phone}),l.supplierUser&&p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{content:"Operative",text:l.supplierUser?(0,a.jsx)(r.Z,{to:"/dashboard/users/view?id=".concat(l.supplierUser.id),passHref:!0,children:l.supplierUser.fullName}):""}),(0,a.jsx)(o.Z,{content:"Operative email",text:null===(d=l.supplierUser)||void 0===d?void 0:d.email}),(0,a.jsx)(o.Z,{content:"Operative phone",text:null===(u=l.supplierUser)||void 0===u?void 0:u.phone})]})]})}},38401:function(e,n,t){t.d(n,{j:function(){return w}});var i=t(92809),o=t(30266),r=t(80318),a=t(64687),s=t.n(a),c=t(67294),d=t(75709),u=t(84774),l=t(80880),m=t(14347),p=t(80284),y=t(93443),f=t(45935),v=t(5e3),b=t(42283),x=t(47385),g=t(97202),h=t(65375),j=t(83528),I=t(71247),S=t(92549),A=t(72197),_=t(85893);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var C=function(e){var n=e.description,t=e.handleWorkDescriptionSubmit,i=e.job,o=e.currentQuestions,r=(0,c.useState)(o),a=r[0],s=r[1],d={};i.shortJobDesc&&i.shortJobDesc.length>0&&(d={value:i.shortJobDesc[0].taxonomyId,label:i.shortJobDesc[0].taxonomy.name});var u=(0,b.cI)({defaultValues:{description:n,taxonomyId_ShortDesc:d}}),l=u.control,m=u.errors,p=u.handleSubmit,y=u.register,f=u.setValue,v=(0,u.watch)("taxonomyId_ShortDesc",o),Z=(0,x.Z)(v);(0,c.useEffect)((function(){v!==Z&&Z&&s(v.childs)}),[v]);var C={control:l,errors:m,register:y},w=function(e){t(e)};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(g.Z,{handleSubmit:p(w),children:[(0,_.jsx)(A.l,O(O({},C),{},{label:"Short Job Description",name:"taxonomyId_ShortDesc",type:"jobTags"})),(0,_.jsx)(h.Z,{label:"Work description",children:(0,_.jsx)(j.Z,O(O({},C),{},{name:"description",rows:3}))}),(0,_.jsx)(I.Z,O(O({},C),{},{name:"questions",type:"hidden"}))]}),(0,_.jsx)(S.D,{entity:"Job",entityId:i.id,onSuccess:function(e){f("questions",JSON.stringify(e)),p(w)()},questions:a})]})},w=function(e){var n,t,a=e.isQuotes,b=e.edit,x=e.job,g=e.refetch,h=(0,c.useContext)(l.Z),j=x.shortJobDesc&&x.shortJobDesc.length?x.shortJobDesc[0].taxonomy.name:"",I=null===(n=x.answers)||void 0===n?void 0:n.map((function(e){var n;return{id:e.id,taxonomyId:e.taxonomyId,comments:e.comments,name:null===(n=e.taxonomy)||void 0===n?void 0:n.name}})),S=(0,d.D)(u.FA),A=(0,r.Z)(S,1)[0],Z=function(){var e=(0,o.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,f.eD)(n,x.id),delete n.questions,delete n.taxonomyId_ShortDesc,e.next=5,A({variables:{jobId:x.id,changes:n,questions:t,hasQuestions:t.length>0}});case 5:h.close(),g();case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(){h.show({content:(0,_.jsx)(C,{description:x.description||"",handleWorkDescriptionSubmit:Z,job:x,currentQuestions:I}),title:"Work Description"})},w=function(){return(0,_.jsx)(m.Z,{context:"secondary",onClick:O,size:"sm",children:"Edit"})};return(0,_.jsxs)(p.Z,(t={fitParentHeight:!0,open:!0,title:"Sensors"},(0,i.Z)(t,"title","Issue Reported - Client"),(0,i.Z)(t,"toolbar",b&&(0,_.jsx)(w,{})),(0,i.Z)(t,"children",[!a&&(0,_.jsx)(y.Z,{content:"Short Job Description",text:j}),(0,_.jsx)(y.Z,{content:a?"Description":"Job Description",text:x.description}),(0,_.jsx)(v.y,{answers:I})]),t))};w.defaultProps={edit:!1}},19952:function(e,n,t){t.d(n,{t:function(){return s},K:function(){return c}});var i,o,r=t(52209),a=t(54397),s=(0,a.Ps)(i||(i=(0,r.Z)(['\n  query GetProperty($id: Int!) {\n    location: Location_by_pk(id: $id) {\n      id\n      access\n      createdAt\n      name\n      contactUserId\n      status\n      meta\n      expenses: Expenses(where: { entity: { _eq: "Location" } }) {\n        id\n        amount\n        description\n        markup\n        total\n        unit\n        vat\n        paid\n        occurredAt\n        recurring\n      }\n      addresses: Addresses(order_by: { id: asc }, where: { entity: { _eq: "Location" } }) {\n        id\n        registered\n        operating\n        trading\n        invoice\n        status\n        createdAt\n        address: Address {\n          id\n          name\n          addressLine1\n          addressLine2\n          addressLine3\n          city\n          county\n          geo\n          postCode\n          country: Country {\n            id\n            name\n            code\n          }\n        }\n      }\n      bookings: Jobs {\n        id\n        title\n        createdAt\n        customerId\n        amount\n        locationId\n        managerId\n        quoteNumber\n        reference\n        status\n        serviceId\n        meta\n        customer: Customer {\n          id\n          name\n        }\n        location: Location {\n          id\n          name\n          addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n            id\n            registered\n            operating\n            trading\n            invoice\n            status\n            createdAt\n            address: Address {\n              id\n              name\n              addressLine1\n              addressLine2\n              addressLine3\n              city\n              county\n              geo\n              postCode\n              country: Country {\n                id\n                name\n              }\n            }\n          }\n        }\n        manager: Manager {\n          id\n          nameFirst\n          nameLast\n        }\n        sla: SLA {\n          id\n          name\n          notes\n        }\n        supplier: Supplier {\n          id\n          companyNumber\n          createdAt\n          name\n          status\n          type\n          updatedAt\n          website\n          clientType\n          managerId\n          vatId\n          meta\n          media: Media {\n            id\n            medium: Medium {\n              id\n              category\n              filename\n              meta\n              type\n            }\n          }\n          manager: Manager {\n            id\n            fullName\n          }\n        }\n        supplierOffers: SupplierOffers {\n          status\n          rate\n          supplier: Supplier {\n            id\n            companyNumber\n            createdAt\n            name\n            status\n            type\n            updatedAt\n            website\n            clientType\n            managerId\n            vatId\n            meta\n            media: Media {\n              id\n              medium: Medium {\n                id\n                category\n                filename\n                meta\n                type\n              }\n            }\n            manager: Manager {\n              id\n              fullName\n            }\n          }\n        }\n        timings: JobTimings {\n          id\n          status\n          createdAt\n        }\n      }\n      customer: Account_Locations(where: { Account: { type: { _eq: "customer" } } }) {\n        account: Account {\n          id\n          companyNumber\n          createdAt\n          name\n          status\n          type\n          updatedAt\n          website\n          clientType\n          managerId\n          vatId\n          meta\n\n          media: Media {\n            id\n            medium: Medium {\n              id\n              category\n              filename\n              meta\n              type\n            }\n          }\n          manager: Manager {\n            id\n            fullName\n          }\n        }\n      }\n      compliances: Compliances(\n        where: { entity: { _eq: "Location" } }\n        order_by: { expiryAt: asc }\n      ) {\n        id\n        createdAt\n        entity\n        entityId\n        expiryAt\n\n        insuranceAmount\n        regNum\n        meta\n        compliance: Compliance {\n          id\n          type\n          name\n          status\n          hasInsuranceAmount\n          questions: Taxonomies(where: { entity: { _eq: "Compliance" } }) {\n            id\n            name\n            meta\n          }\n        }\n      }\n      supplier: Account_Locations(where: { Account: { type: { _eq: "supplier" } } }) {\n        id\n        account: Account {\n          id\n          companyNumber\n          createdAt\n          name\n          status\n          type\n          updatedAt\n          website\n          clientType\n          managerId\n          vatId\n          meta\n          media: Media {\n            id\n            medium: Medium {\n              id\n              category\n              filename\n              meta\n              type\n            }\n          }\n          manager: Manager {\n            id\n            fullName\n          }\n        }\n      }\n      user: User {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      assets: Assets {\n        id\n        name\n        manufacturer\n        model\n        serialNumber\n        createdAt\n        customer: Account {\n          id\n          name\n          type\n        }\n        location: Location {\n          id\n          name\n        }\n      }\n    }\n  }\n']))),c=(0,a.Ps)(o||(o=(0,r.Z)(['\n  query GetTaxonomys($status: String = "active") {\n    taxonomy: Taxonomy(\n      where: {\n        meta: { _contains: { sublocation: true } }\n        status: { _eq: $status }\n        type: { _eq: "assetCategory" }\n      }\n    ) {\n      id\n      meta\n      name\n      status\n      type\n    }\n  }\n'])))},46991:function(e,n,t){t.d(n,{J:function(){return s}});var i=t(80284),o=t(93443),r=t(18862),a=t(85893),s=function(e){var n=e.data,t=n.accountName,s=n.country,c=n.createdAt,d=n.fullName,u=n.position,l=n.phone,m=e.open;return(0,a.jsxs)(i.Z,{open:m,title:"Contact",children:[(0,a.jsx)(o.Z,{content:"Account",text:t||"Not Specified"}),(0,a.jsx)(o.Z,{content:"Name",text:d?"".concat(d):"Not Specified"}),(0,a.jsx)(o.Z,{content:"Position",text:u||"Not Specified"}),(0,a.jsx)(o.Z,{content:"Phone number",text:l||"Not Specified"}),(0,a.jsx)(o.Z,{content:"Country",text:s||"Not Specified"}),(0,a.jsx)(o.Z,{content:"Date Added",text:(0,r.Z)(c)})]})};s.defaultProps={open:!0}},77567:function(e,n,t){t.d(n,{g:function(){return $}});var i,o=t(67294),r=t(24237),a=t(80880),s=t(44902),c=t(78215),d=t(2356),u=t(8675),l=t(22796),m=t(62188),p=t(26398),y=t(11417),f=t(55657),v=t(55171),b=t.n(v),x=t(93633),g=t(52209),h=(0,t(54397).Ps)(i||(i=(0,g.Z)(["\n  query GetLog($entityId: bigint!, $entityName: String!) {\n    activity: audit_Activity(\n      where: { _and: [{ entityid: { _eq: $entityId } }, { entity: { _eq: $entityName } }] }\n    ) {\n      eventId\n      userId\n      user: User {\n        fullName\n      }\n      sessionUserName\n      transactionStart\n      statementStart\n      applicationName\n      clientAddr\n      clientPort\n      action\n      changedFields\n    }\n  }\n"]))),j=t(80284),I=t(18862),S=t(93443),A=t(65375),_={U:"Update",I:"Insert",D:"Delete"},Z=t(85893),O=function(e){var n=e.entityId,t=e.entityName,i=(0,x.a)(h,{variables:{entityId:n,entityName:t}}),o=i.loading,r=i.data,a=(r=void 0===r?{activity:[]}:r).activity;return!o&&(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(d.Z,{md:12,children:a.map((function(e){var n,t;return(0,Z.jsxs)(j.Z,{title:"".concat((null===(n=e.user)||void 0===n?void 0:n.fullName)||"Backend"," - ").concat((0,I.Z)(e.transactionStart,!0)),children:[(0,Z.jsx)(S.Z,{content:"Action:",text:(t=e.action,_[t]||"-")}),(0,Z.jsx)(l.Z,{}),(0,Z.jsx)(A.Z,{label:"Changed:",children:(0,Z.jsx)(b(),{collapsed:!0,displayDataTypes:!1,src:e.changedFields||"-"})}),(0,Z.jsx)(S.Z,{content:"Application:",text:e.applicationName||"-"})]},e.userId)}))})})},C=t(50899),w=t(80937),P=t(65570),q=t(57626),R=t(1323),T=function(e){var n,t,i,o,r=e.job,a=e.numberPrefix,s=e.numberSuffix,c=(0,R.x)().hasRole;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(S.Z,{content:"Type",text:(null===(n=w.x.find((function(e){return e.value===r.type})))||void 0===n?void 0:n.text)||"-"}),(0,Z.jsx)(S.Z,{content:"Order",text:(0,Z.jsx)(P.D,{id:r.id,number:r.number,invoiceNumber:null===r||void 0===r||null===(t=r.invoiceNumbers)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.id,type:r.type,numberPrefix:a,numberSuffix:s,isQuote:r.quoted})}),c("admin")&&r.source&&(0,Z.jsx)(S.Z,{content:"Source",text:null===(o=q.Y.find((function(e){return e.value===r.source})))||void 0===o?void 0:o.text})]})};T.defaultProps={numberPrefix:"",numberSuffix:""};var $=function(e){var n=e.avatar,t=e.editable,i=e.entity,r=e.entityName,y=e.icons,f=e.job,v=e.linkTitleTo,b=e.log,x=e.numberPrefix,g=e.numberSuffix,h=e.prefix,j=(0,o.useContext)(a.Z),I=(0,o.useState)(n),S=I[0],A=I[1],_=function(e){j.close(),e.filename?A("".concat("https://d1hk88326p7ilp.cloudfront.net","/").concat(e.filename)):A(null)},w=function(){return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(J,{context:"primary",icon:"building"}),v?(0,Z.jsx)(k,{border:!1,passHref:!0,to:v,children:i.name}):i.name]})};return(0,Z.jsxs)(U,{children:[(0,Z.jsx)(s.Z,{children:(0,Z.jsxs)(c.Z,{children:[(0,Z.jsx)(d.Z,{md:3,children:(0,Z.jsx)(u.Z,{action:t?"Edit":null,actionClick:function(){j.show({content:(0,Z.jsx)(C.G,{category:"avatar",entity:r,entityId:i.id,filters:{category:"avatar"},limit:1,onMediaAdd:_,onMediaRemove:_,type:"image"}),title:"Avatar"})},content:i.name,context:"primary",gmail:i.email,src:S})}),(0,Z.jsxs)(d.Z,{md:9,children:[(0,Z.jsx)(L,{content:(0,Z.jsx)(w,{}),noMargin:!0}),i.description&&(0,Z.jsx)(D,{content:i.description,noMargin:!0}),i.website&&(0,Z.jsxs)(N,{href:i.website,rel:"nofollow noopener noreferrer",target:"_blank",children:[(0,Z.jsx)(J,{context:"primary",icon:"window-maximize"}),"Visit website"]})]}),f&&(0,Z.jsx)(d.Z,{md:12,children:(0,Z.jsx)(T,{job:f,numberPrefix:x,numberSuffix:g})})]})}),(0,Z.jsx)(l.Z,{marginTop:"sm"}),y&&(0,Z.jsxs)(E,{children:[y.map((function(e){var n=e.icon,t=e.onClick,i=e.to;return(0,Z.jsxs)("div",{children:[t&&(0,Z.jsx)(Q,{onClick:t,children:(0,Z.jsx)(m.Z,{icon:n,prefix:h})}),i&&(0,Z.jsx)(p.Z,{border:!1,passHref:!0,to:i,children:(0,Z.jsx)(m.Z,{icon:n,prefix:h})})]},n)})),b&&(0,Z.jsx)(Q,{onClick:function(){j.show({content:(0,Z.jsx)(O,{entityId:Number(b.entityId),entityName:b.entityName}),submit:!1,title:"Log Details",width:"50%"})},children:(0,Z.jsx)(m.Z,{icon:"history",size:"lg"})})]})]})},U=r.ZP.div.withConfig({displayName:"profileHeader__StyledHeader",componentId:"sc-ssc7qm-0"})(["background-color:#fff;border:1px solid #eee;box-shadow:rgba(45,62,80,0.12) 0 1px 5px 0;margin-bottom:0.5rem;padding:1rem 0;"]),L=(0,r.ZP)(y.Z).withConfig({displayName:"profileHeader__StyledHeading",componentId:"sc-ssc7qm-1"})(["font-size:1rem;margin-top:0.5rem;"]),D=(0,r.ZP)(y.Z).withConfig({displayName:"profileHeader__StyledDescription",componentId:"sc-ssc7qm-2"})(["font-size:0.9rem;margin-top:0.5rem;"]),N=r.ZP.a.withConfig({displayName:"profileHeader__StyledLink",componentId:"sc-ssc7qm-3"})(["margin-bottom:1rem;"]),J=(0,r.ZP)(f.Z).withConfig({displayName:"profileHeader__StyledIcon",componentId:"sc-ssc7qm-4"})(["margin-right:0.5rem;"]),k=(0,r.ZP)(p.Z).withConfig({displayName:"profileHeader__StyledTitle",componentId:"sc-ssc7qm-5"})(["display:inline;"]),E=r.ZP.div.withConfig({displayName:"profileHeader__StyledIconContainer",componentId:"sc-ssc7qm-6"})(["display:flex;justify-content:center;"]),Q=r.ZP.div.withConfig({displayName:"profileHeader__Click",componentId:"sc-ssc7qm-7"})(["cursor:pointer;"]);$.defaultProps={avatar:"",editable:!0,numberPrefix:"",numberSuffix:""}},23461:function(e,n,t){t.d(n,{f:function(){return I}});var i=t(92809),o=t(67294),r=t(84550),a=t(34868),s=t(71247),c=t(69128),d=t(46482),u=t(83528),l=t(80880),m=t(75515),p=t(65375),y=t(14347),f=t(55657),v=t(76800),b=t(50899),x=t(85893);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j={checkbox:r.Z,currencyInput:a.Z,datepicker:v.M,input:s.Z,radio:c.Z,select:d.Z,textArea:u.Z,selectRange:d.Z},I=function(e){var n=e.control,t=e.entity,i=e.entityId,r=e.errors,a=e.input,s=e.inputType,c=e.key,d=e.label,u=e.mediaMeta,v=e.name,g=e.options,I=e.register,S=(0,o.useContext)(l.Z),A="select"===a&&g.length>0,_="currencyInput"===a,Z=["checkbox","radio"].includes(a)&&g.length>0,O="selectRange"===a,C="media"===a,w=h(h(h(h({control:n},Z&&{data:g}),A&&{options:g.map((function(e){return h(h({},e),{},{text:e.label})}))}),O&&{range:[10,0]}),{},{errors:r,key:c,label:m.Z.camelize(d),name:v,register:I,type:Z?a:s,minDate:"2020-04-19T08:29:04.839Z"}),P=j[a];return(0,x.jsx)(x.Fragment,{children:_?(0,x.jsx)(p.Z,{label:d,children:(0,x.jsx)(P,h(h({},w),{},{label:""}))}):(0,x.jsx)(x.Fragment,{children:C?(0,x.jsx)(p.Z,{label:d,children:(0,x.jsx)(y.Z,{context:"info",content:(0,x.jsx)(f.Z,{icon:"file-upload"}),onClick:function(){S.show({content:t&&i&&(0,x.jsx)(b.G,{entity:t,entityId:i,mediaMeta:u,category:"supplierQuestion"}),submit:!1,title:d})},size:"sm"})}):(0,x.jsx)(p.Z,{label:d,children:(0,x.jsx)(P,h({},w))})})})};I.defaultProps={input:"input",options:[],inputType:"text",label:"label"}},33462:function(e,n,t){t.d(n,{Im:function(){return m},RE:function(){return p},mW:function(){return y},ze:function(){return f},RQ:function(){return v},fC:function(){return b},uY:function(){return x}});var i,o,r,a,s,c,d,u=t(52209),l=t(54397),m=(0,l.Ps)(i||(i=(0,u.Z)(['\n  query GetTaxonomys(\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: Taxonomy_order_by!\n    $status: String = "active"\n    $type: String\n    $typeGroup: String\n    $parentId: Int\n    $fetchGroup: Boolean! = true\n    $id: Int\n    $isGroup: Boolean = false\n  ) {\n    taxonomy: Taxonomy(\n      limit: $limit\n      offset: $offset\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: $status }\n        type: { _eq: $type }\n        parentId: { _eq: $parentId }\n        id: { _eq: $id }\n        isGroup: { _eq: $isGroup }\n      }\n      order_by: [$orderBy]\n    ) {\n      options: Taxonomies(\n        where: {\n          type: { _eq: $type }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n\n        childs: Taxonomies(order_by: { id: asc }, where: { status: { _eq: "active" } }) {\n          taxonomyId: id\n          name\n          type\n          meta\n          status\n        }\n      }\n      id\n      name\n      type\n      status\n      parentId\n      createdAt\n      meta\n      parent: Parent {\n        id\n        name\n        type\n      }\n      childs: Taxonomies(order_by: { id: asc }, where: { status: { _eq: "active" } }) {\n        taxonomyId: id\n        name\n        type\n        meta\n        status\n      }\n      jobs: Taxonomy_Entities_aggregate(\n        where: { Taxonomy: { type: { _eq: "jobTags" } }, entity: { _eq: "Job" } }\n      ) {\n        aggregate {\n          count\n        }\n      }\n    }\n    meta: Taxonomy_aggregate(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: $status }\n        type: { _eq: $type }\n        parentId: { _eq: $parentId }\n        id: { _eq: $id }\n        isGroup: { _eq: $isGroup }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n    taxonomyGroup: Taxonomy(where: { isGroup: { _eq: true }, type: { _eq: $typeGroup } })\n      @include(if: $fetchGroup) {\n      value: id\n      text: name\n    }\n  }\n']))),p=(0,l.Ps)(o||(o=(0,u.Z)(["\n  query GetTaxonomy($id: Int!) {\n    taxonomy: Taxonomy_by_pk(id: $id) {\n      id\n      name\n      type\n      status\n      parentId\n      createdAt\n      meta\n    }\n  }\n"]))),y=(0,l.Ps)(r||(r=(0,u.Z)(["\n  mutation AddTaxonomy($objects: [Taxonomy_insert_input!]!) {\n    insert_Taxonomy(objects: $objects) {\n      returning {\n        id\n        type\n      }\n    }\n  }\n"]))),f=(0,l.Ps)(a||(a=(0,u.Z)(["\n  mutation UpdateTaxonomy($id: Int!, $changes: Taxonomy_set_input) {\n    update_Taxonomy_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n      type\n    }\n  }\n"]))),v=(0,l.Ps)(s||(s=(0,u.Z)(["\n  query GeTaxonomyWithEntities($type: String!, $entity: String!, $entityId: Int!) {\n    questions: Taxonomy(where: { type: { _eq: $type } }) {\n      id\n      meta\n      name\n      status\n      taxonomy_entity: Taxonomy_Entities(\n        where: { entityId: { _eq: $entityId }, entity: { _eq: $entity } }\n      ) {\n        comments\n      }\n    }\n  }\n"]))),b=(0,l.Ps)(c||(c=(0,u.Z)(["\n  mutation InsertTaxonomyEntity(\n    $entity: String!\n    $entityId: Int!\n    $questions: [Taxonomy_Entity_insert_input!]!\n    $objectStatusLog: [StatusLog_insert_input!]!\n    $hasStatusLog: Boolean!\n  ) {\n    delete_Taxonomy_Entity(where: { entityId: { _eq: $entityId }, entity: { _eq: $entity } }) {\n      returning {\n        id\n      }\n    }\n    insert_Taxonomy_Entity(objects: $questions) {\n      returning {\n        id\n      }\n    }\n\n    insert_StatusLog(objects: $objectStatusLog) @include(if: $hasStatusLog) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),x=(0,l.Ps)(d||(d=(0,u.Z)(["\n  query GetSLAsForJobManage {\n    slas: SLA(order_by: { name: asc }) {\n      id\n      label: name\n      notes\n    }\n  }\n"])))},5e3:function(e,n,t){t.d(n,{y:function(){return l}});var i=t(77417),o=t(78215),r=t(2356),a=t(93443),s=t(58448),c=t(14347),d=t(50899),u=t(85893),l=function(e){var n=e.answers,t=e.onEdit,l=e.entity,m=e.entityId;return(0,u.jsxs)(u.Fragment,{children:[n&&n.length>0&&(0,u.jsx)(i.Z,{content:"Questions"}),n&&n.map((function(e){var n,t,s,c=e.meta;return"media"===(null===c||void 0===c?void 0:c.input)?(0,u.jsx)(o.Z,{children:(0,u.jsxs)(r.Z,{md:6,children:[(0,u.jsx)(d.G,{entity:l,entityId:m,showItemActions:!1,showActionButtons:!1,summary:null===c||void 0===c?void 0:c.label,category:"supplierQuestion",mediaMeta:{taxonomyId:e.id}}),(0,u.jsx)(i.Z,{})]})}):(0,u.jsx)(a.Z,{content:(null===(n=e.taxonomy)||void 0===n?void 0:n.name)||e.name,text:e.comments||(null===(t=e.taxonomy_entity)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.comments)},e.id||e.taxonomyId)})),n&&n.length>0&&t&&(0,u.jsx)(s.Z,{align:"flex-end",children:(0,u.jsx)(c.Z,{content:"Edit Answers",size:"sm",context:"secondary",onClick:function(){t&&t(n)}})}),n&&n.length>0&&(0,u.jsx)(i.Z,{})]})}},92549:function(e,n,t){t.d(n,{D:function(){return j}});var i=t(92809),o=t(42283),r=t(79665),a=t(97202),s=t(78215),c=t(2356),d=t(58448),u=t(14347),l=t(23461),m=t(19501),p=t(40140);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=function(e){var n=e.map((function(e){return f(f({},e),{},{name:"".concat(e.name,"/id=").concat(e.taxonomyId)})})),t=(0,m.Ry)().shape({}),i=(0,p.Xj)(n,{object:m.Ry,string:m.Z_});return t.concat(i)},b=t(67294),x=t(85893);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=function(e){var n=e.entity,t=e.entityId,i=e.onSuccess,m=e.questions,p=e.hasChangeStatus,y=(0,o.cI)({defaultValues:function(){var e={};return m.forEach((function(n){var t=n.comments,i=n.taxonomyId,o=n.name;e["".concat(o,"/id=").concat(i)]=t})),e}(),resolver:(0,r.S)(v(m))}),f=y.control,g=y.errors,j=y.handleSubmit,I={control:f,errors:g,register:y.register},S=function(e,o){var r=Object.keys(e).map((function(i){return{taxonomyId:parseInt(i.split("/id=")[1]),name:i.split("/id=")[0],comments:String(e[i]),entity:n,entityId:t}}));i&&i(r,o)};return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(a.Z,{id:p?"offCanvasFormQuestions":"offCanvasForm",handleSubmit:j((function(e){return S(e,"supplierQuestionsSubmitted")})),children:(0,x.jsxs)(s.Z,{children:[m.map((function(e){var i,o,r,a;return(0,x.jsx)(c.Z,{md:12,children:(0,b.createElement)(l.f,h(h({},I),{},{input:null===(i=e.meta)||void 0===i?void 0:i.input,inputType:null===(o=e.meta)||void 0===o?void 0:o.inputType,key:e.taxonomyId,label:null===(r=e.meta)||void 0===r?void 0:r.label,name:"".concat(e.name,"/id=").concat(e.taxonomyId),options:null===(a=e.meta)||void 0===a?void 0:a.options,entity:n,entityId:t,mediaMeta:{taxonomyId:e.taxonomyId}}))})})),p&&(0,x.jsx)(c.Z,{md:12,children:(0,x.jsxs)(d.Z,{align:"flex-end",children:[(0,x.jsx)(u.Z,{content:"Save",context:"success",onClick:j((function(e){return S(e,"supplierQuestionsDraft")})),size:"sm"}),(0,x.jsx)(u.Z,{content:"Submit",context:"secondary",type:"submit",size:"sm"})]})})]})})})};j.defaultProps={hasChangeStatus:!1}},72197:function(e,n,t){t.d(n,{l:function(){return f}});var i=t(92809),o=t(10219),r=t(67294),a=t(93633),s=t(33462),c=t(65375),d=t(93515),u=t(85893),l=["control","errors","label","name","register","type","filters"];function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var y=function(e,n){var t,i,o=!0;return(null===(t=e.errors[e.name])||void 0===t?void 0:t.message)!==(null===(i=n.errors[n.name])||void 0===i?void 0:i.message)&&(o=!1),["name","type"].forEach((function(t){e[t]!==n[t]&&(o=!1)})),o},f=(0,r.memo)((function(e){var n=e.control,t=e.errors,i=e.label,r=e.name,m=e.register,y=e.type,f=e.filters,v=(0,o.Z)(e,l),b={control:n,errors:t,register:m},x=function(e){var n=(0,a.a)(s.Im,{variables:p(p({isGroup:"assetCategory"===e},f),{},{orderBy:{name:"asc"},type:e})}).data,t=(n=void 0===n?{taxonomy:[]}:n).taxonomy;return"assetCategory"===e?t.map((function(e){return{label:e.name,options:e.options,childs:e.childs,meta:e.meta}})):t.map((function(e){return{label:e.name,value:e.id,childs:e.childs,meta:e.meta}}))}(y);return(0,u.jsx)(c.Z,{id:r,label:i,children:(0,u.jsx)(d.Z,p(p({},b),{},{cacheOptions:!0,isClearable:!0,options:x,name:r},v))})}),y);f.defaultProps={filters:{}}},90358:function(e,n,t){t.d(n,{t:function(){return o}});var i=t(17437),o=function(e){switch(e){case"raised":case"pending":return i.Q.COLOUR.info;case"offered":return i.Q.COLOUR.warning;case"accepted":return i.Q.COLOUR.success;case"inProgress":return i.Q.COLOUR.primary;case"completed":return"rgb(217,217,217)";case"reportSent":return"rgb(153, 153, 153)";case"invoiceSent":return i.Q.COLOUR.secondary;case"customerPaid":case"supplierPaid":return i.Q.COLOUR.help;case"closed":return i.Q.COLOUR.black;case"quoteOffered":case"quoteReceived":case"quoteNew":return"rgb(255,178, 255)";default:return i.Q.COLOUR.info}}},6608:function(e,n,t){t.d(n,{y:function(){return i}});var i=function(e){switch(e){case"ppm":return"PM";case"quote":return"Q";case"reactive":return"J";case"cppm":return"C";default:return""}}},17044:function(e,n,t){t.d(n,{O:function(){return i}});var i=[{text:"Country",value:""},{text:"United Kingdom",value:1},{text:"Ireland",value:4}]},80937:function(e,n,t){t.d(n,{x:function(){return i},O:function(){return o}});var i=[{text:"Reactive",value:"reactive"},{text:"Planned Maintenance",value:"ppm"},{text:"Quote",value:"quote"},{text:"Compliance",value:"cppm"}],o=[{text:"Reactive",value:"reactive"},{text:"Planned Maintenance",value:"ppm"}]},57626:function(e,n,t){t.d(n,{Y:function(){return i}});var i=[{text:"Select...",value:""},{text:"Call",value:"call"},{text:"Email",value:"email"},{text:"Portal",value:"portal"},{text:"Other",value:"other"}]},55148:function(e,n,t){t.d(n,{E6:function(){return o},iz:function(){return r},yW:function(){return a},cj:function(){return s},AK:function(){return c},l8:function(){return d},hD:function(){return u},g4:function(){return l}});var i=t(17437),o=[{text:"Quotation Requested",value:"supplierQuoteRequested",context:"info"},{text:"Quotation Completed",value:"supplierQuoteComplete",context:"help"},{text:"Draft Quotation",value:"supplierQuoteDraft",context:"info"},{text:"Waiting threshold approval",value:"waitingThresholdApproval",context:"info"},{text:"Quotation Refused",value:"supplierQuoteRefused",context:"danger"},{text:"Quotation Sent",value:"supplierQuoteSent",context:"success"},{text:"Quotation Accepted",value:"quotationAccepted",context:"success"},{text:"Quotation Rejected",value:"quotationRejected",context:"danger"},{text:"Quotation Updated",value:"supplierQuoteUpdated",context:"success"}],r=[{text:"New Quote",value:"quoteNew",customerText:"Quote issued",supplierText:null},{text:"Sent to Supplier(s)",value:"quoteOffered",customerText:"In progress",supplierText:"Quote offered"},{text:"Received from Supplier(s)",value:"quoteReceived",customerText:"Final review",supplierText:"Quote submitted"},{text:"Sent to Customer",value:"quoteSent",customerText:"Awaiting approval",supplierText:"Awaiting approval"},{text:"Quote Accepted",value:"quoteAccepted",customerText:"Quote accepted",supplierText:"Quote accepted"},{text:"Quote Rejected",value:"quoteRejected",customerText:"Quote rejected",supplierText:"Quote rejected"},{text:"Canceled",value:"quoteCancelled",customerText:"Cancelled",supplierText:null},{text:"Closed",value:"quoteClosed",customerText:"Closed",supplierText:"Closed"}],a=[{text:"Pending",value:"pending",colour:i.Q.COLOUR.info},{text:"Raised",value:"raised",colour:i.Q.COLOUR.info},{text:"Offered",value:"offered",colour:i.Q.COLOUR.warning},{text:"Accepted",value:"accepted",colour:i.Q.COLOUR.success},{text:"In Progress",value:"inProgress",colour:i.Q.COLOUR.primary},{text:"Completed",value:"completed",colour:"rgb(217,217,217)"},{text:"Report Sent",value:"reportSent",colour:"rgb(153, 153, 153)"},{text:"Invoice Sent",value:"invoiceSent",colour:i.Q.COLOUR.secondary},{text:"Customer Paid",value:"customerPaid",colour:i.Q.COLOUR.help},{text:"Supplier Paid",value:"supplierPaid",colour:i.Q.COLOUR.help},{text:"Quote",value:"quote",colour:"rgb(255,178, 255)"},{text:"Site Visit",value:"siteVisit",colour:"rgb(182, 79, 200)"},{text:"Canceled",value:"canceled",colour:i.Q.COLOUR.black},{text:"Closed",value:"closed",colour:i.Q.COLOUR.black},{text:"On Hold",value:"onHold",colour:i.Q.COLOUR.black},{text:"Continued",value:"continued",context:i.Q.COLOUR.primary},{text:"Paused",value:"paused",colour:i.Q.COLOUR.black}],s=[{label:"Pending",value:"pending"},{label:"Raised",value:"raised"},{label:"Offered",value:"offered"},{label:"Accepted",value:"accepted"},{label:"In Progress",value:"inProgress"},{label:"Completed",value:"completed"},{label:"Report Sent",value:"reportSent"},{label:"Invoice Sent",value:"invoiceSent"},{label:"Customer Paid",value:"customerPaid"},{label:"Supplier Paid",value:"supplierPaid"},{label:"Quote",value:"quote"},{label:"Site Visit",value:"siteVisit"},{label:"Canceled",value:"canceled"},{label:"Closed",value:"closed"},{label:"On Hold",value:"onHold"},{label:"Continued",value:"continued"},{label:"Paused",value:"paused"}],c=[{text:"Uplift Draft",value:"upliftDraft",context:"info"},{text:"Supplier Uplift Requested",value:"supplierUpliftRequested",context:"secondary"},{text:"Uplift Requested Send to Customer",value:"upliftRequestSendCustomer",context:"secondary"},{text:"Uplift Approved",value:"customerUpliftApproved",context:"success"},{text:"Uplift Rejected",value:"customerUpliftRejected",context:"danger"}],d=[{text:"Offered",value:"offered",context:"info"},{text:"Raised",value:"raised",context:"info"},{text:"Pending",value:"pending",context:"info"},{text:"Accepted",value:"accepted",context:"info"},{text:"Uplift Requested by Supplier",value:"supplierUpliftRequested",context:"info"},{text:"Uplift Draft",value:"upliftDraft",context:"info"},{text:"Uplift Requested Send Customer",value:"upliftRequestSendCustomer",context:"info"},{text:"Uplift Requested Approved",value:"customerUpliftApproved",context:"success"},{text:"In Dispute",value:"inDispute",context:"info"},{text:"Resumed",value:"resumed",context:"Danger"},{text:"Quote Sent",value:"quoteSent",context:"info"},{text:"Quote Offered",value:"quoteOffered",context:"info"},{text:"Report Sent Supplier",value:"reportSentSupplier",context:"info"},{text:"Dispute Resolved",value:"disputeResolved",context:"info"},{text:"Validated",value:"validated",context:"success"},{text:"Un Validated",value:"unvalidated",context:"success"},{text:"Paused",value:"paused",context:"info"},{text:"TimingChanged",value:"timingChanged",context:"info"},{text:"Customer Paid",value:"customerPaid",context:"info"},{text:"In Progress",value:"inProgress",context:"info"},{text:"PPM Invoice Created",value:"ppmInvoiceCreated",context:"success"},{text:"Late Arrival",value:"lateArrival",context:"info"},{text:"Pricing Changed",value:"pricingChanged",context:"info"},{text:"Report Sent",value:"reportSent",context:"info"},{text:"Invoice Sent Supplier",value:"invoiceSentSupplier",context:"info"},{text:"Invoice Sent",value:"invoiceSent",context:"info"},{text:"Invoice Sent Customer",value:"invoiceSentCustomer",context:"info"},{text:"Quote Accepted",value:"quoteAccepted",context:"info"},{text:"On Hold",value:"onHold",context:"info"},{text:"Continued",value:"continued",context:"info"},{text:"Quote Received",value:"quoteReceived",context:"info"},{text:"Quote New",value:"quoteNew",context:"info"},{text:"Closed",value:"closed",context:"danger"},{text:"Re posted",value:"reposted",context:"info"},{text:"Supplier Paid",value:"supplierPaid",context:"info"},{text:"Rejected",value:"rejected",context:"info"},{text:"Completed",value:"completed",context:"info"},{text:"Canceled",value:"canceled",context:"danger"}],u=[{value:"complete",text:"Complete"},{value:"returnVisitByAnother",text:"Return Visit By Another"},{value:"returnVisit",text:"Return Visit"},{value:"completeCertificate",text:"Complete Certificate"},{value:"couldNotDo",text:"Could Not Do"}],l=["adminSupplierQuoteThresholdApproval","adminCustomerQuoteThresholdApproval","supplierQuoteThresholdApproval","customerQuoteThresholdApproval","adminUpliftThresholdApproval","adminInvoiceThresholdApproval","customerThresholdApproval","supplierThresholdApproval","adminSupplierQuoteThresholdApproved","adminCustomerQuoteThresholdApproved","supplierQuoteThresholdApproved","customerQuoteThresholdApproved","adminUpliftThresholdApproved","adminInvoiceThresholdApproved","customerThresholdApproved","supplierThresholdApproved","adminSupplierQuoteThresholdRejected","adminCustomerQuoteThresholdRejected","supplierQuoteThresholdRejected","customerQuoteThresholdRejected","adminUpliftThresholdRejected","adminInvoiceThresholdRejected","customerThresholdRejected","supplierThresholdRejected"]}}]);