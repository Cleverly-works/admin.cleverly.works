"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8435],{26075:function(e,t,o){o.d(t,{x:function(){return i}});var n=o(67294),r=o(47591),u=o(24273);function i(){var e=n.useContext((0,u.K)()).client;return __DEV__?(0,r.kG)(e,"No Apollo Client instance can be found. Please ensure that you have called `ApolloProvider` higher up in your tree."):(0,r.kG)(e,36),e}},58448:function(e,t,o){var n,r,u=o(30168),i=o(67294),l=o(45697),a=o(24237),d=function(e){var t=e.align,o=e.children;return i.createElement(s,{align:t,"aria-label":"Toolbar with button groups",role:"toolbar"},i.createElement(c,{role:"group","aria-label":"First group"},o))};d.displayName="ButtonToolbar";var s=a.ZP.div(n||(n=(0,u.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: ",";\n"])),(function(e){return e.align})),c=a.ZP.div(r||(r=(0,u.Z)(["\n  display: inline-flex;\n  position: relative;\n  vertical-align: middle;\n\n  a:hover {\n    color: white;\n  }\n\n  &:last-child > div:last-of-type button {\n    border-top-right-radius: 0.25rem;\n    border-bottom-right-radius: 0.25rem;\n    border-right: 0;\n  }\n\n  a:not(:last-child),\n  button:not(:last-child) {\n    border-bottom-right-radius: 0;\n    border-right: 1px solid ",";\n    border-top-right-radius: 0;\n  }\n\n  a:not(:first-child),\n  button:not(:first-child),\n  a:not(:first-child) button,\n  div:not(:first-child) button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    margin-left: 0;\n  }\n\n  a:not(:last-child) button,\n  div:not(:last-child) button {\n    border-bottom-right-radius: 0;\n    border-right: 1px solid ",";\n    border-top-right-radius: 0;\n  }\n"])),(function(e){return e.theme.COLOUR.light}),(function(e){return e.theme.COLOUR.light}));d.propTypes={align:l.string,children:l.node.isRequired},d.defaultProps={align:"center"},t.Z=d},83528:function(e,t,o){var n,r,u,i=o(30168),l=o(67294),a=o(45697),d=o(24237),s=o(42778),c=o(88280),p=o(38425),v=o(82373),x=function(e){var t=e.autoFocus,o=e.className,n=e.cols,r=e.dir,u=e.disabled,i=e.errors,a=e.maxLength,d=e.name,c=e.placeholder,p=e.readOnly,v=e.register,x=e.rows,h=e.size,m=e.spellCheck,b=e.tabIndex,g=e.wrap;return l.createElement(s.Z,{autoFocus:t,className:o,cols:n,component:f,dir:r,disabled:u,errors:i[d],maxLength:a,name:d,placeholder:c,readOnly:p,register:v,rows:x,size:h,spellcheck:m,tabIndex:b,wrap:g})};x.displayName="TextareaField";var f=d.ZP.textarea(n||(n=(0,i.Z)(["\n  ","\n\n  direction: ",";\n  display: block;\n  line-height: 1.25rem;\n  ","\n\n  ","\n    padding: 0.5rem 0.725rem;\n"])),(function(e){return(0,p.Z)(e)}),(function(e){return e.dir}),(function(e){return e.errors&&(0,d.iv)(r||(r=(0,i.Z)(["\n      ","\n    "])),(function(e){return(0,c.Z)(e)}))}),(function(e){return e.size===v.Z.SM&&(0,d.iv)(u||(u=(0,i.Z)(["\n      font-size: 0.625rem;\n    "])))}));x.propTypes={autoFocus:a.bool,className:a.any,cols:a.number,dir:(0,a.oneOf)(["ltr","rtl"]),disabled:a.bool,errors:a.object.isRequired,maxLength:a.number,name:a.string.isRequired,placeholder:a.string,readOnly:a.bool,register:a.func.isRequired,rows:a.number,size:(0,a.oneOf)(Object.values(v.Z)),spellCheck:a.bool,tabIndex:a.number,wrap:(0,a.oneOf)(["soft","hard"])},x.defaultProps={autoFocus:!1,dir:"ltr",rows:5,size:"md"},t.Z=x},80680:function(e,t,o){o.r(t),o.d(t,{default:function(){return R}});var n,r=o(78215),u=o(2356),i=o(80284),l=o(92809),a=o(67294),d=o(93633),s=o(52209),c=(0,o(54397).Ps)(n||(n=(0,s.Z)(["\n  query GetTenantIssues($orderBy: Job_order_by!, $status: String, $tenantUserId: Int) {\n    issues: Job(\n      order_by: [$orderBy]\n      where: { status: { _eq: $status }, tenantUserId: { _eq: $tenantUserId } }\n    ) {\n      id\n      status\n      title\n      timingStart\n      scheduledAt\n      createdAt\n      location: Location {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      timings: JobTimings {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]))),p=o(18862),v=o(52002),x=o(34112),f=o(55148),h=o(85893);function m(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function b(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(Object(o),!0).forEach((function(t){(0,l.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var g=function(e){var t=e.filters,o=(0,a.useState)({item:"createdAt",order:"desc"}),n=o[0],r=o[1],u=(0,d.a)(c,{variables:b(b({},t),{},{orderBy:(0,l.Z)({},n.item,n.order)})}),i=u.loading,s=u.data,m=(s=void 0===s?{issues:[]}:s).issues;return(0,h.jsx)(v.Z,{columns:[{text:"ID"},{text:"Property"},{text:"Service"},{text:"Scheduled At"},{text:"Status"},{text:"Created At"}],loading:i,rows:m.map((function(e){var t,o,n=(f.yW.find((function(t){return t.value===e.status}))||{text:""}).text;(0,x.E)(e,"completed")&&(n="Completed");var r=e.scheduledAt?(0,p.Z)(e.scheduledAt,!0):(0,p.Z)(e.timingStart,!0);return{id:e.id,location:(null===(t=e.location)||void 0===t?void 0:t.name)||"-",service:(null===(o=e.service)||void 0===o?void 0:o.name)||"-",scheduledAt:r,status:n,date:(0,p.Z)(e.createdAt)}})),sort:n,setSort:r})},C=o(36178),R=function(e){var t=e.user;return(0,h.jsx)(r.Z,{children:(0,h.jsxs)(u.Z,{sm:12,md:6,children:[(0,h.jsx)(i.Z,{fitParentHeight:!0,open:!0,title:"Property Bookings",children:(0,h.jsx)(C.Q,{filters:{userId:t.id}})}),(0,h.jsx)(i.Z,{fitParentHeight:!0,open:!0,title:"Requests & Issues",children:(0,h.jsx)(g,{filters:{tenantUserId:t.id}})})]})})}},34112:function(e,t,o){o.d(t,{E:function(){return n}});var n=function(e,t){var o;if(Array.isArray(t)){var n=null;return t.forEach((function(t){var o,r=null===e||void 0===e||null===(o=e.timings)||void 0===o?void 0:o.find((function(e){return e.status===t}));n=(null===r||void 0===r?void 0:r.createdAt)||n})),n}var r=null===e||void 0===e||null===(o=e.timings)||void 0===o?void 0:o.find((function(e){return e.status===t}));return(null===r||void 0===r?void 0:r.createdAt)||null}},55148:function(e,t,o){o.d(t,{E6:function(){return r},iz:function(){return u},yW:function(){return i},cj:function(){return l},AK:function(){return a},l8:function(){return d},hD:function(){return s},g4:function(){return c}});var n=o(17437),r=[{text:"Quotation Requested",value:"supplierQuoteRequested",context:"info"},{text:"Quotation Completed",value:"supplierQuoteComplete",context:"help"},{text:"Draft Quotation",value:"supplierQuoteDraft",context:"info"},{text:"Waiting threshold approval",value:"waitingThresholdApproval",context:"info"},{text:"Quotation Refused",value:"supplierQuoteRefused",context:"danger"},{text:"Quotation Sent",value:"supplierQuoteSent",context:"success"},{text:"Quotation Accepted",value:"quotationAccepted",context:"success"},{text:"Quotation Rejected",value:"quotationRejected",context:"danger"},{text:"Quotation Updated",value:"supplierQuoteUpdated",context:"success"}],u=[{text:"New Quote",value:"quoteNew",customerText:"Quote issued",supplierText:null},{text:"Sent to Supplier(s)",value:"quoteOffered",customerText:"In progress",supplierText:"Quote offered"},{text:"Received from Supplier(s)",value:"quoteReceived",customerText:"Final review",supplierText:"Quote submitted"},{text:"Sent to Customer",value:"quoteSent",customerText:"Awaiting approval",supplierText:"Awaiting approval"},{text:"Quote Accepted",value:"quoteAccepted",customerText:"Quote accepted",supplierText:"Quote accepted"},{text:"Quote Rejected",value:"quoteRejected",customerText:"Quote rejected",supplierText:"Quote rejected"},{text:"Canceled",value:"quoteCancelled",customerText:"Cancelled",supplierText:null},{text:"Closed",value:"quoteClosed",customerText:"Closed",supplierText:"Closed"}],i=[{text:"Pending",value:"pending",colour:n.Q.COLOUR.info},{text:"Raised",value:"raised",colour:n.Q.COLOUR.info},{text:"Offered",value:"offered",colour:n.Q.COLOUR.warning},{text:"Accepted",value:"accepted",colour:n.Q.COLOUR.success},{text:"In Progress",value:"inProgress",colour:n.Q.COLOUR.primary},{text:"Completed",value:"completed",colour:"rgb(217,217,217)"},{text:"Report Sent",value:"reportSent",colour:"rgb(153, 153, 153)"},{text:"Invoice Sent",value:"invoiceSent",colour:n.Q.COLOUR.secondary},{text:"Customer Paid",value:"customerPaid",colour:n.Q.COLOUR.help},{text:"Supplier Paid",value:"supplierPaid",colour:n.Q.COLOUR.help},{text:"Quote",value:"quote",colour:"rgb(255,178, 255)"},{text:"Site Visit",value:"siteVisit",colour:"rgb(182, 79, 200)"},{text:"Canceled",value:"canceled",colour:n.Q.COLOUR.black},{text:"Closed",value:"closed",colour:n.Q.COLOUR.black},{text:"On Hold",value:"onHold",colour:n.Q.COLOUR.black},{text:"Continued",value:"continued",context:n.Q.COLOUR.primary},{text:"Paused",value:"paused",colour:n.Q.COLOUR.black}],l=[{label:"Pending",value:"pending"},{label:"Raised",value:"raised"},{label:"Offered",value:"offered"},{label:"Accepted",value:"accepted"},{label:"In Progress",value:"inProgress"},{label:"Completed",value:"completed"},{label:"Report Sent",value:"reportSent"},{label:"Invoice Sent",value:"invoiceSent"},{label:"Customer Paid",value:"customerPaid"},{label:"Supplier Paid",value:"supplierPaid"},{label:"Quote",value:"quote"},{label:"Site Visit",value:"siteVisit"},{label:"Canceled",value:"canceled"},{label:"Closed",value:"closed"},{label:"On Hold",value:"onHold"},{label:"Continued",value:"continued"},{label:"Paused",value:"paused"}],a=[{text:"Uplift Draft",value:"upliftDraft",context:"info"},{text:"Supplier Uplift Requested",value:"supplierUpliftRequested",context:"secondary"},{text:"Uplift Requested Send to Customer",value:"upliftRequestSendCustomer",context:"secondary"},{text:"Uplift Approved",value:"customerUpliftApproved",context:"success"},{text:"Uplift Rejected",value:"customerUpliftRejected",context:"danger"}],d=[{text:"Offered",value:"offered",context:"info"},{text:"Raised",value:"raised",context:"info"},{text:"Pending",value:"pending",context:"info"},{text:"Accepted",value:"accepted",context:"info"},{text:"Uplift Requested by Supplier",value:"supplierUpliftRequested",context:"info"},{text:"Uplift Draft",value:"upliftDraft",context:"info"},{text:"Uplift Requested Send Customer",value:"upliftRequestSendCustomer",context:"info"},{text:"Uplift Requested Approved",value:"customerUpliftApproved",context:"success"},{text:"In Dispute",value:"inDispute",context:"info"},{text:"Resumed",value:"resumed",context:"Danger"},{text:"Quote Sent",value:"quoteSent",context:"info"},{text:"Quote Offered",value:"quoteOffered",context:"info"},{text:"Report Sent Supplier",value:"reportSentSupplier",context:"info"},{text:"Dispute Resolved",value:"disputeResolved",context:"info"},{text:"Validated",value:"validated",context:"success"},{text:"Un Validated",value:"unvalidated",context:"success"},{text:"Paused",value:"paused",context:"info"},{text:"TimingChanged",value:"timingChanged",context:"info"},{text:"Customer Paid",value:"customerPaid",context:"info"},{text:"In Progress",value:"inProgress",context:"info"},{text:"PPM Invoice Created",value:"ppmInvoiceCreated",context:"success"},{text:"Late Arrival",value:"lateArrival",context:"info"},{text:"Pricing Changed",value:"pricingChanged",context:"info"},{text:"Report Sent",value:"reportSent",context:"info"},{text:"Invoice Sent Supplier",value:"invoiceSentSupplier",context:"info"},{text:"Invoice Sent",value:"invoiceSent",context:"info"},{text:"Invoice Sent Customer",value:"invoiceSentCustomer",context:"info"},{text:"Quote Accepted",value:"quoteAccepted",context:"info"},{text:"On Hold",value:"onHold",context:"info"},{text:"Continued",value:"continued",context:"info"},{text:"Quote Received",value:"quoteReceived",context:"info"},{text:"Quote New",value:"quoteNew",context:"info"},{text:"Closed",value:"closed",context:"danger"},{text:"Re posted",value:"reposted",context:"info"},{text:"Supplier Paid",value:"supplierPaid",context:"info"},{text:"Rejected",value:"rejected",context:"info"},{text:"Completed",value:"completed",context:"info"},{text:"Canceled",value:"canceled",context:"danger"}],s=[{value:"complete",text:"Complete"},{value:"returnVisitByAnother",text:"Return Visit By Another"},{value:"returnVisit",text:"Return Visit"},{value:"completeCertificate",text:"Complete Certificate"},{value:"couldNotDo",text:"Could Not Do"}],c=["adminSupplierQuoteThresholdApproval","adminCustomerQuoteThresholdApproval","supplierQuoteThresholdApproval","customerQuoteThresholdApproval","adminUpliftThresholdApproval","adminInvoiceThresholdApproval","customerThresholdApproval","supplierThresholdApproval","adminSupplierQuoteThresholdApproved","adminCustomerQuoteThresholdApproved","supplierQuoteThresholdApproved","customerQuoteThresholdApproved","adminUpliftThresholdApproved","adminInvoiceThresholdApproved","customerThresholdApproved","supplierThresholdApproved","adminSupplierQuoteThresholdRejected","adminCustomerQuoteThresholdRejected","supplierQuoteThresholdRejected","customerQuoteThresholdRejected","adminUpliftThresholdRejected","adminInvoiceThresholdRejected","customerThresholdRejected","supplierThresholdRejected"]}}]);