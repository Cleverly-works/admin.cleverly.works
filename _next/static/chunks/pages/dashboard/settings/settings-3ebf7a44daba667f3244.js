(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8734],{89143:function(e,t,n){"use strict";n.d(t,{r:function(){return c}});var r=n(22091).ZP.getAllTimezones(),o=Object.keys(r).map((function(e){return r[e]})),c=function(){return o.map((function(e){return{label:"".concat(e.name," ").concat(e.utcOffsetStr),value:e.name}}))}},47400:function(e,t,n){"use strict";n.d(t,{y:function(){return q}});var r,o,c=n(92809),i=n(67294),a=n(80880),u=n(91126),s=n(18862),l=n(58448),d=n(14347),f=n(80284),p=n(52002),m=n(30266),v=n(80318),h=n(64687),b=n.n(h),g=n(75709),j=n(52209),x=n(54397),y=(0,x.Ps)(r||(r=(0,j.Z)(["\n  mutation AddBankAccount($objects: [BankAccount_insert_input!]!) {\n    insert_BankAccount(objects: $objects) {\n      returning {\n        id\n        stripeId\n        accountNumber\n        routingNumber\n        bic\n        iban\n        status\n        createdAt\n      }\n    }\n  }\n"]))),Z=(0,x.Ps)(o||(o=(0,j.Z)(["\n  mutation UpdateBankAccount($id: Int!, $changes: BankAccount_set_input) {\n    update_BankAccount_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]))),O=n(42283),w=n(79665),_=n(97202),I=n(65375),P=n(71247),k=n(84550),S=n(19501),C=(0,S.Ry)().shape({bank:(0,S.Z_)().required(),accountNumber:(0,S.Z_)().required(),bic:(0,S.Z_)().required(),iban:(0,S.Z_)().required(),routingNumber:(0,S.Z_)().required()}),D=n(85893);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){var t=e.accountId,n=e.data,r=e.refetch,o=e.toggleShow,c=(0,O.cI)({defaultValues:n,resolver:(0,w.S)(C)}),i=c.errors,a=c.handleSubmit,u=c.register,s=(0,g.D)(y,{onCompleted:function(){r()}}),l=(0,v.Z)(s,1)[0],d=(0,g.D)(Z,{onCompleted:function(){r()}}),f=(0,v.Z)(d,1)[0],p=function(){var e=(0,m.Z)(b().mark((function e(r){var c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=E({},r)).stripeId="ba_42g2s45sh46jl46h",c.accountId=t,c.status="active",c.countryId=1,c.currencyId=1,c.meta={showInInvoice:Boolean(c.showInInvoice)},delete c.showInInvoice,null===n||void 0===n||!n.id){e.next=12;break}f({variables:{id:n.id,changes:c}}),e.next=14;break;case 12:return e.next=14,l({variables:{objects:[c]}});case 14:o();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={errors:i,register:u};return(0,D.jsxs)(_.Z,{id:"offCanvasForm",handleSubmit:a(p),children:[(0,D.jsx)(I.Z,{label:"Bank name",children:(0,D.jsx)(P.Z,E(E({},h),{},{name:"bank"}))}),(0,D.jsx)(I.Z,{label:"Account number",children:(0,D.jsx)(P.Z,E(E({},h),{},{name:"accountNumber"}))}),(0,D.jsx)(I.Z,{label:"Routing number",children:(0,D.jsx)(P.Z,E(E({},h),{},{name:"routingNumber"}))}),(0,D.jsx)(I.Z,{label:"BIC",children:(0,D.jsx)(P.Z,E(E({},h),{},{name:"bic"}))}),(0,D.jsx)(I.Z,{label:"IBAN",children:(0,D.jsx)(P.Z,E(E({},h),{},{name:"iban"}))}),(0,D.jsx)(k.Z,E(E({},h),{},{data:[{id:"1",label:"Show in invoice",value:"true"}],name:"showInInvoice"}))]})};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t=e.accountId,n=e.data,r=e.edit,o=e.refetch,c=(0,i.useContext)(a.Z),m=[{hidden:!0},{text:"Bank"},{text:"Account number"},{text:"Routing"},{text:"BIC"},{text:"IBAN"},{text:"Stripe ID",hidden:!0},{text:"Date Added"},{formatter:function(e){return!0===e.row.showInInvoice?"True":"False"},text:"Show In Invoice"},{formatter:u.Z,formatterData:[{context:"secondary",icon:["fas","edit"],onClick:function(e,t){return h(e,t)},tooltip:"Edit"}],text:"Actions"}],v=function(e){e.stopPropagation(),c.show({content:(0,D.jsx)(A,{accountId:t,refetch:o,toggleShow:c.close}),title:"Add Bank Account"})},h=function(e,n){e.stopPropagation(),c.show({content:(0,D.jsx)(A,{accountId:t,data:$({},n)||{},refetch:o,toggleShow:c.close}),title:"Add Bank Account"})},b=function(){return(0,D.jsx)(l.Z,{children:(0,D.jsx)(d.Z,{context:"secondary",content:"Add",onClick:v,size:"sm"})})};return(0,D.jsx)(f.Z,{open:!0,title:"Bank Accounts",toolbar:r&&(0,D.jsx)(b,{}),children:(0,D.jsx)(p.Z,{columns:m,rows:n.map((function(e){return function(e){var t,n;return{id:e.id,bank:null===e||void 0===e?void 0:e.bank,accountNumber:null===e||void 0===e?void 0:e.accountNumber,routingNumber:null===e||void 0===e?void 0:e.routingNumber,bic:null===e||void 0===e?void 0:e.bic,iban:null===e||void 0===e?void 0:e.iban,stripeId:e.stripeId,date:(0,s.Z)(e.createdAt),showInInvoice:!(null===(t=e.meta)||void 0===t||!t.showInInvoice)&&(null===(n=e.meta)||void 0===n?void 0:n.showInInvoice),actions:""}}(e)}))})})};q.defaultProps={data:[],edit:!0}},93710:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var r=function(){return[{id:1,name:"Normal",from:"08:00",to:"18:00"},{id:2,name:"OOH",from:"18:00",to:"22:00"},{id:3,name:"Premium",from:"22:00",to:"08:00"}]}},33872:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return qn}});var r,o,c,i=n(66918),a=n(67294),u=n(93633),s=n(52209),l=n(54397),d=(0,l.Ps)(r||(r=(0,s.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),f=(0,l.Ps)(o||(o=(0,s.Z)(["\n  query GetFinanceSetting($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      addresses: Addresses {\n        id\n        registered\n        operating\n        trading\n        invoice\n        status\n        createdAt\n        address: Address {\n          id\n          name\n          addressLine1\n          addressLine2\n          addressLine3\n          city\n          county\n          geo\n          postCode\n          country: Country {\n            id\n            name\n          }\n        }\n      }\n      id\n      bankAccounts: BankAccounts {\n        id\n        bank\n        stripeId\n        accountNumber\n        routingNumber\n        bic\n        iban\n        status\n        default\n        createdAt\n        meta\n      }\n      meta\n    }\n  }\n"]))),p=n(42593),m=n(80880),v=n(43566),h=n(58448),b=n(14347),g=n(78215),j=n(2356),x=n(80284),y=n(66639),Z=n(7755),O=n(47400),w=n(70448),_=n(24237),I=n(47357),P=n(18944),k=n(8675),S=n(21899),C=n(9638),D=n(92809),N=n(80318),E=n(97202),A=n(65375),T=n(71247),$=n(75709),q=(0,l.Ps)(c||(c=(0,s.Z)(["\n  mutation SetSageUrl($accountId: Int!, $meta: jsonb!) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: { meta: $meta }) {\n      id\n    }\n  }\n"]))),R=n(42283),z=n(79665),M=n(19501),L=n(85893);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e){var t,n=e.account,r=e.onSuccess,o=(0,a.useState)(""),c=o[0],i=o[1],u=(0,R.cI)({defaultValues:{url:null===(t=n.meta)||void 0===t?void 0:t.sageUrl},resolver:(0,z.S)((0,M.Ry)().shape({url:(0,M.Z_)().url().required()}))}),s=u.control,l=u.errors,d=u.handleSubmit,f={control:s,errors:l,register:u.register},p=(0,$.D)(q,{onCompleted:r,onError:function(e){i(e.message)}}),m=(0,N.Z)(p,1)[0];return(0,L.jsxs)(E.Z,{handleSubmit:d((function(e){var t=e.url,r=B({},n.meta)||{};r.sageUrl=t||"",m({variables:{accountId:n.id,meta:r}})})),children:[(0,L.jsx)(A.Z,{label:"Sage Url",children:(0,L.jsx)(T.Z,B(B({},f),{},{name:"url"}))}),(0,L.jsx)(P.Z,{context:"danger",children:c})]})},V=function(e){var t=e.account,n=e.refetch,r=function(){o.close(),n()},o=(0,a.useContext)(m.Z);return(0,L.jsx)(b.Z,{context:"secondary",content:"Settings",onClick:function(e){o.show({content:(0,L.jsx)(F,{account:t,onSuccess:r}),submit:!0,title:"Sage Middleware URL"})},size:"sm"})},U=n(30266),Q=n(64687),G=n.n(Q),J=n(11163),X=n(27834);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(e){var t=e.credentials,n=t.id,r=t.type,o=e.isLoggedIn,c=e.meta,i=e.refetch,u=(0,J.useRouter)().query,s="0C5758676FFE48D9B5212C0D045D0871",l=(0,$.D)(X.$E,{onCompleted:i}),d=(0,N.Z)(l,1)[0],f=(0,$.D)(X.uz,{onCompleted:i}),p=(0,N.Z)(f,1)[0];(0,a.useEffect)((function(){(function(){var e=(0,U.Z)(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.code){e.next=2;break}return e.abrupt("return");case 2:t=Y(Y({},c),{},{integration:Y(Y({},c.integration),{},{xero:{user_id:s,access_token:u.code}})}),e.t0=r,e.next="admin"===e.t0?6:"user"===e.t0?9:12;break;case 6:return e.next=8,d({variables:{accountId:n,set:{meta:t}}});case 8:return e.abrupt("break",13);case 9:return e.next=11,p({variables:{userId:n,meta:t}});case 11:return e.abrupt("break",13);case 12:console.info("you need to provide account type");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u.code]);var m=function(){var e=(0,U.Z)(G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.xero&&c.xero.access_token){e.next=5;break}return t=["openid","profile","email","accounting.transactions","offline_access"].join(" "),n=window.location.href,e.next=5,window.location.replace("https://login.xero.com/identity/connect/authorize?response_type=code&client_id=".concat(s,"&redirect_uri=").concat(n,"&scope=").concat(encodeURIComponent(t)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,U.Z)(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Y(Y({},c),{},{integration:Y(Y({},c.integration),{},{xero:{user_id:s,access_token:null}})}),e.t0=r,e.next="admin"===e.t0?4:"user"===e.t0?7:10;break;case 4:return e.next=6,d({variables:{accountId:n,set:{meta:t}}});case 6:return e.abrupt("break",11);case 7:return e.next=9,p({variables:{userId:n,meta:t}});case 9:return e.abrupt("break",11);case 10:console.info("you need to provide account type");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o?(0,L.jsx)(b.Z,{context:"secondary",content:"Sign Out",onClick:v,size:"sm"}):(0,L.jsx)(b.Z,{context:"secondary",content:"Sign In",onClick:m,size:"sm"})},ee=n(45697);function te(e){var t,n,r,o,c,i,a,s,l,d=(0,u.a)(X.nE,{variables:{id:e}}),f=d.loading,p=d.data,m=d.refetch,v=null===p||void 0===p||null===(t=p.account)||void 0===t?void 0:t.meta,h={google:[],microsoft:[],xero:{user_id:null,access_token:null},sage:!1};f||(h={google:(null===v||void 0===v||null===(n=v.integration)||void 0===n||null===(r=n.google)||void 0===r?void 0:r.length)>0&&Object.values(null===v||void 0===v||null===(o=v.integration)||void 0===o?void 0:o.google)||[],microsoft:(null===v||void 0===v||null===(c=v.integration)||void 0===c||null===(i=c.microsoft)||void 0===i?void 0:i.length)>0&&Object.values(null===v||void 0===v||null===(a=v.integration)||void 0===a?void 0:a.microsoft)||[],xero:(null===v||void 0===v||null===(s=v.integration)||void 0===s?void 0:s.xero)||{user_id:null,access_token:null},sage:!!(null!==v&&void 0!==v&&null!==(l=v.modules)&&void 0!==l&&l.sageIntegration&&v.modules.sageIntegration.length>0)});return{loading:f,integration:h,refetch:m}}te.propTypes={accountId:ee.number.isRequired};var ne,re=function(e){var t=e.account,n=te(t.id),r=n.integration,o=n.refetch;return(0,L.jsxs)(x.Z,{fitParentHeight:!0,open:!0,title:"Integrations",children:[(0,L.jsxs)(g.Z,{align:"center",children:[(0,L.jsx)(j.Z,{md:2,children:(0,L.jsx)(I.Z,{alt:"Microsoft Outlook",src:"/static/logo/Microsoft_Outlook-Logo.svg"})}),(0,L.jsxs)(j.Z,{md:6,children:[(0,L.jsx)(P.Z,{content:"Microsoft Outlook"}),(0,L.jsx)(P.Z,{content:"Add new account integrate with your corporate Outlook mail",size:"sm"})]}),(0,L.jsx)(j.Z,{md:4,children:(0,L.jsx)(S.e,{credentials:{id:t.id,type:"admin"},isLoggedIn:!1,refetch:o})})]}),(0,L.jsxs)(g.Z,{align:"center",children:[(0,L.jsx)(j.Z,{md:2,children:(0,L.jsx)(I.Z,{alt:"Gmail",src:"/static/logo/Gmail-logo.svg"})}),(0,L.jsxs)(j.Z,{md:6,children:[(0,L.jsx)(P.Z,{content:"Gmail"}),(0,L.jsx)(P.Z,{content:"Add new account integrate with your corporate Gmail ",size:"sm"})]}),(0,L.jsx)(j.Z,{md:4,children:(0,L.jsx)(C.i,{credentials:{id:t.id,type:"admin"},isLoggedIn:!1,refetch:o,meta:t.meta})})]}),(0,L.jsxs)(g.Z,{align:"center",children:[(0,L.jsx)(j.Z,{md:2,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,L.jsx)(I.Z,{style:{width:"50%",height:"50%"},alt:"Xero",src:"/static/logo/xero-logo.png"})}),(0,L.jsxs)(j.Z,{md:6,children:[(0,L.jsx)(P.Z,{content:"Xero"}),(0,L.jsx)(P.Z,{content:"Add new account integrate with your corporate Xero ",size:"sm"})]}),(0,L.jsx)(j.Z,{md:4,children:(0,L.jsx)(W,{credentials:{id:t.id,type:"admin"},isLoggedIn:!!r.xero.access_token,refetch:o,meta:t.meta})})]}),r.microsoft.map((function(e){var n=e.profile,r=n.name,c=n.email,i=n.picture;return(0,L.jsxs)(oe,{align:"center",children:[(0,L.jsx)(j.Z,{md:2,style:{display:"flex",justifyContent:"center"},children:i?(0,L.jsx)(k.Z,{context:"primary",size:"sm",src:i}):(0,L.jsx)(k.Z,{context:"primary",size:"sm",content:r})}),(0,L.jsxs)(j.Z,{md:6,children:[(0,L.jsx)(P.Z,{content:c}),(0,L.jsx)(P.Z,{content:r,size:"sm"})]}),(0,L.jsx)(j.Z,{md:4,children:(0,L.jsx)(S.e,{credentials:{id:t.id,type:"admin"},isLoggedIn:!0,refetch:o,email:c})})]})})),r.google.map((function(e){var n=e.profile,r=n.name,c=n.email,i=n.picture;return(0,L.jsxs)(oe,{children:[(0,L.jsx)(j.Z,{md:2,style:{display:"flex",justifyContent:"center"},children:i?(0,L.jsx)(k.Z,{context:"primary",size:"sm",src:i}):(0,L.jsx)(k.Z,{context:"primary",size:"sm",content:r})}),(0,L.jsxs)(j.Z,{md:6,children:[(0,L.jsx)(P.Z,{content:c}),(0,L.jsx)(P.Z,{content:r,size:"sm"})]}),(0,L.jsx)(j.Z,{md:4,children:(0,L.jsx)(C.i,{credentials:{id:t.id,type:"admin"},isLoggedIn:!0,refetch:o,meta:t.meta,email:c})})]})})),r.sage&&(0,L.jsxs)(g.Z,{align:"center",children:[(0,L.jsx)(j.Z,{md:2,children:(0,L.jsx)(I.Z,{alt:"Sage",src:"/static/logo/Sage-Logo.svg"})}),(0,L.jsxs)(j.Z,{md:6,children:[(0,L.jsx)(P.Z,{content:"Sage"}),(0,L.jsx)(P.Z,{content:"Set your sage-middle ware URL",size:"sm"})]}),(0,L.jsx)(j.Z,{md:4,children:(0,L.jsx)(V,{account:t,refetch:o})})]})]})},oe=(0,_.ZP)(g.Z).withConfig({displayName:"admin__StyledRowList",componentId:"sc-741lta-0"})(["margin-bottom:7px;"]),ce=(0,l.Ps)(ne||(ne=(0,s.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),ie=n(91126),ae=n(73165),ue=n(52002),se=(0,M.Ry)().shape({from:(0,M.Z_)().required().matches("^([0-1][0-9]|[2][0-3]):([0-5][0-9])$"),to:(0,M.Z_)().required().matches("^([0-1][0-9]|[2][0-3]):([0-5][0-9])$")});function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=function(e){e.accountId;var t=e.defaultValues,n=e.onSubmit,r=(e.refetch,(0,R.cI)({defaultValues:de({},t),resolver:(0,z.S)(se)})),o=r.control,c=r.errors,i=r.handleSubmit,a=r.register,u=function(){var e=(0,U.Z)(G().mark((function e(r){var o,c;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.id,c=de({id:o},r)||{},n(c);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s={control:o,errors:c,register:a};return(0,L.jsxs)(E.Z,{id:"offCanvasForm",handleSubmit:i(u),children:[(0,L.jsx)(A.Z,{label:"Name",children:(0,L.jsx)(T.Z,de(de({},s),{},{name:"name",readOnly:!0}))}),(0,L.jsx)(A.Z,{label:"From",children:(0,L.jsx)(T.Z,de(de({},s),{},{name:"from"}))}),(0,L.jsx)(A.Z,{label:"To",children:(0,L.jsx)(T.Z,de(de({},s),{},{name:"to"}))})]})},pe=n(93710);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he,be=function(e){var t,n=e.accountId,r=e.meta,o=e.refetch,c=(0,a.useContext)(m.Z),i=(null===r||void 0===r?void 0:r.timeSegment)||(0,pe.g)(),u=(0,$.D)(ce,{onCompleted:function(){o&&o(),c.close()}}),s=(0,N.Z)(u,1)[0],l=function(e){var t={};t.meta=ve({},r)||{};var o=i.map((function(t){return t.id===e.id?e:ve({},t)}));t.meta.timeSegment=o,s({variables:{accountId:n,account:t}})},d=[{hidden:!0},{text:"Name"},{text:"From"},{text:"To"},{formatter:ie.Z,formatterData:(t={editClick:function(e,t){return function(e){var t=ve({},e)||{};c.show({content:(0,L.jsx)(fe,{accountId:n,defaultValues:t,onSubmit:l,refetch:o}),title:"Edit Time Segment"})}(t)}},[{context:"secondary",icon:["fas","edit"],onClick:t.editClick,tooltip:"Edit"}]),text:"Actions"}];return(0,L.jsx)(x.Z,{open:!0,title:"Time Segments",children:(0,L.jsx)(ue.Z,{columns:d,rows:i.map((function(e){return{id:e.id,name:(0,ae.Z)(e.name),from:e.from,to:e.to,actions:""}}))})})},ge=n(93443),je=n(11570),xe=(0,l.Ps)(he||(he=(0,s.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),ye=n(93515),Ze=n(89143),Oe=(0,M.Ry)().shape({timeZone:(0,M.Ry)().shape({label:(0,M.Z_)().required(),value:(0,M.Z_)().required()})});function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie,Pe,ke=function(e){var t,n=e.account,r=e.onSubmit,o=null===n||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.timeZone,c={};c.timeZone=o||{value:"Europe/London",label:"Europe/London +00:00"};var i=(0,R.cI)({defaultValues:c,resolver:(0,z.S)(Oe)}),a=i.control,u=i.errors,s=i.handleSubmit,l=i.register,d=(0,$.D)(xe,{onCompleted:function(e){r()}}),f=(0,N.Z)(d,1)[0],p=function(){var e=(0,U.Z)(G().mark((function e(t){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=_e({},n.meta)||{}).timeZone=_e({},t.timeZone),f({variables:{accountId:n.id,account:{meta:r}}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m={control:a,errors:u,register:l};return(0,L.jsx)(E.Z,{id:"offCanvasForm",handleSubmit:s(p),children:(0,L.jsx)(ye.Z,_e(_e({options:(0,Ze.r)()},m),{},{name:"timeZone"}))})},Se=function(e){var t,n,r=e.account,o=e.refetch,c=(0,a.useContext)(m.Z),i=null===r||void 0===r||null===(t=r.meta)||void 0===t||null===(n=t.timeZone)||void 0===n?void 0:n.label,u=function(e){c.close(),o()},s=function(e){e.stopPropagation(),c.show({content:(0,L.jsx)(ke,{account:r,onSubmit:u}),title:"Set Time Zone"})},l=function(){return(0,L.jsx)(h.Z,{children:(0,L.jsx)(b.Z,{context:"secondary",content:i?"Edit":"Add",onClick:s,size:"sm"})})};return(0,L.jsxs)(x.Z,{open:!0,toolbar:(0,L.jsx)(l,{}),title:"Set Time Zone",children:[i&&(0,L.jsx)(ge.Z,{content:"Time Zone:",text:i}),!i&&(0,L.jsx)(je.Z,{content:"You should set your time zone"})]})},Ce=(0,l.Ps)(Ie||(Ie=(0,s.Z)(['\n  query GetInvoiceStart($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      id\n      meta\n      media: Media(\n        where: { entity: { _eq: "Account" }, Medium: { category: { _eq: "invoiceLogo" } } }\n        limit: 1\n        order_by: { createdAt: desc }\n      ) {\n        id\n        item: Medium {\n          id\n          filename\n        }\n      }\n    }\n  }\n']))),De=(0,l.Ps)(Pe||(Pe=(0,s.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),Ne=n(77417),Ee=n(22796),Ae=n(26933),Te=(0,M.Ry)().shape({invoiceStart:(0,M.Rx)().when("checkInvoiceStart",{is:!0,then:(0,M.Rx)().required()}),contactPhoneNumber:(0,M.Z_)().required(),invoiceDueDate:(0,M.Rx)().required()});function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=function(e){var t,n,r=e.account,o=e.accountId,c=e.refetch,i=(0,a.useContext)(m.Z),u=(0,R.cI)({defaultValues:r.meta.finance,resolver:(0,z.S)(Te)}),s=u.errors,l=u.handleSubmit,d=u.register,f=u.setValue,p=!(null===(t=r.meta)||void 0===t||null===(n=t.finance)||void 0===n||!n.invoiceStart);p&&f("checkInvoiceStart",!1);var v=(0,$.D)(De,{onCompleted:function(e){c(),i.close()}}),h=(0,N.Z)(v,1)[0],b={errors:s,register:d};return(0,L.jsxs)(E.Z,{id:"offCanvasForm",handleSubmit:l((function(e){var t=qe({},r.meta)||{};delete e.checkInvoiceStart,t.finance=qe(qe({},t.finance),e),h({variables:{accountId:o,account:{meta:t}}})})),children:[(0,L.jsx)(T.Z,qe(qe({},b),{},{name:"checkInvoiceStart",value:!0,type:"hidden"})),!p&&(0,L.jsx)(A.Z,{label:"Invoice Start #",children:(0,L.jsx)(T.Z,qe(qe({},b),{},{name:"invoiceStart"}))}),(0,L.jsx)(A.Z,{label:"Contact Phone Number",children:(0,L.jsx)(T.Z,qe(qe({},b),{},{name:"contactPhoneNumber"}))}),(0,L.jsx)(A.Z,{label:"Invoice Due Date",children:(0,L.jsx)(T.Z,qe(qe({},b),{},{name:"invoiceDueDate"}))})]})},ze=function(){var e,t,n,r,o,c,i=(0,a.useContext)(m.Z),s=(0,a.useContext)(v.Z).user,l=(0,u.a)(Ce,{skip:!s.accountId,variables:{id:s.accountId}}),d=l.data,f=(d=void 0===d?{account:[]}:d).account,p=l.loading,h=l.refetch,g=null===(e=f.meta)||void 0===e||null===(t=e.finance)||void 0===t?void 0:t.invoiceStart,j=null===(n=f.meta)||void 0===n||null===(r=n.finance)||void 0===r?void 0:r.contactPhoneNumber,y=null===(o=f.meta)||void 0===o||null===(c=o.finance)||void 0===c?void 0:c.invoiceDueDate,Z=function(e){e.stopPropagation(),i.show({content:(0,L.jsx)(Re,{accountId:s.accountId,account:f,refetch:h}),title:"Invoice Settings"})},O=function(e){h(),i.close()},w=function(){return(0,L.jsx)(b.Z,{content:"Edit",context:"secondary",onClick:Z,size:"sm"})};return!p&&(0,L.jsxs)(x.Z,{fitParentHeight:!0,open:!0,title:"Invoice Settings",toolbar:(0,L.jsx)(w,{}),children:[g&&(0,L.jsx)(je.Z,{context:"success",content:"An invoice start has already been locked in so cannot be edited"}),(0,L.jsx)(ge.Z,{content:"Invoice start #",text:g||"-"}),(0,L.jsx)(ge.Z,{content:"Contact Phone Number",text:j||"-"}),(0,L.jsx)(ge.Z,{content:"Invoice Due Date",text:y||"-"}),(0,L.jsx)(Ne.Z,{}),(0,L.jsx)(P.Z,{children:"Invoice logo"}),f.media&&f.media[0]&&(0,L.jsx)(I.Z,{alt:"Invoice logo",src:"".concat("https://d1hk88326p7ilp.cloudfront.net","/").concat(f.media[0].item.filename),width:200}),(0,L.jsx)(Ee.Z,{marginTop:"sm"}),(0,L.jsx)(b.Z,{context:"secondary",content:"Manage logo",onClick:function(){i.show({content:(0,L.jsx)(Ae.z,{accept:"image/*",category:"invoiceLogo",entity:"Account",entityId:s.accountId,expiryShow:!1,onSuccess:O,type:"image"}),title:"Invoice logo"})},size:"sm"})]})},Me=(0,M.Ry)().shape({contactEmail:(0,M.Z_)().email().required(),replyToEmail:(0,M.Z_)().email().required(),replyToName:(0,M.Z_)().required(),contactAddress:(0,M.Z_)().required()});function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be,Fe,Ve=function(e){var t,n=e.account,r=e.accountId,o=e.handleSuccess,c=null===n||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.emailSettings,i=(0,R.cI)({defaultValues:He({},c),resolver:(0,z.S)(Me)}),a=i.control,u=i.errors,s=i.handleSubmit,l={control:a,errors:u,register:i.register},f=(0,$.D)(d,{onCompleted:function(){o()}}),p=(0,N.Z)(f,1)[0],m=function(){var e=(0,U.Z)(G().mark((function e(t){var o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=He({},n.meta)||{}).emailSettings=He({},t),p({variables:{accountId:r,account:{meta:o}}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,L.jsxs)(E.Z,{id:"offCanvasForm",handleSubmit:s(m),children:[(0,L.jsx)(A.Z,{label:"Contact Email",children:(0,L.jsx)(T.Z,He(He({},l),{},{name:"contactEmail"}))}),(0,L.jsx)(A.Z,{label:"Reply To Email",children:(0,L.jsx)(T.Z,He(He({},l),{},{name:"replyToEmail"}))}),(0,L.jsx)(A.Z,{label:"Reply To Name",children:(0,L.jsx)(T.Z,He(He({},l),{},{name:"replyToName"}))}),(0,L.jsx)(A.Z,{label:"Contact Address",children:(0,L.jsx)(T.Z,He(He({},l),{},{name:"contactAddress"}))})]})},Ue=function(e){var t,n,r,o,c,i=e.account,u=e.accountId,s=e.refetch,l=null===i||void 0===i||null===(t=i.meta)||void 0===t?void 0:t.emailSettings,d=(0,a.useContext)(m.Z),f=function(e){e.stopPropagation(),d.show({content:(0,L.jsx)(Ve,{account:i,accountId:u,handleSuccess:p}),title:"Email Settings"})},p=function(e){s(),d.close()},v=function(){return(0,L.jsx)(b.Z,{content:"Edit",context:"secondary",onClick:f,size:"sm"})};return(0,L.jsxs)(x.Z,{fitParentHeight:!0,open:!0,title:"Email Settings",toolbar:(0,L.jsx)(v,{}),children:[(0,L.jsx)(ge.Z,{content:"Contact Email",text:null!==(n=null===l||void 0===l?void 0:l.contactEmail)&&void 0!==n?n:"-"}),(0,L.jsx)(ge.Z,{content:"Reply To Email",text:null!==(r=null===l||void 0===l?void 0:l.replyToEmail)&&void 0!==r?r:"-"}),(0,L.jsx)(ge.Z,{content:"Reply To Name",text:null!==(o=null===l||void 0===l?void 0:l.replyToName)&&void 0!==o?o:"-"}),(0,L.jsx)(ge.Z,{content:"Contact Address",text:null!==(c=null===l||void 0===l?void 0:l.contactAddress)&&void 0!==c?c:"-"})]})},Qe=(0,l.Ps)(Be||(Be=(0,s.Z)(['\n  query GetInvoiceStart($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      id\n      meta\n      media: Media(\n        where: {\n          entity: { _eq: "Account" }\n          Medium: { category: { _in: ["themeLogo", "themeFavicon"] } }\n        }\n        order_by: { createdAt: desc }\n      ) {\n        id\n        item: Medium {\n          id\n          filename\n          category\n        }\n      }\n    }\n  }\n']))),Ge=(0,l.Ps)(Fe||(Fe=(0,s.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n      meta\n    }\n  }\n"]))),Je=n(78586),Xe=n(50935),Ke=n(52962),Ye=[{title:"Navbar",value:"NAVBAR",items:[{title:"Background",value:"background"},{title:"Top border",value:"borderTopColor"},{title:"Active colour",value:"colourActive"},{title:"Caret hover colour",value:"caretColourHover"},{title:"Dropdown active",value:"dropdownActive"},{title:"Dropdown background",value:"dropdownBackground"},{title:"Dropdown hover background",value:"dropdownBackgroundHover"},{title:"Dropdown colour",value:"dropdownColour"},{title:"Dropdown hover colour",value:"dropdownColourHover"},{title:"Overlay background",value:"backgroundOverlay"},{title:"Toggler",value:"colourToggler"},{title:"Link color",value:"colourDefault"},{title:"Desktop link color",value:"colourDefaultDesktop"},{title:"List item background",value:"backgroundHoverListItem"}]}],We=_.ZP.div.withConfig({displayName:"helpers__StyledField",componentId:"sc-1w9z8m8-0"})(["align-items:center;display:flex;margin-top:3px;margin-bottom:5px;"]),et=_.ZP.div.withConfig({displayName:"helpers__StyledColour",componentId:"sc-1w9z8m8-1"})(["background-color:",";border:1px solid #ddd;height:1rem;margin-right:0.25rem;width:1rem;"],(function(e){return e.color})),tt=n(1323),nt=n(83789),rt=n(82492),ot=n.n(rt);function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function it(e,t){if(null==e)return{};var n,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)t.indexOf(n=c[r])>=0||(o[n]=e[n]);return o}function at(e){var t=(0,a.useRef)(e),n=(0,a.useRef)((function(e){t.current&&t.current(e)}));return t.current=e,n.current}var ut=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},st=function(e){return"touches"in e},lt=function(e){return e&&e.ownerDocument.defaultView||self},dt=function(e,t,n){var r=e.getBoundingClientRect(),o=st(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:ut((o.pageX-(r.left+lt(e).pageXOffset))/r.width),top:ut((o.pageY-(r.top+lt(e).pageYOffset))/r.height)}},ft=function(e){!st(e)&&e.preventDefault()},pt=a.memo((function(e){var t=e.onMove,n=e.onKey,r=it(e,["onMove","onKey"]),o=(0,a.useRef)(null),c=at(t),i=at(n),u=(0,a.useRef)(null),s=(0,a.useRef)(!1),l=(0,a.useMemo)((function(){var e=function(e){ft(e),(st(e)?e.touches.length>0:e.buttons>0)&&o.current?c(dt(o.current,e,u.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=s.current,c=lt(o.current),i=n?c.addEventListener:c.removeEventListener;i(r?"touchmove":"mousemove",e),i(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=o.current;if(r&&(ft(t),!function(e,t){return t&&!st(e)}(t,s.current)&&r)){if(st(t)){s.current=!0;var i=t.changedTouches||[];i.length&&(u.current=i[0].identifier)}r.focus(),c(dt(r,t,u.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),i({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[i,c]),d=l[0],f=l[1],p=l[2];return(0,a.useEffect)((function(){return p}),[p]),a.createElement("div",ct({},r,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:o,onKeyDown:f,tabIndex:0,role:"slider"}))})),mt=function(e){return e.filter(Boolean).join(" ")},vt=function(e){var t=e.color,n=e.left,r=e.top,o=void 0===r?.5:r,c=mt(["react-colorful__pointer",e.className]);return a.createElement("div",{className:c,style:{top:100*o+"%",left:100*n+"%"}},a.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},ht=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},bt=(Math.PI,function(e){return"#"===e[0]&&(e=e.substr(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1}:{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:1}}),gt=function(e){var t=e.s,n=e.v,r=e.a,o=(200-t)*n/100;return{h:ht(e.h),s:ht(o>0&&o<200?t*n/100/(o<=100?o:200-o)*100:0),l:ht(o/2),a:ht(r,2)}},jt=function(e){var t=gt(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},xt=function(e){var t=e.h,n=e.s,r=e.v,o=e.a;t=t/360*6,n/=100,r/=100;var c=Math.floor(t),i=r*(1-n),a=r*(1-(t-c)*n),u=r*(1-(1-t+c)*n),s=c%6;return{r:ht(255*[r,a,i,i,u,r][s]),g:ht(255*[u,r,r,a,i,i][s]),b:ht(255*[i,i,u,r,r,a][s]),a:ht(o,2)}},yt=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Zt=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,c=Math.max(t,n,r),i=c-Math.min(t,n,r),a=i?c===t?(n-r)/i:c===n?2+(r-t)/i:4+(t-n)/i:0;return{h:ht(60*(a<0?a+6:a)),s:ht(c?i/c*100:0),v:ht(c/255*100),a:o}},Ot=a.memo((function(e){var t=e.hue,n=e.onChange,r=mt(["react-colorful__hue",e.className]);return a.createElement("div",{className:r},a.createElement(pt,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:ut(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":ht(t)},a.createElement(vt,{className:"react-colorful__hue-pointer",left:t/360,color:jt({h:t,s:100,v:100,a:1})})))})),wt=a.memo((function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:jt({h:t.h,s:100,v:100,a:1})};return a.createElement("div",{className:"react-colorful__saturation",style:r},a.createElement(pt,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:ut(t.s+100*e.left,0,100),v:ut(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ht(t.s)+"%, Brightness "+ht(t.v)+"%"},a.createElement(vt,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:jt(t)})))})),_t=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function It(e,t,n){var r=at(n),o=(0,a.useState)((function(){return e.toHsva(t)})),c=o[0],i=o[1],u=(0,a.useRef)({color:t,hsva:c});(0,a.useEffect)((function(){if(!e.equal(t,u.current.color)){var n=e.toHsva(t);u.current={hsva:n,color:t},i(n)}}),[t,e]),(0,a.useEffect)((function(){var t;_t(c,u.current.hsva)||e.equal(t=e.fromHsva(c),u.current.color)||(u.current={hsva:c,color:t},r(t))}),[c,e,r]);var s=(0,a.useCallback)((function(e){i((function(t){return Object.assign({},t,e)}))}),[]);return[c,s]}var Pt,kt="undefined"!=typeof window?a.useLayoutEffect:a.useEffect,St=new Map,Ct=function(e){kt((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!St.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',St.set(t,r);var o=Pt||n.nc;o&&r.setAttribute("nonce",o),t.head.appendChild(r)}}),[])},Dt=function(e){var t=e.className,n=e.colorModel,r=e.color,o=void 0===r?n.defaultColor:r,c=e.onChange,i=it(e,["className","colorModel","color","onChange"]),u=(0,a.useRef)(null);Ct(u);var s=It(n,o,c),l=s[0],d=s[1],f=mt(["react-colorful",t]);return a.createElement("div",ct({},i,{ref:u,className:f}),a.createElement(wt,{hsva:l,onChange:d}),a.createElement(Ot,{hue:l.h,onChange:d,className:"react-colorful__last-control"}))},Nt={defaultColor:"000",toHsva:function(e){return Zt(bt(e))},fromHsva:function(e){return n=(t=xt(e)).g,r=t.b,"#"+yt(t.r)+yt(n)+yt(r);var t,n,r},equal:function(e,t){return e.toLowerCase()===t.toLowerCase()||_t(bt(e),bt(t))}},Et=function(e){return a.createElement(Dt,ct({},e,{colorModel:Nt}))},At={grad:.9,turn:360,rad:360/(2*Math.PI)},Tt=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},$t=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},qt=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},Rt=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},zt=function(e){return{r:qt(e.r,0,255),g:qt(e.g,0,255),b:qt(e.b,0,255),a:qt(e.a)}},Mt=function(e){return{r:$t(e.r),g:$t(e.g),b:$t(e.b),a:$t(e.a,3)}},Lt=/^#([0-9a-f]{3,8})$/i,Ht=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Bt=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,c=Math.max(t,n,r),i=c-Math.min(t,n,r),a=i?c===t?(n-r)/i:c===n?2+(r-t)/i:4+(t-n)/i:0;return{h:60*(a<0?a+6:a),s:c?i/c*100:0,v:c/255*100,a:o}},Ft=function(e){var t=e.h,n=e.s,r=e.v,o=e.a;t=t/360*6,n/=100,r/=100;var c=Math.floor(t),i=r*(1-n),a=r*(1-(t-c)*n),u=r*(1-(1-t+c)*n),s=c%6;return{r:255*[r,a,i,i,u,r][s],g:255*[u,r,r,a,i,i][s],b:255*[i,i,u,r,r,a][s],a:o}},Vt=function(e){return{h:Rt(e.h),s:qt(e.s,0,100),l:qt(e.l,0,100),a:qt(e.a)}},Ut=function(e){return{h:$t(e.h),s:$t(e.s),l:$t(e.l),a:$t(e.a,3)}},Qt=function(e){return Ft((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},Gt=function(e){return{h:(t=Bt(e)).h,s:(o=(200-(n=t.s))*(r=t.v)/100)>0&&o<200?n*r/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,n,r,o},Jt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Xt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Kt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wt={string:[[function(e){var t=Lt.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?$t(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?$t(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Kt.exec(e)||Yt.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:zt({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Jt.exec(e)||Xt.exec(e);if(!t)return null;var n,r,o=Vt({h:(n=t[1],r=t[2],void 0===r&&(r="deg"),Number(n)*(At[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return Qt(o)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,o=e.a,c=void 0===o?1:o;return Tt(t)&&Tt(n)&&Tt(r)?zt({r:Number(t),g:Number(n),b:Number(r),a:Number(c)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,o=e.a,c=void 0===o?1:o;if(!Tt(t)||!Tt(n)||!Tt(r))return null;var i=Vt({h:Number(t),s:Number(n),l:Number(r),a:Number(c)});return Qt(i)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,o=e.a,c=void 0===o?1:o;if(!Tt(t)||!Tt(n)||!Tt(r))return null;var i=function(e){return{h:Rt(e.h),s:qt(e.s,0,100),v:qt(e.v,0,100),a:qt(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(c)});return Ft(i)},"hsv"]]},en=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},tn=function(e){return"string"==typeof e?en(e.trim(),Wt.string):"object"==typeof e&&null!==e?en(e,Wt.object):[null,void 0]},nn=function(e,t){var n=Gt(e);return{h:n.h,s:qt(n.s+100*t,0,100),l:n.l,a:n.a}},rn=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},on=function(e,t){var n=Gt(e);return{h:n.h,s:n.s,l:qt(n.l+100*t,0,100),a:n.a}},cn=function(){function e(e){this.parsed=tn(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return $t(rn(this.rgba),2)},e.prototype.isDark=function(){return rn(this.rgba)<.5},e.prototype.isLight=function(){return rn(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Mt(this.rgba)).r,n=e.g,r=e.b,c=(o=e.a)<1?Ht($t(255*o)):"","#"+Ht(t)+Ht(n)+Ht(r)+c;var e,t,n,r,o,c},e.prototype.toRgb=function(){return Mt(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Mt(this.rgba)).r,n=e.g,r=e.b,(o=e.a)<1?"rgba("+t+", "+n+", "+r+", "+o+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,o},e.prototype.toHsl=function(){return Ut(Gt(this.rgba))},e.prototype.toHslString=function(){return t=(e=Ut(Gt(this.rgba))).h,n=e.s,r=e.l,(o=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+o+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,o},e.prototype.toHsv=function(){return e=Bt(this.rgba),{h:$t(e.h),s:$t(e.s),v:$t(e.v),a:$t(e.a,3)};var e},e.prototype.invert=function(){return an({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),an(nn(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),an(nn(this.rgba,-e))},e.prototype.grayscale=function(){return an(nn(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),an(on(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),an(on(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?an({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):$t(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=Gt(this.rgba);return"number"==typeof e?an({h:e,s:t.s,l:t.l,a:t.a}):$t(t.h)},e.prototype.isEqual=function(e){return this.toHex()===an(e).toHex()},e}(),an=function(e){return e instanceof cn?e:new cn(e)},un=n(31671),sn=n(11417);function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fn,pn,mn=function(e){var t,n,r,o=e.account,c=e.handleSuccess,i=(0,Xe.Z)(),a=i.theme,u=i.setTheme,s=(0,un.Z)(),l=s.config,d=s.setConfig,f=(0,$.D)(Ge,{onCompleted:function(){},update:function(e,t){var n=dn(dn({},t.data.update_Account_by_pk),{},{media:(0,nt.Z)(o.media)}),r={id:o.id};e.writeQuery({query:Qe,variables:r,data:{account:n}})}}),p=(0,N.Z)(f,1)[0],m={pageTitle:null===o||void 0===o||null===(t=o.meta)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.Brand)||void 0===r?void 0:r.name};Ye.forEach((function(e){m[e.value]={},e.items.forEach((function(t){m[e.value][t.value]=an(a[e.value][t.value]).toHex()}))}));var v=(0,R.cI)({defaultValues:dn({},m)}),h=v.control,b=v.errors,y=v.setValue,Z=v.handleSubmit,O=v.register,w=v.watch,_=function(){var e=(0,U.Z)(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=dn({},null===o||void 0===o?void 0:o.meta)||{}).themeSettings=dn({},t),(r=dn({},null===n||void 0===n?void 0:n.config)).Brand=dn({},null===r||void 0===r?void 0:r.Brand),r.Brand.name=t.pageTitle,n.config=r,u(dn({},t)),e.next=9,p({variables:{accountId:o.id,account:{meta:n}}});case 9:d(dn({},ot()(l,r))),c();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I={control:h,errors:b,register:O};return(0,L.jsxs)(E.Z,{id:"offCanvasForm",handleSubmit:Z(_),children:[(0,L.jsx)(A.Z,{label:"Page Title",children:(0,L.jsx)(T.Z,dn(dn({},I),{},{name:"pageTitle",placeholder:"Page Title"}))}),Ye.map((function(e){return(0,L.jsxs)("div",{children:[(0,L.jsx)(sn.Z,{tag:"h3",content:e.title}),(0,L.jsx)("div",{children:e.items.map((function(t){var n=e.value+"."+t.value,r=an(w(n)).toHex(),o=(0,L.jsxs)(We,{children:[(0,L.jsx)(et,{color:r})," ",t.title]});return(0,L.jsxs)(x.Z,{context:"white",title:o,children:[(0,L.jsx)(g.Z,{children:(0,L.jsx)(j.Z,{md:3,children:(0,L.jsx)(T.Z,dn(dn({},I),{},{name:n}))})}),(0,L.jsx)(Ee.Z,{}),(0,L.jsx)(Et,{color:r,onChange:function(e){return y(n,e)}})]})}))}),(0,L.jsx)(Ee.Z,{})]})}))]})},vn=function(){var e,t,n,r,o,c=(0,tt.x)().user,i=(0,Xe.Z)().theme,a=(0,Ke.Z)(),s=(0,Je.q)().refetchSettings,l=(0,u.a)(Qe,{variables:{id:c.accountId}}),d=l.data,f=(d=void 0===d?{account:[]}:d).account,p=l.error,m=l.loading,v=l.refetch;p&&p.graphQLErrors.map((function(e){return console.error(e)}));var h=function(){s(),v(),a.close()},g=function(e){e.stopPropagation(),a.show({content:(0,L.jsx)(mn,{account:f,handleSuccess:a.close}),title:"Theme"})},j=function(){return(0,L.jsx)(b.Z,{content:"Edit",context:"secondary",onClick:g,size:"sm"})},y=function(){var e,t,n,r=null===f||void 0===f||null===(e=f.meta)||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.Brand)||void 0===n?void 0:n.name,o="black";return r&&""!==r||(r="No Title",o="initial"),(0,L.jsx)(P.Z,{content:r,context:o,tag:"h6"})},Z="",O="";if((null===f||void 0===f||null===(e=f.media)||void 0===e?void 0:e.length)>0){var w,_,k="themeFavicon"===(null===f||void 0===f||null===(w=f.media[0])||void 0===w||null===(_=w.item)||void 0===_?void 0:_.category);Z=!!k&&(null===f||void 0===f?void 0:f.media[0]),O=!k&&(null===f||void 0===f?void 0:f.media[0]),Z?O=null===f||void 0===f?void 0:f.media.find((function(e){return"themeLogo"===e.item.category})):Z=null===f||void 0===f?void 0:f.media.find((function(e){return"themeFavicon"===e.item.category}))}return!m&&(0,L.jsxs)(x.Z,{fitParentHeight:!0,open:!0,title:"Theme Settings",toolbar:(0,L.jsx)(j,{}),children:[(0,L.jsx)(A.Z,{label:"Page Title",children:(0,L.jsx)(y,{})}),Ye.map((function(e){return(0,L.jsxs)("div",{children:[(0,L.jsxs)(P.Z,{children:[e.title," "]}),(0,L.jsx)("div",{children:e.items.map((function(t){return(0,L.jsxs)(We,{children:[(0,L.jsx)(et,{color:i[e.value][t.value]})," ",t.title]},t.value)}))}),(0,L.jsx)(Ee.Z,{})]},e.value)})),(0,L.jsx)(P.Z,{children:"Theme logo"}),f.media[0]&&(0,L.jsx)(hn,{children:(0,L.jsx)(I.Z,{alt:"Theme logo",src:"".concat("https://d1hk88326p7ilp.cloudfront.net","/").concat(null===(t=O)||void 0===t||null===(n=t.item)||void 0===n?void 0:n.filename),width:200})}),(0,L.jsx)(Ee.Z,{marginTop:"sm"}),(0,L.jsx)(b.Z,{context:"secondary",content:"Manage logo",onClick:function(){a.show({content:(0,L.jsx)(Ae.z,{accept:"image/*",category:"themeLogo",entity:"Account",entityId:c.accountId,expiryShow:!1,onSuccess:h,type:"image"}),title:"Theme logo"})},size:"sm"}),(0,L.jsx)(Ee.Z,{marginTop:"sm"}),(0,L.jsx)(P.Z,{children:"Theme favicon"}),f.media[0]&&(0,L.jsxs)(bn,{children:[(0,L.jsx)(I.Z,{alt:"Theme logo",src:"/static/favicon/tab.svg",width:"100%"}),(0,L.jsx)(I.Z,{className:"favicon",alt:"Theme favicon",src:"".concat("https://d1hk88326p7ilp.cloudfront.net","/").concat(null===(r=Z)||void 0===r||null===(o=r.item)||void 0===o?void 0:o.filename),width:30})]}),(0,L.jsx)(Ee.Z,{marginTop:"sm"}),(0,L.jsx)(b.Z,{context:"secondary",content:"Manage favicon",onClick:function(){a.show({content:(0,L.jsx)(Ae.z,{accept:"image/*",category:"themeFavicon",entity:"Account",entityId:c.accountId,expiryShow:!1,onSuccess:h,type:"image"}),title:"Theme favicon"})},size:"sm"}),(0,L.jsx)(Ee.Z,{marginTop:"sm"})]})},hn=_.ZP.div.withConfig({displayName:"module__StyledContainer",componentId:"sc-brc5wo-0"})(["background-color:rgb(0,55,83);"]),bn=_.ZP.div.withConfig({displayName:"module__StyledFavContainer",componentId:"sc-brc5wo-1"})(["position:relative;.favicon{position:absolute;top:37px;left:183px;}"]),gn=(0,l.Ps)(fn||(fn=(0,s.Z)(["\n  query GetJobSetting($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      id\n      meta\n    }\n  }\n"]))),jn=(0,l.Ps)(pn||(pn=(0,s.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),xn=(0,M.Ry)().shape({jobNumberStart:(0,M.Rx)().when("checkJobNumberStart",{is:"true",then:(0,M.Rx)().positive("Must be more than 0").integer("Must be more than 0")}),jobNumberPrefix:(0,M.Z_)(),jobNumberSuffix:(0,M.Z_)()});function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var On=function(e){var t,n,r,o=e.account,c=e.accountId,i=e.refetch,u=(0,a.useContext)(m.Z),s=(0,R.cI)({defaultValues:null===(t=o.meta)||void 0===t?void 0:t.job,resolver:(0,z.S)(xn)}),l=s.errors,d=s.handleSubmit,f=s.register,p=s.setValue,v=!(null===(n=o.meta)||void 0===n||null===(r=n.job)||void 0===r||!r.jobNumberStart);v&&p("checkJobNumberStart",!1);var h=(0,$.D)(jn,{onCompleted:function(e){i(),u.close()}}),b=(0,N.Z)(h,1)[0],g={errors:l,register:f},j=function(e){return e.replace(/\s+|\u02DC|\u00A0 /g,"")};return(0,L.jsxs)(E.Z,{id:"offCanvasForm",handleSubmit:d((function(e){var t=Zn({},o.meta)||{},n=e.jobNumberSuffix,r=e.jobNumberPrefix;delete e.checkJobNumberStart,n&&(e.jobNumberSuffix=j(n)),r&&(e.jobNumberPrefix=j(r)),t.job=Zn(Zn({},t.job),e),b({variables:{accountId:c,account:{meta:t}}})})),children:[(0,L.jsx)(T.Z,Zn(Zn({},g),{},{name:"checkJobNumberStart",type:"hidden"})),!v&&(0,L.jsx)(A.Z,{label:"Start works orders and quotes from number",children:(0,L.jsx)(T.Z,Zn(Zn({},g),{},{name:"jobNumberStart"}))}),(0,L.jsx)(A.Z,{label:"Prefix",children:(0,L.jsx)(T.Z,Zn(Zn({},g),{},{name:"jobNumberPrefix"}))}),(0,L.jsx)(A.Z,{label:"Suffix",children:(0,L.jsx)(T.Z,Zn(Zn({},g),{},{name:"jobNumberSuffix"}))})]})},wn=function(){var e,t,n,r,o,c,i=(0,a.useContext)(m.Z),s=(0,a.useContext)(v.Z).user,l=(0,u.a)(gn,{variables:{id:s.accountId}}),d=l.data,f=(d=void 0===d?{account:[]}:d).account,p=l.loading,h=l.refetch,g=null===(e=f.meta)||void 0===e||null===(t=e.job)||void 0===t?void 0:t.jobNumberStart,j=null===(n=f.meta)||void 0===n||null===(r=n.job)||void 0===r?void 0:r.jobNumberPrefix,y=null===(o=f.meta)||void 0===o||null===(c=o.job)||void 0===c?void 0:c.jobNumberSuffix,Z=function(e){e.stopPropagation(),i.show({content:(0,L.jsx)(On,{accountId:s.accountId,account:f,refetch:h}),title:"Job and Quote settings"})},O=function(){return(0,L.jsx)(b.Z,{content:"Edit",context:"secondary",onClick:Z,size:"sm"})};return!p&&(0,L.jsxs)(x.Z,{fitParentHeight:!0,open:!0,title:"Job and Quote settings",toolbar:(0,L.jsx)(O,{}),children:[g&&(0,L.jsx)(je.Z,{context:"success",content:"The primary work order and quote numbering has been set and cannot be changed."}),(0,L.jsx)(ge.Z,{content:"Start works orders and quotes from number:",text:g||"-"}),(0,L.jsx)(ge.Z,{content:"Prefix:",text:j||"-"}),(0,L.jsx)(ge.Z,{content:"Suffix:",text:y||"-"})]})},_n=n(83528),In=(0,M.Ry)().shape({terms:(0,M.Z_)().required()});function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sn=function(e){var t,n=e.account,r=e.accountId,o=e.handleSuccess,c=null===n||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.quote,i=(0,R.cI)({defaultValues:kn({},c),resolver:(0,z.S)(In)}),a=i.control,u=i.errors,s=i.handleSubmit,l={control:a,errors:u,register:i.register},f=(0,$.D)(d,{onCompleted:function(){o()}}),p=(0,N.Z)(f,1)[0],m=function(){var e=(0,U.Z)(G().mark((function e(t){var o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=kn({},n.meta)||{}).quote=kn({},t),p({variables:{accountId:r,account:{meta:o}}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,L.jsx)(E.Z,{id:"offCanvasForm",handleSubmit:s(m),children:(0,L.jsx)(A.Z,{label:"Quote Terms",children:(0,L.jsx)(_n.Z,kn(kn({},l),{},{name:"terms",rows:3}))})})},Cn=function(e){var t,n,r=e.account,o=e.accountId,c=e.refetch,i=null===r||void 0===r||null===(t=r.meta)||void 0===t||null===(n=t.quote)||void 0===n?void 0:n.terms,u=(0,a.useContext)(m.Z),s=function(e){e.stopPropagation(),u.show({content:(0,L.jsx)(Sn,{account:r,accountId:o,handleSuccess:l}),title:"Quote Terms"})},l=function(e){c(),u.close()},d=function(){return(0,L.jsx)(b.Z,{content:"Edit",context:"secondary",onClick:s,size:"sm"})};return(0,L.jsx)(x.Z,{fitParentHeight:!0,open:!0,title:"Quote Terms",toolbar:(0,L.jsx)(d,{}),children:(0,L.jsx)(ge.Z,{content:"Terms",text:null!==i&&void 0!==i?i:"-"})})},Dn=(0,M.Ry)().shape({quote:(0,M.Rx)().required(),invoice:(0,M.Rx)().required()});function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){(0,D.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var An=function(e){var t,n=e.account,r=e.accountId,o=e.handleSuccess,c=null===n||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.threshold,i=(0,R.cI)({defaultValues:En({},c),resolver:(0,z.S)(Dn)}),a=i.control,u=i.errors,s=i.handleSubmit,l={control:a,errors:u,register:i.register},f=(0,$.D)(d,{onCompleted:function(){o()}}),p=(0,N.Z)(f,1)[0],m=function(){var e=(0,U.Z)(G().mark((function e(t){var o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=En({},n.meta)||{}).threshold=En({},t),p({variables:{accountId:r,account:{meta:o}}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,L.jsxs)(E.Z,{id:"offCanvasForm",handleSubmit:s(m),children:[(0,L.jsx)(A.Z,{label:"Invoice",children:(0,L.jsx)(T.Z,En(En({},l),{},{name:"invoice"}))}),(0,L.jsx)(A.Z,{label:"Quote",children:(0,L.jsx)(T.Z,En(En({},l),{},{name:"quote"}))})]})},Tn=function(e){var t,n,r,o=e.account,c=e.accountId,i=e.refetch,u=null===o||void 0===o||null===(t=o.meta)||void 0===t?void 0:t.threshold,s=(0,a.useContext)(m.Z),l=function(e){e.stopPropagation(),s.show({content:(0,L.jsx)(An,{account:o,accountId:c,handleSuccess:d}),title:"Threshold Limit"})},d=function(e){i(),s.close()},f=function(){return(0,L.jsx)(b.Z,{content:"Edit",context:"secondary",onClick:l,size:"sm"})};return(0,L.jsxs)(x.Z,{fitParentHeight:!0,open:!0,title:"Threshold Limit",toolbar:(0,L.jsx)(f,{}),children:[(0,L.jsx)(ge.Z,{content:"Invoice",text:null!==(n=null===u||void 0===u?void 0:u.invoice)&&void 0!==n?n:"-"}),(0,L.jsx)(ge.Z,{content:"Quote",text:null!==(r=null===u||void 0===u?void 0:u.quote)&&void 0!==r?r:"-"})]})},$n=function(){var e=(0,a.useContext)(p.Z).hasRole,t=(0,a.useContext)(m.Z),n=(0,a.useContext)(v.Z).user,r=(0,u.a)(f,{variables:{id:n.accountId}}),o=r.data,c=(o=void 0===o?{account:[]}:o).account,i=r.loading,s=r.refetch,l=(0,w.WE)(c,"registered"),d=c.bankAccounts,_=function(e){e&&s(),t.close()},I=function(e){e.stopPropagation(),t.show({content:(0,L.jsx)(Z.H,{addressId:null===l||void 0===l?void 0:l.address.id,entity:"Account",entityId:null===n||void 0===n?void 0:n.accountId,id:(null===l||void 0===l?void 0:l.id)||null,onSubmit:_,type:"registered"}),submit:!1,title:"Manage addresses"})},P=function(){return(0,L.jsx)(h.Z,{children:(0,L.jsx)(b.Z,{context:"secondary",content:"Add an Address",onClick:I,size:"sm"})})};return!i&&(0,L.jsxs)(g.Z,{children:[(0,L.jsxs)(j.Z,{md:6,children:[(0,L.jsx)(ze,{}),(0,L.jsx)(wn,{}),(0,L.jsx)(vn,{}),!l&&(0,L.jsx)(x.Z,{toolbar:(0,L.jsx)(P,{}),button:"Add an Address",handleClick:I,open:!0,title:"Address"}),l&&(0,L.jsx)(y.f,{address:l.address,entity:"Account",entityId:c.id,id:l.id,refetch:s,title:"Registered Address",type:"registered"}),e("admin")&&(0,L.jsx)(re,{id:n.accountId,account:c,refetch:s})]}),(0,L.jsxs)(j.Z,{md:6,children:[(0,L.jsx)(O.y,{edit:!0,accountId:c.id,data:d,refetch:s}),(0,L.jsx)(be,{edit:!0,accountId:c.id,meta:c.meta,refetch:s}),(0,L.jsx)(Se,{account:c,refetch:s}),(0,L.jsx)(Ue,{account:c,accountId:c.id,refetch:s}),(0,L.jsx)(Cn,{account:c,accountId:c.id,refetch:s}),(0,L.jsx)(Tn,{account:c,accountId:c.id,refetch:s})]})]})},qn=function(){return(0,L.jsx)(i.Z,{pageHeading:{heading:"Settings"},View:(0,L.jsx)($n,{})})}},19408:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/settings/settings",function(){return n(33872)}])}},function(e){e.O(0,[367,284,4195,5312,7287,2002,3086,7134,3486,9082,3515,4712,1265,6996,9666,4177,8678,8674,5146,899,3016,8412,9774,2888,179],(function(){return t=19408,e(e.s=t);var t}));var t=e.O();_N_E=t}]);