(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5916],{39759:function(e,t,n){"use strict";var r=n(67294),i=n(45697),s=n(18944),a=function(e){var t=e.county,n=e.country,i=e.line1,a=e.line2,o=e.line3,c=e.postcode,u=e.town;return r.createElement("address",null,r.createElement(s.Z,null,i),a&&r.createElement(s.Z,null,a),o&&r.createElement(s.Z,null,o),r.createElement(s.Z,null,u),t&&r.createElement(s.Z,null,t),r.createElement(s.Z,null,c),r.createElement(s.Z,null,n))};a.displayName="Address",a.propTypes={county:i.string,country:i.string,line1:i.string.isRequired,line2:i.string,line3:i.string,postcode:i.string.isRequired,town:i.string},t.Z=a},93443:function(e,t,n){"use strict";var r=n(67294),i=n(45697),s=n(22796),a=n(18944),o=function(e){var t=e.content,n=e.text;return r.createElement(r.Fragment,null,r.createElement(s.Z,{marginBottom:"sm"}),r.createElement(a.Z,{content:t,context:"dark",size:"sm"}),r.createElement(a.Z,null,n))};o.propTypes={content:i.string.isRequired,text:(0,i.oneOfType)([i.node,i.string]).isRequired},t.Z=o},62188:function(e,t,n){"use strict";var r=n(67294),i=n(45697),s=n(55657),a=function(e){var t=e.icon,n=e.prefix;return r.createElement("span",{className:"fa-stack fa-1x",style:{pointerEvents:"none"}},r.createElement(s.Z,{className:"fa-stack-2x",color:"#eaf0f6",fixedWidth:!1,icon:"circle"}),r.createElement(s.Z,{className:"fa-stack-1x",color:"#506e91",fixedWidth:!1,icon:t,prefix:n}))};a.displayName="IconStacked",a.propTypes={icon:i.string.isRequired,prefix:i.string},a.defaultProps={prefix:"fas"},t.Z=a},47385:function(e,t,n){"use strict";var r=n(67294);t.Z=function(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e})),t.current}},63785:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(70885),i=n(67294),s=n(45697),a=n(71002),o=n(42982),c=n(15671),u=n(43144);function l(e){var t=this,n=[];if(Array.isArray(e)){var r=e.map((function(e){return t.locationBuilder(e)}));n.push.apply(n,(0,o.Z)(r))}return"string"!==typeof e&&"number"!==typeof e||n.push(e),"object"===(0,a.Z)(e)&&e.lat&&e.lng&&n.push("".concat(e.lat,",").concat(e.lng)),n.join("%7C")}function d(e,t,n){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=6371,s=Math.PI,a="",o=e*s/180,c=t*s/180,u=n/1e3/i,d=0;for(d=0;d<=360;d+=r){var p=d*s/180,f=Math.asin(Math.sin(o)*Math.cos(u)+Math.cos(o)*Math.sin(u)*Math.cos(p)),h=180*(c+Math.atan2(Math.sin(p)*Math.sin(u)*Math.cos(o),Math.cos(u)-Math.sin(o)*Math.sin(f)))/s;a+=l((f=180*f/s)+","+h)}return encodeURI(a)}(e,t,n)}var p=function(){function e(t){var n=t.apiKey,r=t.center,i=t.channel,s=t.client,a=t.format,o=void 0===a?"png":a,u=t.language,l=t.location,d=void 0===l?"":l,p=t.maptype,f=void 0===p?"roadmap":p,h=t.markers,g=void 0===h?[]:h,y=t.paths,m=void 0===y?[]:y,v=t.region,b=t.rootURL,j=void 0===b?"https://maps.googleapis.com/maps/api/staticmap":b,x=t.scale,O=void 0===x?1:x,Z=t.signature,k=t.size,w=void 0===k?"400x200":k,I=t.style,P=t.visible,_=t.zoom,$=void 0===_?15:_;(0,c.Z)(this,e),this.apiKey=n,this.channel=i,this.center=r,this.client=s,this.format=o,this.language=u,this.location=d,this.maptype=f,this.markers=g,this.paths=m,this.region=v,this.rootURL=j,this.scale=O,this.signature=Z,this.size=w,this.style=I,this.visible=P,this.zoom=$}return(0,u.Z)(e,[{key:"urlBuilder",value:function(e,t,n){return t?"".concat(e).concat(n).concat(t):null}},{key:"renderBaseMap",value:function(){var e=[];e.push(this.urlBuilder("key",this.apiKey,"=")),e.push(this.urlBuilder("center",this.center,"=")),e.push(this.urlBuilder("channel",this.channel,"=")),e.push(this.urlBuilder("client",this.client,"=")),e.push(this.urlBuilder("format",this.format,"=")),e.push(this.urlBuilder("language",this.language,"=")),e.push(this.urlBuilder("maptype",this.maptype,"=")),e.push(this.urlBuilder("region",this.region,"=")),e.push(this.urlBuilder("scale",this.scale,"=")),e.push(this.urlBuilder("signature",this.signature,"=")),e.push(this.urlBuilder("size",this.size,"=")),e.push(this.urlBuilder("style",this.style,"=")),e.push(this.urlBuilder("visible",this.visible,"=")),e.push(this.urlBuilder("zoom",this.zoom,"="));var t=e.filter((function(e){return e})).join("&");return"".concat(this.rootURL,"?").concat(t)}},{key:"locationBuilder",value:function(e){var t=this,n=[];if(Array.isArray(e)){var r=e.map((function(e){return t.locationBuilder(e)}));n.push.apply(n,(0,o.Z)(r))}return"string"!==typeof e&&"number"!==typeof e||n.push(encodeURI(e)),"object"===(0,a.Z)(e)&&e.lat&&e.lng&&n.push("".concat(e.lat,",").concat(e.lng)),n.join("%7C")}},{key:"renderPath",value:function(e){var t=e.circle,n=e.color,r=e.fillcolor,i=e.geodesic,s=e.points,a=e.weight,o=[];if(t){var c=d(t.latitude,t.longitude,t.radius);o.push(this.urlBuilder("",this.locationBuilder("".concat(c)),""))}o.push(this.urlBuilder("color",n,":")),o.push(this.urlBuilder("weight",a,":")),o.push(this.urlBuilder("fillcolor",r,":")),o.push(this.urlBuilder("geodesic",i,":")),o.push(this.urlBuilder("",this.locationBuilder(s),""));var u=o.filter((function(e){return e})).join("%7C");return"path=".concat(u)}},{key:"renderParts",value:function(){var e=this;return this.paths.map((function(t){return e.renderPath(t)}))}},{key:"renderMarkers",value:function(){var e=this.markers,t=this.locationBuilder,n=this.location;return(e.length?e.map((function(e){var n="markers=";switch((0,a.Z)(e)){case"string":n+=t(e);break;case"object":var r=e.colour,i=e.label,s=e.location;n+=(r&&"color:".concat(r,"|"))+(i&&"label:".concat(i,"|"))+(s&&"".concat(t(s),"|"))}return n})):["markers=".concat(t(n))]).join("&")}},{key:"generateUrl",value:function(){var e=this.renderParts()||[],t=this.renderBaseMap(),n=this.renderMarkers();return"".concat(t,"&").concat(e,"&").concat(n)}}]),e}(),f=function(e){var t=e.apiKey,n=e.center,s=e.channel,a=e.className,o=e.client,c=e.container,u=void 0===c?"img":c,l=e.format,d=e.language,f=e.location,h=e.maptype,g=e.markers,y=e.paths,m=e.region,v=e.scale,b=e.signature,j=e.size,x=e.style,O=e.styleMap,Z=e.visible,k=e.zoom,w=j.split("x"),I=(0,r.Z)(w,2),P=I[0],_=I[1],$=(0,i.useState)(""),S=(0,r.Z)($,2),q=S[0],T=S[1];return(0,i.useEffect)((function(){var e=new p({apiKey:t,center:n,channel:s,client:o,format:l,language:d,location:f,maptype:h,markers:g,paths:y,region:m,scale:v,signature:b,size:j,style:O,visible:Z,zoom:k}).generateUrl();T(e)}),[]),i.createElement(u,{className:a,width:P,height:_,src:q,style:x,alt:"map"})};f.displayName="StaticLocation",f.propTypes={apiKey:s.string.isRequired,center:s.string,channel:s.string,className:s.string,client:s.string,container:s.node,format:(0,s.oneOf)(["png","png8","png32","gif","jpg","jpg-baseline"]),language:s.string,location:s.string,maptype:(0,s.oneOf)(["roadmap","satellite","terrain","hybrid"]),markers:s.array,paths:s.array,region:s.string,scale:(0,s.oneOf)([1,2,4,"1","2","4"]),signature:s.string,size:s.string.isRequired,style:s.object,styleMap:s.string,visible:s.string,zoom:s.number},f.defaultProps={format:"png",maptype:"roadmap",scale:1,size:"400x200",zoom:15};var h=f},75515:function(e,t){"use strict";t.Z={camelize:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")},decamelize:function(e){return e.split(/(?=[A-Z])/).join(" ")}}},80285:function(e,t){"use strict";t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GBP",n=new Intl.NumberFormat(["en-GB"],{currency:t,currencyDisplay:"symbol",style:"currency"});return n.format(e)}},69399:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(46482),i=n(85893),s=function(e){var t=e.errors,n=e.name,s=e.onChange,a=e.options,o=e.register;return(0,i.jsx)(r.Z,{errors:t,name:n,onChange:s,options:a,register:o})};s.defaultProps={name:"status"}},19905:function(e,t,n){"use strict";n.d(t,{B:function(){return te}});var r,i,s,a,o,c=n(92809),u=n(67294),l=n(93633),d=n(85088),p=n(52209),f=n(54397),h=(0,f.Ps)(r||(r=(0,p.Z)(["\n  fragment TaskFields on Task {\n    id\n    action\n    content\n    dueDate\n    priority\n    status\n    entity\n    entityId\n    assignedAccount: AssignedAccount {\n      id\n      type\n      name\n    }\n    assignedUser: AssignedUser {\n      id\n      fullName\n    }\n  }\n"]))),g=(0,f.Ps)(i||(i=(0,p.Z)(["\n  query GetTasks(\n    $accountId: Int\n    $action: String\n    $entity: String\n    $entityId: Int\n    $limit: Int\n    $offset: Int\n    $orderBy: Task_order_by!\n    $priority: Int\n    $q: String\n    $status: String\n    $userId: Int\n  ) {\n    tasks: Task(\n      limit: $limit\n      offset: $offset\n      order_by: [$orderBy]\n      where: {\n        accountId: { _eq: $accountId }\n        userId: { _eq: $userId }\n        action: { _eq: $action }\n        content: { _ilike: $q }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        priority: { _eq: $priority }\n        status: { _eq: $status }\n      }\n    ) {\n      ...TaskFields\n    }\n    meta: Task_aggregate(\n      where: {\n        accountId: { _eq: $accountId }\n        userId: { _eq: $userId }\n        action: { _eq: $action }\n        content: { _ilike: $q }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        priority: { _eq: $priority }\n        status: { _eq: $status }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n  ","\n"])),h),y=(0,f.Ps)(s||(s=(0,p.Z)(["\n  subscription GetTasks(\n    $accountId: Int\n    $action: String\n    $entity: String\n    $entityId: Int\n    $limit: Int\n    $offset: Int\n    $orderBy: Task_order_by!\n    $q: String\n    $status: String\n    $userId: Int\n  ) {\n    tasks: Task(\n      limit: $limit\n      offset: $offset\n      order_by: [$orderBy]\n      where: {\n        accountId: { _eq: $accountId }\n        userId: { _eq: $userId }\n        action: { _eq: $action }\n        content: { _ilike: $q }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        status: { _eq: $status }\n      }\n    ) {\n      ...TaskFields\n    }\n  }\n  ","\n"])),h),m=(0,f.Ps)(a||(a=(0,p.Z)(["\n  mutation AddTask($objects: [Task_insert_input!]!) {\n    insert_Task(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),v=(0,f.Ps)(o||(o=(0,p.Z)(["\n  mutation UpdateTask($id: Int!, $changes: Task_set_input) {\n    update_Task_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]))),b=n(80880),j=n(91126),x=n(18862),O=n(58448),Z=n(14347),k=n(80284),w=n(81185),I=n(12517),P=n(20154),_=n(30266),$=n(80318),S=n(64687),q=n.n(S),T=n(75709),D=n(42283),B=n(79665),E=n(97202),C=n(65375),N=n(83528),M=n(78215),F=n(2356),R=n(46482),U=n(76800),z=n(95146),A=n(75838),J=n(19501),V=(0,J.Ry)().shape({assignedUser:(0,J.Ry)().required(),content:(0,J.Z_)().required(),status:(0,J.Z_)().oneOf(["open","closed","resolved"]).required(),dueDate:(0,J.hT)().nullable()}),G=n(1323),K=n(85893);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(e){var t=e.defaultValues,n=e.onSuccess,r=(0,G.x)().user,i=(0,D.cI)({defaultValues:t,resolver:(0,B.S)(V)}),s=i.control,a=i.errors,o=i.handleSubmit,c=i.register,u=(0,T.D)(m,{onCompleted:function(e){var t=e.insert_Task.returning[0].id;n&&n(t)}}),l=(0,$.Z)(u,1)[0],d=(0,T.D)(v,{onCompleted:function(e){var t=e.update_Task_by_pk.id;n&&n(t)}}),p=(0,$.Z)(d,1)[0],f=function(){var e=(0,_.Z)(q().mark((function e(n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n).userId=n.assignedUser.value,delete r.assignedUser,!t.id){e.next=8;break}return e.next=6,p({variables:{id:t.id,changes:r}});case 6:e.next=13;break;case 8:return r.accountId=t.accountId,r.entity=t.entity,r.entityId=t.entityId,e.next=13,l({variables:{objects:[r]}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={control:s,errors:a,register:c};return(0,K.jsxs)(E.Z,{id:"offCanvasForm",handleSubmit:o(f),children:[(0,K.jsx)(C.Z,{label:"Task",children:(0,K.jsx)(N.Z,W(W({},h),{},{name:"content",rows:3}))}),(0,K.jsxs)(M.Z,{children:[(0,K.jsx)(F.Z,{md:4,children:(0,K.jsx)(C.Z,{label:"Priority",children:(0,K.jsx)(R.Z,W(W({},h),{},{name:"priority",options:P.t}))})}),(0,K.jsxs)(F.Z,{md:8,children:[(0,K.jsx)(C.Z,{label:"Due Date"}),(0,K.jsx)(U.M,W(W({},h),{},{dateFormat:"d MMM yyyy HH:mm",name:"dueDate",showTimeSelect:!0}))]})]}),(0,K.jsxs)(M.Z,{children:[(0,K.jsx)(F.Z,{md:4,children:(0,K.jsx)(C.Z,{label:"Status",children:(0,K.jsx)(R.Z,W(W({},h),{},{name:"status",options:A.WG}))})}),(0,K.jsx)(F.Z,{md:8,children:(0,K.jsx)(z.P,W(W({},h),{},{accountId:r.accountId,errors:W({},a),label:"Assigned to",name:"assignedUser",type:"manager"}))})]})]})},Q=n(49705);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee={item:"dueDate",order:"desc"},te=function(e){var t=e.filters,n=e.showMyTaskButton,r=e.view,i=e.onSuccess,s=(0,u.useState)(!1),a=s[0],o=s[1],c=(0,G.x)().user,p=Y({},Y({status:"open"},t)),f=(0,Q.x)({filters:p,initialSort:ee}),h=f.initialData,m=f.ref,v=(0,u.useContext)(b.Z),_=Y(Y({accountId:c.accountId},h),{},{userId:a?c.id:h.userId}),$=(0,l.a)(g,{variables:Y({},_),skip:"compact"===r}),S=$.loading,q=$.data,T=(q=void 0===q?{tasks:[],meta:{aggregate:{totalCount:0}}}:q).tasks,D=q.meta,B=$.refetch,E=(0,d.m)(y,{variables:Y({},_),skip:"compact"!==r}),C=E.loading,N=E.data,M=(N=void 0===N?{tasks:[]}:N).tasks,F=function(e){v.close(),B(),i&&i()},R=function(e,n){e.preventDefault(),e.stopPropagation();var r,i,s,a={};null!==n&&void 0!==n&&n.item?((a=Y({},n.item)).dueDate=n.item.dueDate?new Date(n.item.dueDate):null,a.assignedUser=n.item.assignedUser?{value:n.item.assignedUser.id,label:n.item.assignedUser.fullName}:null):a={accountId:null!==(r=null===t||void 0===t?void 0:t.accountId)&&void 0!==r?r:c.accountId,entity:null!==(i=null===t||void 0===t?void 0:t.entity)&&void 0!==i?i:null,entityId:null!==(s=null===t||void 0===t?void 0:t.entityId)&&void 0!==s?s:null,priority:3,status:"open"};v.show({content:(0,K.jsx)(H,{defaultValues:a,onSuccess:F}),title:null!==n&&void 0!==n&&n.id?"Edit Task":"Add Task"})},U=[{context:"secondary",icon:["fas","edit"],onClick:R,tooltip:"Edit"}],z=[{hidden:!0},{text:"Priority",formatter:function(e){var t,n=e.row;return(null===(t=P.t.find((function(e){return e.value===n.priority})))||void 0===t?void 0:t.text)||"-"}},{text:"Task"},{text:"Due date",sortable:!0,sortName:"dueDate"},{text:"Assigned To"},{hidden:!0},{formatter:j.Z,formatterData:U,text:"Actions"}],A=function(e){e.stopPropagation(),o(!a)},J=function(){return(0,K.jsxs)(O.Z,{children:[(0,K.jsx)(Z.Z,{context:"secondary",content:"New Task",onClick:R,size:"sm"}),n&&(0,K.jsx)(Z.Z,{context:"secondary",content:a?"All Tasks":"My Tasks",onClick:A,size:"sm"})]})};return(0,K.jsx)(k.Z,{open:!0,title:"Tasks",toolbar:(0,K.jsx)(J,{}),children:(0,K.jsx)(w.t,{columns:z,history:!1,initialSort:ee,loading:"compact"===r?C:S,meta:D,ref:m,refetch:B,rowClick:function(e){var t=e.item;"Job"===t.entity&&t.entityId&&v.show({content:(0,K.jsx)(I.g,{jobId:t.entityId,toggleShow:v.close}),submit:!1,title:"Job details",width:"50%"})},rows:("compact"===r?M:T).map((function(e){var t;return{id:e.id,priority:e.priority,content:e.content||"",date:e.dueDate?(0,x.Z)(e.dueDate,!0):"-",assignedUser:null===(t=e.assignedUser)||void 0===t?void 0:t.fullName,item:e,actions:""}}))})})};te.defaultProps={showMyTaskButton:!1}},20154:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var r=[{text:"P1",value:1},{text:"P2",value:2},{text:"P3",value:3},{text:"P4",value:4},{text:"P5",value:5}]},75838:function(e,t,n){"use strict";n.d(t,{bg:function(){return r},WG:function(){return i}});var r=[{text:"Status",value:""},{text:"Active",value:"active"},{text:"Inactive",value:"inactive"}],i=[{text:"Status",value:""},{text:"Open",value:"open"},{text:"Resolved",value:"resolved"},{text:"Closed",value:"closed"}]},70316:function(e,t,n){"use strict";n.d(t,{J:function(){return _}});var r=n(92809),i=n(80318),s=n(10219),a=n(11163),o=n(67294),c=n(78215),u=n(2356),l=n(42283),d=n(97202),p=n(80284),f=n(65375),h=n(10973),g=n(14347),y=n(66805),m=n(69119),v=n(23855),b=n(83894);function j(e,t,n){var r=(0,o.useState)((function(){if(JSON.parse(window.sessionStorage.getItem(e))&&!Object.values(JSON.parse(window.sessionStorage[e])).includes(n))return t;try{var r=JSON.parse(window.sessionStorage.getItem(e));return r&&(r.startDate=r.startDate?(0,m.Z)((0,v.Z)(r.startDate)):null,r.endDate=r.endDate?(0,b.Z)((0,v.Z)(r.endDate)):null),r||t}catch(i){return console.log(i),t}})),i=r[0],s=r[1];return[i,function(t){try{var n=t instanceof Function?t(i):t;s(n),window.sessionStorage.setItem(e,JSON.stringify(n))}catch(r){console.log(r)}}]}var x=n(85893);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t=e.initialValues,n=e.renderFilters,r=e.setFilters,s=e.lastQuery,a=e.filters,m=t.filterType,v=j("form_data",t,m),b=(0,i.Z)(v,2),O=b[0],k=b[1],w=(0,l.cI)({defaultValues:O||t}),I=w.control,P=w.errors,_=w.handleSubmit,$=w.register,S=w.reset,q=w.watch,T=w.setValue,D=Z(Z({},q()),{},{filterType:m});(0,o.useEffect)((function(){S(D)}),[S]),(0,o.useEffect)((function(){k(D)}),[a]);var B=function(e){var n=e.query;if(n!==s){var i={q:"%".concat(n,"%")||0},a=/^\d+$/.test(n);"id"in t&&(i.id=a?Number(n):null),"meta"in t&&(i.meta=a?{invoiceNumbers:[n]}:null),"jobNumber"in t&&(i.jobNumber=a?String(n):null,i.invoiceNumber=a?Number(n):null),(i.id||i.meta||i.jobNumber)&&(i.q=null),r((function(e){return Z(Z({},e),i)}))}};return(0,x.jsx)(d.Z,{handleSubmit:_(B),children:(0,x.jsxs)(p.Z,{title:"Filters",children:[(0,x.jsxs)(c.Z,{children:[(0,x.jsx)(u.Z,{sm:12,lg:12,children:(0,x.jsx)(f.Z,{label:"",children:(0,x.jsx)(h.Z,{errors:P,label:"Search",name:"email",placeholder:"Search...",prependSearchIcon:!0,register:$,type:"search"})})}),(0,x.jsx)(u.Z,{sm:12,lg:12,children:n({control:I,errors:P,initialValues:t,register:$,setFilters:r,watch:q,setValue:T,reset:S})})]}),(0,x.jsx)(y.H,{content:"Search",context:"secondary",handleClick:B,type:"submit",children:(0,x.jsx)(g.Z,{content:"Clear",context:"danger",onClick:function(e){Object.keys(t).map((function(e){return T(e,null)})),r(t),S(t),B("")},size:"sm"})})]})})},w=["FiltersComp","initialFilters","TableComp"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t=e.FiltersComp,n=e.initialFilters,r=e.TableComp,l=(0,s.Z)(e,w),d=j("filters",n,n.filterType),p=(0,i.Z)(d,2),f=p[0],h=p[1],g=(0,o.useState)(f||n),y=g[0],m=g[1],v=(0,a.useRouter)().query.show;return(0,o.useEffect)((function(){h(y)}),[y]),(0,x.jsx)(c.Z,{children:(0,x.jsxs)(u.Z,{sm:12,lg:12,children:[(0,x.jsx)(k,{initialValues:n,renderFilters:function(e){return(0,x.jsx)(t,P(P(P({},e),l),{},{show:v}))},setFilters:m,filters:y}),(0,x.jsx)(r,P({filters:y,initialFilters:n},l))]})})}},2312:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(66918),i=n(70316),s=n(19905),a=n(83789),o=n(92809),c=n(78215),u=n(2356),l=n(46482),d=n(95146),p=n(69399),f=n(20154),h=n(75838),g=[{text:"Approve job request",value:"approveRequest"},{text:"Assign suppliers",value:"assignSuppliers"},{text:"Request quotes",value:"requestQuotes"},{text:"Review job report",value:"reviewReport"},{text:"Job report not sent",value:"reportNotSent"},{text:"Validate Job",value:"validateJob"},{text:"Send invoices",value:"sendInvoices"},{text:"Dispute resolution required",value:"disputeResolutionRequired"}],y=n(1323),m=n(85893);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){var t=e.control,n=e.errors,r=e.register,i=e.setFilters,s=(0,y.x)().user,o={control:t,errors:n,register:r};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(c.Z,{children:[(0,m.jsx)(u.Z,{md:6,children:(0,m.jsx)(p.r,b(b({},o),{},{onChange:function(e){return i((function(t){return b(b({},t),{},{status:e.target.value||null})}))},options:h.WG}))}),(0,m.jsx)(u.Z,{md:6,children:(0,m.jsx)(l.Z,b(b({},o),{},{name:"action",onChange:function(e){return i((function(t){return b(b({},t),{},{action:e.target.value||null})}))},options:[{text:"Action",value:""}].concat((0,a.Z)(g))}))})]}),(0,m.jsxs)(c.Z,{align:"baseline",children:[(0,m.jsx)(u.Z,{md:6,children:(0,m.jsx)(l.Z,b(b({},o),{},{name:"priority",onChange:function(e){return i((function(t){return b(b({},t),{},{priority:e.target.value||null})}))},options:[{text:"Priority",value:""}].concat((0,a.Z)(f.t))}))}),(0,m.jsx)(u.Z,{md:6,children:(0,m.jsx)(d.P,b(b({},o),{},{accountId:s.accountId,errors:b({},n),label:"",name:"assignedUser",onChange:function(e){return i((function(t){return b(b({},t),{},{userId:(null===e||void 0===e?void 0:e.value)||null})}))},placeholder:"Assigned User",type:"user"}))})]})]})},x={action:null,priority:null,q:null,status:"open",userId:null,filterType:"tasks_table"},O=function(){return(0,m.jsx)(i.J,{FiltersComp:j,initialFilters:x,showMyTaskButton:!0,TableComp:s.B})},Z=function(){return(0,m.jsx)(r.Z,{pageHeading:{heading:"Tasks"},View:(0,m.jsx)(O,{})})}},24060:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/tasks",function(){return n(2312)}])}},function(e){e.O(0,[367,284,4195,5312,7287,2002,3086,7134,3486,9082,3515,4712,1265,6996,9666,4177,7431,5146,899,3016,9774,2888,179],(function(){return t=24060,e(e.s=t);var t}));var t=e.O();_N_E=t}]);