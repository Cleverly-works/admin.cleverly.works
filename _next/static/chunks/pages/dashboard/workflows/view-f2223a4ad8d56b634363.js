(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{93633:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var i=n(81322);function r(e,t){return(0,i.r)(e,t,!1)}},58448:function(e,t,n){"use strict";var i,r,o=n(30168),a=n(67294),l=n(45697),s=n(24237),c=function(e){var t=e.align,n=e.children;return a.createElement(d,{align:t,"aria-label":"Toolbar with button groups",role:"toolbar"},a.createElement(u,{role:"group","aria-label":"First group"},n))};c.displayName="ButtonToolbar";var d=s.ZP.div(i||(i=(0,o.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: ",";\n"])),(function(e){return e.align})),u=s.ZP.div(r||(r=(0,o.Z)(["\n  display: inline-flex;\n  position: relative;\n  vertical-align: middle;\n\n  a:hover {\n    color: white;\n  }\n\n  &:last-child > div:last-of-type button {\n    border-top-right-radius: 0.25rem;\n    border-bottom-right-radius: 0.25rem;\n    border-right: 0;\n  }\n\n  a:not(:last-child),\n  button:not(:last-child) {\n    border-bottom-right-radius: 0;\n    border-right: 1px solid ",";\n    border-top-right-radius: 0;\n  }\n\n  a:not(:first-child),\n  button:not(:first-child),\n  a:not(:first-child) button,\n  div:not(:first-child) button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    margin-left: 0;\n  }\n\n  a:not(:last-child) button,\n  div:not(:last-child) button {\n    border-bottom-right-radius: 0;\n    border-right: 1px solid ",";\n    border-top-right-radius: 0;\n  }\n"])),(function(e){return e.theme.COLOUR.light}),(function(e){return e.theme.COLOUR.light}));c.propTypes={align:l.string,children:l.node.isRequired},c.defaultProps={align:"center"},t.Z=c},22796:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i,r,o,a,l,s=n(42982),c=n(30168),d=n(67294),u=n(45697),p=n(24237),g=n(82373),m=n(34974),f={xxsSize:"0.25rem",xsSize:"0.5rem",smSize:"0.75rem",mdSize:"1rem",lgSize:"1.5rem",xlSize:"2rem",xxlSize:"2.5rem",xxxlSize:"3rem"},b=function(e){var t="",n=0;return e.forEach((function(e){e.v&&(n++,t+="".concat(e.k,": ").concat(f[e.v+"Size"],";\n      ").concat(m.Z.desktop(i||(i=(0,c.Z)(["\n        ",": calc("," * 2);"])),e.k,f[e.v+"Size"]),"\n      "))})),0===n?(0,p.iv)(r||(r=(0,c.Z)(["\n      margin-bottom: ",";\n      ","\n    "])),f.mdSize,m.Z.desktop(o||(o=(0,c.Z)(["\n        margin-bottom: calc("," * 2);"])),f.mdSize)):(0,p.iv)(a||(a=(0,c.Z)(["\n    ","\n  "])),t)},v=function(e){var t=e.children,n=e.className,i=e.content,r=e.margin,o=e.marginX,a=e.marginY,l=e.marginTop,s=e.marginRight,c=e.marginBottom,u=e.marginLeft,p=e.padding,g=e.paddingX,m=e.paddingY,f=e.paddingTop,b=e.paddingRight,v=e.paddingBottom,h=e.paddingLeft;return d.createElement(y,{className:n,margin:r,marginX:o,marginY:a,marginTop:l,marginRight:s,marginBottom:c,marginLeft:u,padding:p,paddingX:g,paddingY:m,paddingTop:f,paddingRight:b,paddingBottom:v,paddingLeft:h},i||t)};v.displayName="Space";var y=p.ZP.div(l||(l=(0,c.Z)(["\n  margin: 0;\n  padding: 0;\n  ","\n"])),(function(e){var t=e.margin,n=e.marginBottom,i=e.marginTop,r=e.marginLeft,o=e.marginRight,a=e.marginX,l=e.marginY,c=e.padding,d=e.paddingBottom,u=e.paddingLeft,p=e.paddingRight,g=e.paddingTop,m=e.paddingX,f=e.paddingY;return b([{k:"margin",v:t},{k:"margin-bottom",v:n},{k:"margin-left",v:r},{k:"margin-right",v:o},{k:"margin-top",v:i},{k:"padding",v:c},{k:"padding-bottom",v:d},{k:"padding-left",v:u},{k:"padding-right",v:p},{k:"padding-top",v:g}].concat((0,s.Z)(l?[{k:"margin-top",v:l},{k:"margin-bottom",v:l}]:[]),(0,s.Z)(a?[{k:"margin-left",v:a},{k:"margin-right",v:a}]:[]),(0,s.Z)(f?[{k:"padding-top",v:f},{k:"padding-bottom",v:f}]:[]),(0,s.Z)(m?[{k:"padding-left",v:m},{k:"padding-right",v:m}]:[])))}));v.propTypes={children:u.node,content:u.string,margin:(0,u.oneOf)(Object.values(g.Z)),marginY:(0,u.oneOf)(Object.values(g.Z)),marginX:(0,u.oneOf)(Object.values(g.Z)),marginTop:(0,u.oneOf)(Object.values(g.Z)),marginRight:(0,u.oneOf)(Object.values(g.Z)),marginBottom:(0,u.oneOf)(Object.values(g.Z)),marginLeft:(0,u.oneOf)(Object.values(g.Z)),padding:(0,u.oneOf)(Object.values(g.Z)),paddingY:(0,u.oneOf)(Object.values(g.Z)),paddingX:(0,u.oneOf)(Object.values(g.Z)),paddingTop:(0,u.oneOf)(Object.values(g.Z)),paddingRight:(0,u.oneOf)(Object.values(g.Z)),paddingBottom:(0,u.oneOf)(Object.values(g.Z)),paddingLeft:(0,u.oneOf)(Object.values(g.Z))};var h=v},88280:function(e,t,n){"use strict";var i,r,o=n(30168),a=n(24237);t.Z=function(e){var t=e.theme,n=e.isTyping,l=e.withAddon;return(0,a.iv)(i||(i=(0,o.Z)(["\n    border-color: ",";\n    border-image: initial;\n    border-style: solid;\n    border-left-width: ",";\n    &:hover {\n      border-color: ",";\n    }\n    &:focus {\n      border-color: ",";\n    }\n\n    ","\n  "])),t.COLOUR.danger,!l&&"0.25rem",!n&&t.COLOUR.danger,t.COLOUR.danger,!0===n&&(0,a.iv)(r||(r=(0,o.Z)(["\n      box-shadow: 0px 0px 4px ",";\n    "])),t.COLOUR.danger))}},66918:function(e,t,n){"use strict";var i=n(4942),r=n(67294),o=n(45697),a=n(11570),l=n(4513),s=n(98479),c=n(97721),d=n(22796),u=n(37815);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.children,n=e.meta,i=e.pageHeading,o=e.resultAlert,u=e.View,p=o.context,m=o.message,f=g(g({},{description:"Admin",path:"/",title:"Admin"}),n);return r.createElement(r.Suspense,{fallback:r.createElement(c.Z,{indicator:r.createElement(l.Z,null)})},r.createElement(s.Z,{fluid:!0,meta:f,pageHeading:i},u||t,m&&r.createElement(r.Fragment,null,r.createElement(d.Z,null),r.createElement(a.Z,{content:m,context:p}))))};m.displayName="Dashboard",m.propTypes={children:o.node,meta:(0,o.shape)({description:o.string,path:o.string,title:o.string}),pageHeading:(0,o.shape)({center:o.bool,context:(0,o.oneOf)(Object.values(u.Z)),divider:o.bool,heading:o.any.isRequired,help:o.bool,helpContent:o.any,strapline:o.string}),resultAlert:(0,o.shape)({context:o.string,message:o.string}),View:o.node},m.defaultProps={resultAlert:{context:"success",message:""}},t.Z=m},98479:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(30168),r=n(67294),o=n(45697),a=n(24237),l=n(17743),s=n(44902),c=n(9008),d=function(e){var t=e.canonical,n=e.brand,i=e.meta,o=i.description,a=i.path,l=i.title;return r.createElement(c.default,null,r.createElement("title",null,l," | ",n),r.createElement("meta",{name:"description",content:o,key:"description"}),r.createElement("meta",{rel:"canonical",href:t+a,key:"canonical"}),r.createElement("meta",{property:"og:title",content:l}),r.createElement("meta",{property:"og:description",content:o}),r.createElement("meta",{property:"og:url",content:t+a}),r.createElement("meta",{name:"twitter:url",content:t+a}),r.createElement("meta",{name:"twitter:title",content:l}),r.createElement("meta",{name:"twitter:description",content:o}))};d.displayName="MetaHead",d.propTypes={brand:o.string.isRequired,meta:o.object.isRequired};var u,p=d,g=n(33120),m=n(22796),f=n(37815),b=n(82373),v=function(e){var t=e.children,n=e.fluid,i=e.meta,o=e.padding,a=e.pageHeading,c=(0,r.useContext)(l.Z).config,d=c.Brand,u=c.Canonical;return r.createElement(y,null,o&&r.createElement(m.Z,{paddingTop:o}),i&&r.createElement(p,{canonical:u,brand:d.name,meta:i}),r.createElement(s.Z,{fluid:n},a&&r.createElement(g.Z,a),t),o&&r.createElement(m.Z,{paddingBottom:o}))};v.displayName="Page";var y=a.ZP.div(u||(u=(0,i.Z)(["\n  background-color: ",";\n"])),(function(e){return e.theme.PAGE.backGroundColour}));v.propTypes={children:o.node.isRequired,fluid:o.bool,meta:(0,o.shape)({description:o.string.isRequired,path:o.string,title:o.string.isRequired}),padding:(0,o.oneOfType)([o.bool,(0,o.oneOf)(Object.values(b.Z))]),pageHeading:(0,o.shape)({center:o.bool,context:(0,o.oneOf)(Object.values(f.Z)),divider:o.bool,heading:o.any.isRequired,help:o.bool,helpContent:o.any,strapline:o.string})},v.defaultProps={fluid:!1,padding:"md"};var h=v},33120:function(e,t,n){"use strict";var i,r,o,a,l,s=n(30168),c=n(67294),d=n(45697),u=n(24237),p=n(77417),g=n(11417),m=n(37815),f=function(e){var t=e.center,n=e.children,i=e.context,r=e.divider,o=e.heading,a=e.help,l=e.helpContent,s=e.strapline;return c.createElement(b,{center:t,divider:r},c.createElement(v,null,c.createElement(h,{content:o,context:i,pageHeading:!0}),s&&c.createElement("div",null,s)),(n||a)&&c.createElement(y,null,n||l),r&&c.createElement(Z,{size:"md"}))};f.displayName="PageHeading";var b=u.ZP.header(i||(i=(0,s.Z)(["\n  align-items: center;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n  margin-bottom: ",";\n  text-align: ",";\n"])),(function(e){return!e.divider&&"2rem"}),(function(e){return e.center&&"center"})),v=u.ZP.span(r||(r=(0,s.Z)(["\n  flex: 1;\n"]))),y=u.ZP.span(o||(o=(0,s.Z)(["\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n"]))),h=(0,u.ZP)(g.Z)(a||(a=(0,s.Z)(["\n  margin-bottom: ",";\n"])),(function(e){return e.divider?"0.5rem":"0"})),Z=(0,u.ZP)(p.Z)(l||(l=(0,s.Z)(["\n  width: 100%;\n"])));f.propTypes={center:d.bool,children:d.element,context:(0,d.oneOf)(Object.values(m.Z)),divider:d.bool,heading:d.any.isRequired,help:d.bool,helpContent:d.any,strapline:d.string},f.defaultProps={center:!1,context:"primary",divider:!0,help:!1,helpContent:"",strapline:""},t.Z=f},18862:function(e,t,n){"use strict";var i=n(64509);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date(e),r=n.getFullYear(),o=""+(n.getMonth()+1),a=""+n.getDate();o.length<2&&(o="0"+o),a.length<2&&(a="0"+a);var l=[r,o,a].join("-");return t?l+" "+(0,i.Z)(e):l}},64509:function(e,t){"use strict";t.Z=function(e){var t=new Date(e),n=""+t.getHours(),i=""+t.getMinutes();return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),"".concat(n,":").concat(i)}},51681:function(e,t,n){"use strict";n.d(t,{qZ:function(){return i},Me:function(){return r},aW:function(){return o}});var i=[{entity:"Asset",event:"assetVacated",title:"Asset Vacated"},{entity:"Job",event:"issueReported",title:"Issue reported"},{entity:"Job",event:"jobRaised",title:"Job raised"},{entity:"Job",event:"supplierBookingAccepted",title:"Supplier accepted job offer"},{entity:"Job",event:"jobCompleted",title:"Supplier completed job"},{entity:"Job",event:"jobReportSent",title:"Supplier sent job report"},{entity:"Job",event:"jobCustomerPaid",title:"Customer paid invoice"},{entity:"Job",event:"jobDisputeAdded",title:"Job dispute submitted"},{entity:"Job",event:"quoteCreated",title:"Quote Created"},{entity:"Job",event:"quoteAccepted",title:"Quote accepted by customer"},{entity:"Job",event:"quoteRejected",title:"Quote rejected by customer"},{entity:"Sensor",event:"sensorOutOfBounds",title:"Sensor out of bounds"},{entity:"Supplier",event:"supplierCreated",title:"New supplier registered"},{entity:"Supplier",event:"supplierProfileCompleted",title:"Supplier completed profile"}],r=[{entity:"Account",for:["Asset","Job","Sensor"],name:"customer",title:"Customer is",type:"select"},{entity:"Account",for:["Job"],name:"supplier",title:"Supplier is",type:"select"},{entity:"Location",for:["Asset","Job","Sensor"],name:"property",title:"Property is",type:"select"},{entity:"Service",for:["Job"],name:"service",title:"Service line is",type:"select"},{entity:"Asset",for:["Asset","Job","Sensor"],name:"asset",title:"Asset is",type:"select"},{entity:"Sensor",for:["Sensor"],name:"sensor",title:"Sensor is",type:"select"},{entity:"Sensor",for:["Sensor"],name:"sensorAbove",title:"Sensor reading is above",type:"text"},{entity:"Sensor",for:["Sensor"],name:"sensorBelow",title:"Sensor reading is below",type:"text"},{entity:"SLA",for:["Job"],name:"sla",title:"Priority is",type:"select"},{entity:"User",for:["Job","Supplier"],name:"manager",title:"Assigned to manager",type:"select"},{entity:"Job",for:["Job"],name:"title",title:"Job title contains",type:"text"},{entity:"Job",for:["Job"],name:"description",title:"Job description contains",type:"text"},{entity:"PostcodeArea",for:["Asset","Supplier","Sensor"],name:"coverage",title:"Coverage area is",type:"select"},{entity:"Address",for:["Supplier","Sensor"],name:"city",title:"City is",type:"text"}],o=[{action:"createJob",entity:"Job",for:["Asset","Sensor"],title:"Create a new job",type:"none"},{action:"assignManager",entity:"User",for:["Asset","Job","Supplier","Sensor"],name:"manager",title:"Assign Manager",type:"select"},{action:"assignSupplier",entity:"Account",for:["Asset","Job","Sensor"],name:"supplier",title:"Assign Supplier",type:"select"},{action:"assignPriority",entity:"SLA",for:["Asset","Job","Sensor"],name:"sla",title:"Assign Priority",type:"select"},{action:"createTask",entity:"Task",for:["Asset","Job","Supplier","Sensor"],name:"task",title:"Create a new task",type:"text"},{action:"sendReminder",entity:"Communication",for:["Job","Supplier"],name:"message",title:"Send a reminder",type:"text"}]},30016:function(e,t,n){"use strict";n.d(t,{Z3:function(){return c},CS:function(){return d},mJ:function(){return p}});var i,r,o,a,l=n(52209),s=n(54397),c=(0,s.Ps)(i||(i=(0,l.Z)(["\n  fragment WorkflowFields on Workflow {\n    id\n    title\n    event\n    status\n    createdAt\n  }\n"]))),d=(0,s.Ps)(r||(r=(0,l.Z)(["\n  fragment WorkflowActionFields on WorkflowAction {\n    id\n    action\n    actionEntity\n    actionEntityId\n    actionValue\n    createdAt\n  }\n"]))),u=(0,s.Ps)(o||(o=(0,l.Z)(["\n  fragment WorkflowConditionFields on WorkflowCondition {\n    id\n    condition\n    conditionEntity\n    conditionEntityId\n    conditionValue\n    createdAt\n  }\n"]))),p=(0,s.Ps)(a||(a=(0,l.Z)(["\n  query GetWorkflow($id: Int!) {\n    workflow: Workflow_by_pk(id: $id) {\n      ...WorkflowFields\n      actions: WorkflowActions {\n        ...WorkflowActionFields\n      }\n      conditions: WorkflowConditions {\n        ...WorkflowConditionFields\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"])),c,d,u)},23443:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var i=n(66918),r=n(11163),o=n(93633),a=n(30016),l=n(78215),s=n(2356),c=n(80284),d=n(18944),u=n(18862),p=n(58448),g=n(14347),m=n(52002),f=n(51681),b=n(85893),v=function(e){var t,n=e.workflow,i=(null===(t=f.qZ.find((function(e){return e.event===n.event})))||void 0===t?void 0:t.title)||"",o=[{key:"Name",value:n.title},{key:"Event",value:i}];n.conditions&&n.conditions.forEach((function(e,t){var n=f.Me.find((function(t){return t.name===e.condition}));o.push({key:"Condition #".concat(t+1),value:"".concat(n.title,' "').concat(e.conditionValue,'"')})})),n.actions&&n.actions.forEach((function(e,t){var n=f.aW.find((function(t){return t.action===e.action})),i=e.actionValue?"".concat(n.title,' "').concat(e.actionValue,'"'):n.title;o.push({key:"Action #".concat(t+1),value:i})})),o.push({key:"Status",value:n.status},{key:"Date Added",value:(0,u.Z)(n.createdAt)});var a=function(e){e.stopPropagation(),r.default.push("".concat("/dashboard/workflows/","manage?id=").concat(n.id))},l=function(){return(0,b.jsx)(p.Z,{children:(0,b.jsx)(g.Z,{context:"secondary",content:"Edit",onClick:a,size:"sm"})})};return(0,b.jsx)(c.Z,{button:"Edit",toolbar:(0,b.jsx)(l,{}),handleClick:a,open:!0,title:"Workflow",children:(0,b.jsx)(m.Z,{rows:o})})},y=function(){var e=(0,r.useRouter)().query,t=(0,o.a)(a.mJ,{variables:{id:e.id}}),n=t.loading,i=t.data,u=(i=void 0===i?{workflow:[]}:i).workflow;return!n&&(0,b.jsxs)(l.Z,{children:[(0,b.jsx)(s.Z,{md:4,children:(0,b.jsx)(v,{id:e.id,workflow:u})}),(0,b.jsx)(s.Z,{md:8,children:(0,b.jsx)(c.Z,{open:!0,title:"Workflow Logs",children:(0,b.jsx)(d.Z,{children:"This workflow hasn't run yet"})})})]})},h=function(){return(0,b.jsx)(i.Z,{View:(0,b.jsx)(y,{})})}},73339:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/workflows/view",function(){return n(23443)}])}},function(e){e.O(0,[284,5312,2002,9774,2888,179],(function(){return t=73339,e(e.s=t);var t}));var t=e.O();_N_E=t}]);