(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{93633:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(81322);function i(e,t){return(0,r.r)(e,t,!1)}},71247:function(e,t,n){"use strict";var r=n(87462),i=n(70885),o=n(45987),a=n(67294),u=n(45697),c=n(42778),s=n(82373),l=n(49787),d=["disabled","errors","helperMessage","name","placeholder","readOnly","regExp","register","size","validate","withAddon"],p=function(e){var t=e.disabled,n=e.errors,u=e.helperMessage,s=e.name,p=e.placeholder,f=e.readOnly,m=(e.regExp,e.register),y=e.size,v=(e.validate,e.withAddon),g=(0,o.Z)(e,d),b=(0,a.useState)(!1),h=(0,i.Z)(b,2),O=h[0],j=h[1];return a.createElement(c.Z,(0,r.Z)({"aria-label":s,component:l.Z,disabled:t,helperMessage:u,onKeyDown:function(e){j(!0)},onBlur:function(){j(!1)},errors:n[s],isTyping:O,key:s,name:s,placeholder:p,readOnly:f,register:m,size:y,withAddon:v},g))};p.displayName="FormField",p.propTypes={accept:u.string,autoComplete:(0,u.oneOfType)([u.bool,u.string]),autoFocus:u.bool,disabled:u.bool,errors:u.object.isRequired,helperMessage:u.string,label:u.string,name:u.string.isRequired,placeholder:u.string,readOnly:u.bool,register:u.func.isRequired,size:(0,u.oneOf)([s.Z.SM,s.Z.MD,s.Z.LG]),style:u.object,textAlign:u.string,type:u.string,value:(0,u.oneOfType)([u.string,u.number,u.bool,(0,u.arrayOf)((0,u.oneOfType)([u.string,u.number,u.bool]))])},p.defaultProps={autoComplete:"off",autoFocus:!1,disabled:!1,errors:{},readOnly:!1,type:"text"},t.Z=p},49787:function(e,t,n){"use strict";var r,i,o,a,u,c,s=n(30168),l=n(24237),d=n(38425),p=n(88280),f=n(82373),m=l.ZP.input.attrs((function(e){return{autoComplete:"off",autoFocus:!1}}))(r||(r=(0,s.Z)(["\n  ","\n\n  ","\n\n    ","\n"])),(function(e){return(0,d.Z)(e)}),(function(e){return e.errors&&(0,l.iv)(i||(i=(0,s.Z)(["\n      ","\n    "])),(function(e){return(0,p.Z)(e)}))}),(function(e){switch(e.size){case f.Z.SM:return(0,l.iv)(o||(o=(0,s.Z)(["\n          height: 1.5rem;\n        "])));case f.Z.MD:return(0,l.iv)(a||(a=(0,s.Z)(["\n          height: 1.875rem;\n        "])));case f.Z.LG:return(0,l.iv)(u||(u=(0,s.Z)(["\n          height: 2.25rem;\n        "])));default:return(0,l.iv)(c||(c=(0,s.Z)(["\n          height: 2.25rem;\n        "])))}}));t.Z=m},21269:function(e,t,n){"use strict";var r,i,o,a,u,c=n(30168),s=n(67294),l=n(45697),d=n(24237),p=n(37815),f=n(82373),m=function(e){var t=e.addonType,n=(e.className,e.children),r=e.context,i=e.error,o=e.size,a=e.text,u=e.theme;return s.createElement(y,{addonType:t,className:t,children:n,context:r,error:i,size:o,text:a,theme:u})};m.displayName="InputGroupAddon";var y=d.ZP.div(r||(r=(0,c.Z)(["\n  align-items: center;\n  display: flex;\n\n  & > * {\n    height: 100%;\n  }\n\n  ","\n  ","\n\n  &,\n  button {\n    ","\n\n    ","\n  }\n"])),(function(e){var t=e.theme,n=t.COLOUR,r=t.FORM_ELEMENTS_STYLES,o=e.error;return e.text&&(0,d.iv)(i||(i=(0,c.Z)(["\n      background-color: ",";\n      border: 1px solid ",";\n      border-radius: ",";\n      color: ",";\n      display: flex;\n      font-size: 0.75rem;\n      font-weight: 400;\n      line-height: 1;\n      margin-bottom: 0;\n      padding: 0.375rem 1rem;\n      text-align: center;\n      transition: background-color 0.15s linear;\n      white-space: nowrap;\n    "])),o?n.danger:n.light,o?n.danger:n.dark,r.inputBorderRadius,o?n.light:n.dark)}),(function(e){return e.size===f.Z.SM&&(0,d.iv)(o||(o=(0,c.Z)(["\n      font-size: 0.625rem;\n      padding: 0 0.75rem;\n    "])))}),(function(e){return"prepend"===e.addonType&&(0,d.iv)(a||(a=(0,c.Z)(["\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n        margin-right: -1px;\n      "])))}),(function(e){return"append"===e.addonType&&(0,d.iv)(u||(u=(0,c.Z)(["\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n        margin-left: -1px;\n      "])))}));m.propTypes={addonType:(0,l.oneOf)(["prepend","append"]),className:l.any,children:l.node,context:(0,l.oneOf)(Object.values(p.Z)),text:l.bool},m.defaultProps={addonType:"append",context:"light"},t.Z=m},44442:function(e,t,n){"use strict";var r,i,o=n(30168),a=n(67294),u=n(45697),c=n(24237),s=function(e){var t=e.children,n=e.error,r=e.fullWidth,i=e.size,o=e.theme;return a.createElement(l,{children:t,error:n,fullWidth:r,size:i,theme:o})};s.displayName="InputGroup";var l=c.ZP.div(r||(r=(0,o.Z)(["\n  align-items: stretch;\n  display: flex;\n  flex-wrap: wrap;\n  position: relative;\n  width: 100%;\n\n  input {\n    ","\n    min-width: 0;\n    margin-bottom: 0;\n    position: relative;\n\n    :not(:first-child) {\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n    }\n\n    :first-child {\n      border-top-right-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n\n    :not(:last-child) {\n      border-top-right-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n  ","\n"])),(function(e){return e.fullWidth?"flex: 1 1 0%;":"width: auto;"}),(function(e){var t=e.error,n=e.theme;return t&&n&&(0,c.iv)(i||(i=(0,o.Z)(["\n      &:hover {\n        .prepend,\n        .append {\n          background: ",";\n          border-color: ",";\n        }\n      }\n    "])),n.COLOUR.danger,n.COLOUR.danger)}));s.propTypes={fullWidth:u.bool,size:u.string},s.defaultProps={fullWidth:!0,size:"md"},t.Z=s},65375:function(e,t,n){"use strict";var r,i=n(30168),o=n(67294),a=n(45697),u=n(24237),c=n(22796),s=n(18944),l=function(e){var t=e.children,n=e.id,r=e.label,i=e.show,a=e.size;return o.createElement(d,{hasChild:t,htmlFor:n,show:i},o.createElement(c.Z,{marginBottom:"xs"},o.createElement(s.Z,{size:null!==a&&void 0!==a?a:"md",colour:"darkText",content:r})),t)};l.displayName="FormLabel";var d=u.ZP.label(r||(r=(0,i.Z)(["\n  display: ",";\n  margin-bottom: ",";\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n"])),(function(e){return e.show?"block":"none"}),(function(e){return e.hasChild?"1rem":"0"}));l.propTypes={children:a.node,id:a.string,label:a.string,show:a.bool},l.defaultProps={show:!0},t.Z=l},91126:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(67294),i=n(45697),o=n(58448),a=n(37815),u=n(71070),c=function(e){var t=e.children,n=e.tooltip;return r.createElement(u.Z,{content:n},t)};c.displayName="TableActionsTooltip",c.propTypes={children:i.node.isRequired,tooltip:i.string.isRequired};var s,l,d=c,p=n(30168),f=n(11163),m=n(24237),y=n(14347),v=n(55657),g=(0,r.forwardRef)((function(e,t){var n,i=e.context,o=e.disabled,a=e.icon,u=e.numberOverlay,c=e.onClick,s=e.overlayCustom,l=e.row,d=e.to,p=Array.isArray(a),m=l[u]||s,y=c?function(e){return c(e,l)}:(n="".concat(d,"?id=").concat(l.id),function(e){e.preventDefault(),e.stopPropagation(),f.default.push(n)});return r.createElement(b,{forwardedAs:"a",context:i,disabled:o,itemCount:m,onClick:y,ref:t,size:"sm"},r.createElement(h,{icon:a?p?a[1]:a:null,prefix:a&&p&&a[0]}))})),b=(0,m.ZP)(y.Z)(s||(s=(0,p.Z)(["\n  font-size: 14px;\n  padding: 0.5rem;\n  position: relative;\n"]))),h=(0,m.ZP)(v.Z)(l||(l=(0,p.Z)(["\n  pointer-events: 'none';\n"])));g.propTypes={context:(0,i.oneOf)(Object.values(a.Z)),disabled:i.bool,icon:(0,i.oneOfType)([i.array,i.string]),numberOverlay:i.string,onClick:i.func,overlayCustom:i.string,row:i.object.isRequired,to:i.string};var O=g,j=function(e){var t,n=e.align,i=e.data,a=e.row;return t="function"===typeof i?i()(a):i,r.createElement(o.Z,{align:n},t.map((function(e,t){var n=e.context,i=e.disabled,o=e.icon,u=e.numberOverlay,c=e.onClick,s=e.overlayCustom,l=e.to,p=e.tooltip;return r.createElement(d,{key:t,tooltip:p},r.createElement(O,{context:n,disabled:i,icon:o,numberOverlay:u,onClick:c,overlayCustom:s,row:a,to:l}))})))};j.displayName="TableActions",j.propTypes={align:i.string,data:(0,i.arrayOf)((0,i.shape)({content:i.string,context:(0,i.oneOf)(Object.values(a.Z)),disabled:i.bool,icon:(0,i.oneOfType)([i.array,i.string]),numberOverlay:i.string,onClick:i.func,overlayCustom:i.string,to:i.string,tooltip:i.string})).isRequired,row:i.object.isRequired},j.defaultProps={align:"flex-start"};var x=j},18862:function(e,t,n){"use strict";var r=n(64509);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date(e),i=n.getFullYear(),o=""+(n.getMonth()+1),a=""+n.getDate();o.length<2&&(o="0"+o),a.length<2&&(a="0"+a);var u=[i,o,a].join("-");return t?u+" "+(0,r.Z)(e):u}},64509:function(e,t){"use strict";t.Z=function(e){var t=new Date(e),n=""+t.getHours(),r=""+t.getMinutes();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),"".concat(n,":").concat(r)}},63867:function(e,t){"use strict";t.Z=function(e){var t=window.location,n=t.protocol,r=t.host,i=t.pathname,o="".concat(n,"//").concat(r).concat(i).concat(e);window.history.pushState({path:o},"",o)}},66805:function(e,t,n){"use strict";n.d(t,{H:function(){return l}});var r=n(92809),i=n(77417),o=n(58448),a=n(14347),u=n(85893);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t=e.children,n=e.content,r=e.context,c=e.data,l=e.disabled,d=e.handleClick,p=e.size,f=e.type;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.Z,{size:"sm"}),(0,u.jsxs)(o.Z,{align:"flex-end",children:[t,(0,u.jsx)(a.Z,s({content:n,context:r,disabled:l,onClick:d,size:p,type:f},c))]})]})};l.defaultProps={content:"Add",context:"secondary",disabled:!1,size:"sm",type:"button"}},69399:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var r=n(46482),i=n(85893),o=function(e){var t=e.errors,n=e.name,o=e.onChange,a=e.options,u=e.register;return(0,i.jsx)(r.Z,{errors:t,name:n,onChange:o,options:a,register:u})};o.defaultProps={name:"status"}},8163:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[{context:"secondary",icon:["fas","edit"],onClick:t.onEditClick,to:"".concat(e,"manage"),tooltip:"Edit"}]}},41482:function(e,t,n){"use strict";n.d(t,{l:function(){return y}});var r=n(92809),i=n(78215),o=n(2356),a=n(46482),u=n(22796),c=n(17044),s=n(27567),l=n(75838),d=n(69399),p=n(85893);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.errors,n=e.register,r=e.setFilters,f={errors:t,register:n};return(0,p.jsxs)(i.Z,{children:[(0,p.jsxs)(o.Z,{md:6,children:[(0,p.jsx)(a.Z,m(m({},f),{},{name:"countryId",onChange:function(e){return r((function(t){return m(m({},t),{},{countryId:e.target.value||null})}))},options:c.O})),(0,p.jsx)(u.Z,{marginTop:"sm",children:(0,p.jsx)(a.Z,m(m({},f),{},{name:"currencyId",onChange:function(e){return r((function(t){return m(m({},t),{},{currencyId:e.target.value||null})}))},options:s.m}))})]}),(0,p.jsx)(o.Z,{md:6,children:(0,p.jsx)(d.r,m(m({},f),{},{onChange:function(e){return r((function(t){return m(m({},t),{},{status:e.target.value||null})}))},options:l.bg}))})]})}},1135:function(e,t,n){"use strict";n.d(t,{zb:function(){return s},mh:function(){return l},E_:function(){return d}});var r,i,o,a,u=n(52209),c=n(54397),s=(0,c.Ps)(r||(r=(0,u.Z)(['\n  query GetServices(\n    $countryId: Int\n    $currencyId: Int\n    $limit: Int\n    $offset: Int\n    $q: String\n    $status: String\n    $orderBy: Service_order_by!\n  ) {\n    services: Service(\n      limit: $limit\n      offset: $offset\n      where: {\n        countryId: { _eq: $countryId }\n        currencyId: { _eq: $currencyId }\n        name: { _ilike: $q }\n        status: { _eq: $status }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      name\n      customerDayRate\n      customerHourRate\n      supplierDayRate\n      supplierHourRate\n      status\n      createdAt\n      country: Country {\n        id\n        name\n      }\n      currency: Currency {\n        id\n        symbol\n      }\n      accounts: Service_Entities(where: { entity: { _eq: "Account" } }) {\n        id\n        dayRate\n        dayRateOOH\n        dayRatePremium\n        hourRate\n        hourRateOOH\n        hourRatePremium\n        minimumInterval\n        minimumLength\n        callOutHourRate\n        callOutHourRateOOH\n        callOutHourRatePremium\n        notes\n        delivery\n        createdAt\n        updatedAt\n        entity\n        entityId\n        serviceId\n        service: Service {\n          id\n          name\n          countryId\n          currencyId\n          customerDayRate\n          customerDayRateOOH\n          customerDayRatePremium\n          customerHourRate\n          customerHourRateOOH\n          customerHourRatePremium\n          supplierDayRate\n          supplierDayRateOOH\n          supplierDayRatePremium\n          supplierHourRate\n          supplierHourRateOOH\n          supplierHourRatePremium\n          minimumInterval\n          minimumLength\n        }\n        account: Account {\n          id\n          type\n          name\n        }\n      }\n    }\n    meta: Service_aggregate(\n      where: {\n        countryId: { _eq: $countryId }\n        currencyId: { _eq: $currencyId }\n        name: { _ilike: $q }\n        status: { _eq: $status }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']))),l=((0,c.Ps)(i||(i=(0,u.Z)(['\n  query GetService($id: Int!) {\n    service: Service_by_pk(id: $id) {\n      id\n      name\n      countryId\n      currencyId\n      customerDayRate\n      customerDayRateOOH\n      customerDayRatePremium\n      customerHourRate\n      customerHourRateOOH\n      customerHourRatePremium\n      supplierDayRate\n      supplierDayRateOOH\n      supplierDayRatePremium\n      supplierHourRate\n      supplierHourRateOOH\n      supplierHourRatePremium\n      minimumInterval\n      minimumLength\n      accounts: Service_Entities(where: { entity: { _eq: "Account" } }) {\n        id\n        dayRate\n        dayRateOOH\n        dayRatePremium\n        hourRate\n        hourRateOOH\n        hourRatePremium\n        minimumInterval\n        minimumLength\n        callOutHourRate\n        callOutHourRateOOH\n        callOutHourRatePremium\n        notes\n        delivery\n        createdAt\n        updatedAt\n        entity\n        entityId\n        serviceId\n        service: Service {\n          id\n          name\n          countryId\n          currencyId\n          customerDayRate\n          customerDayRateOOH\n          customerDayRatePremium\n          customerHourRate\n          customerHourRateOOH\n          customerHourRatePremium\n          supplierDayRate\n          supplierDayRateOOH\n          supplierDayRatePremium\n          supplierHourRate\n          supplierHourRateOOH\n          supplierHourRatePremium\n          minimumInterval\n          minimumLength\n        }\n      }\n    }\n  }\n']))),(0,c.Ps)(o||(o=(0,u.Z)(["\n  mutation AddService($services: [Service_insert_input!]!) {\n    insert_Service(objects: $services) {\n      returning {\n        id\n      }\n    }\n  }\n"])))),d=(0,c.Ps)(a||(a=(0,u.Z)(["\n  mutation UpdateService($id: Int!, $changes: Service_set_input) {\n    update_Service_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"])))},81185:function(e,t,n){"use strict";n.d(t,{t:function(){return c}});var r=n(67294),i=n(11163),o=n(30493),a=n(52002),u=n(85893),c=(0,r.forwardRef)((function(e,t){var n=e.columns,c=e.history,s=e.initialSort,l=e.isResetTable,d=e.loading,p=e.meta,f=e.paginationSize,m=e.refetch,y=e.rowClick,v=e.rows,g=(0,i.useRouter)(),b=g.query,h=void 0===b?{}:b,O=(0,r.useState)(parseInt(null===h||void 0===h?void 0:h.page,10)||1),j=O[0],x=O[1],Z=(0,r.useState)(o.C1.paginationSize),w=Z[0],P=Z[1];s||(s={item:"createdAt",order:"desc"}),(0,r.useEffect)((function(){x(1)}),[l]);var R=(0,r.useState)({item:s.item,order:s.order}),S=R[0],C=R[1],D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=g.query,n=void 0===t?{}:t;e>1?n.page=e:delete n.page;var r=Object.keys(n).length>0;if(r){var i=Object.keys(n).map((function(t){return"page"===t?"".concat(t,"=").concat(e):"".concat(t,"=").concat(n[t])})).join("&&");return"?".concat(i)}return{}};(0,r.useImperativeHandle)(t,(function(){return{currentPage:j,pageSize:w,sort:S,resetPagination:function(){!function(){C({item:s.item,order:s.order}),x(1);var e=D();g.push(e),P(o.C1.paginationSize)}()}}}));return(0,u.jsx)(a.Z,{columns:n,loading:d,paginationSize:f,pagination:p&&!0,paginationProps:p&&{currentPage:j,onPageChange:function(e){var t=D(e);c&&g.push(t),x(e),m&&m()},onPageSizeChange:function(e){e!==o.C1.paginationSize&&(P(e),m&&m())},pageCount:Math.ceil(p.aggregate.totalCount/w),perPage:w},rowClick:y,rows:v,sort:S,setSort:function(e){var t=e.item,n=e.order;C({item:t,order:n}),m&&m()}})}));c.defaultProps={history:!0,loading:!0,paginationSize:!1}},49705:function(e,t,n){"use strict";n.d(t,{x:function(){return l}});var r=n(92809),i=n(67294),o=n(63867),a=n(30493),u=n(34770);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t,n,c,l,d,p,f,m,y,v,g,b=e.filters,h=e.initialSort,O=(0,i.useRef)();(0,i.useEffect)((function(){var e;(null===O||void 0===O||null===(e=O.current)||void 0===e?void 0:e.currentPage)>1&&(null===O||void 0===O||O.current.resetPagination(),(0,o.Z)("?page=1"))}),[b]);var j=h||{item:"createdAt",order:"desc"},x=(0,r.Z)({},(null===(t=O.current)||void 0===t?void 0:t.sort.item)||j.item,j.inneritem?(0,r.Z)({},j.inneritem,(null===(n=O.current)||void 0===n?void 0:n.sort.order)||j.order):(null===(c=O.current)||void 0===c?void 0:c.sort.order)||j.order);return{initialData:s(s({},b),{},{limit:"Infinity"===(null===(l=O.current)||void 0===l?void 0:l.pageSize)?null:parseInt(null===(d=O.current)||void 0===d?void 0:d.pageSize,10)||a.C1.paginationSize,offset:((null===(p=O.current)||void 0===p?void 0:p.currentPage)-1||0)*((null===(f=O.current)||void 0===f?void 0:f.pageSize)||a.C1.paginationSize),orderBy:(0,u.c)(null===(m=O.current)||void 0===m||null===(y=m.sort)||void 0===y||null===(v=y.item)||void 0===v?void 0:v.replace(/ORDER/i,null===(g=O.current)||void 0===g?void 0:g.sort.order))||x}),initialSort:h,ref:O}}},34770:function(e,t,n){"use strict";n.d(t,{s:function(){return r},c:function(){return i}});var r=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},i=function(e){try{return JSON.parse(e)}catch(t){return!1}}},17044:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var r=[{text:"Country",value:""},{text:"United Kingdom",value:1},{text:"Ireland",value:4}]},27567:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var r=[{text:"Currency",value:""},{text:"GBP",value:1},{text:"AUD",value:2},{text:"EUR",value:3}]},75838:function(e,t,n){"use strict";n.d(t,{bg:function(){return r},WG:function(){return i}});var r=[{text:"Status",value:""},{text:"Active",value:"active"},{text:"Inactive",value:"inactive"}],i=[{text:"Status",value:""},{text:"Open",value:"open"},{text:"Resolved",value:"resolved"},{text:"Closed",value:"closed"}]},70316:function(e,t,n){"use strict";n.d(t,{J:function(){return C}});var r=n(92809),i=n(80318),o=n(10219),a=n(11163),u=n(67294),c=n(78215),s=n(2356),l=n(42283),d=n(97202),p=n(80284),f=n(65375),m=n(10973),y=n(14347),v=n(66805),g=n(69119),b=n(23855),h=n(83894);function O(e,t,n){var r=(0,u.useState)((function(){if(JSON.parse(window.sessionStorage.getItem(e))&&!Object.values(JSON.parse(window.sessionStorage[e])).includes(n))return t;try{var r=JSON.parse(window.sessionStorage.getItem(e));return r&&(r.startDate=r.startDate?(0,g.Z)((0,b.Z)(r.startDate)):null,r.endDate=r.endDate?(0,h.Z)((0,b.Z)(r.endDate)):null),r||t}catch(i){return console.log(i),t}})),i=r[0],o=r[1];return[i,function(t){try{var n=t instanceof Function?t(i):t;o(n),window.sessionStorage.setItem(e,JSON.stringify(n))}catch(r){console.log(r)}}]}var j=n(85893);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){var t=e.initialValues,n=e.renderFilters,r=e.setFilters,o=e.lastQuery,a=e.filters,g=t.filterType,b=O("form_data",t,g),h=(0,i.Z)(b,2),x=h[0],w=h[1],P=(0,l.cI)({defaultValues:x||t}),R=P.control,S=P.errors,C=P.handleSubmit,D=P.register,H=P.reset,I=P.watch,E=P.setValue,_=Z(Z({},I()),{},{filterType:g});(0,u.useEffect)((function(){H(_)}),[H]),(0,u.useEffect)((function(){w(_)}),[a]);var k=function(e){var n=e.query;if(n!==o){var i={q:"%".concat(n,"%")||0},a=/^\d+$/.test(n);"id"in t&&(i.id=a?Number(n):null),"meta"in t&&(i.meta=a?{invoiceNumbers:[n]}:null),"jobNumber"in t&&(i.jobNumber=a?String(n):null,i.invoiceNumber=a?Number(n):null),(i.id||i.meta||i.jobNumber)&&(i.q=null),r((function(e){return Z(Z({},e),i)}))}};return(0,j.jsx)(d.Z,{handleSubmit:C(k),children:(0,j.jsxs)(p.Z,{title:"Filters",children:[(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(s.Z,{sm:12,lg:12,children:(0,j.jsx)(f.Z,{label:"",children:(0,j.jsx)(m.Z,{errors:S,label:"Search",name:"email",placeholder:"Search...",prependSearchIcon:!0,register:D,type:"search"})})}),(0,j.jsx)(s.Z,{sm:12,lg:12,children:n({control:R,errors:S,initialValues:t,register:D,setFilters:r,watch:I,setValue:E,reset:H})})]}),(0,j.jsx)(v.H,{content:"Search",context:"secondary",handleClick:k,type:"submit",children:(0,j.jsx)(y.Z,{content:"Clear",context:"danger",onClick:function(e){Object.keys(t).map((function(e){return E(e,null)})),r(t),H(t),k("")},size:"sm"})})]})})},P=["FiltersComp","initialFilters","TableComp"];function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t=e.FiltersComp,n=e.initialFilters,r=e.TableComp,l=(0,o.Z)(e,P),d=O("filters",n,n.filterType),p=(0,i.Z)(d,2),f=p[0],m=p[1],y=(0,u.useState)(f||n),v=y[0],g=y[1],b=(0,a.useRouter)().query.show;return(0,u.useEffect)((function(){m(v)}),[v]),(0,j.jsx)(c.Z,{children:(0,j.jsxs)(s.Z,{sm:12,lg:12,children:[(0,j.jsx)(w,{initialValues:n,renderFilters:function(e){return(0,j.jsx)(t,S(S(S({},e),l),{},{show:b}))},setFilters:g,filters:v}),(0,j.jsx)(r,S({filters:v,initialFilters:n},l))]})})}},46717:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(66918),i=n(70316),o=n(11163),a=n(93633),u=n(1135),c=n(91126),s=n(18862),l=n(58448),d=n(14347),p=n(80284),f=n(8163),m=n(81185),y=n(49705),v=n(85893),g="/dashboard/services/",b=function(e){var t=e.filters,n=(0,y.x)({filters:t}),r=n.initialData,i=n.ref,b=(0,a.a)(u.zb,{variables:r}),h=b.data,O=(h=void 0===h?{services:[],meta:{aggregate:{totalCount:0}}}:h).services,j=h.meta,x=b.loading,Z=b.refetch,w=function(e){e.stopPropagation(),o.default.push("".concat(g,"manage"))},P=[{hidden:!0},{sortable:!0,sortName:"name",text:"Service Line"},{text:"Country"},{text:"Currency"},{text:"Suppliers #"},{text:"Supplier \xa3/H"},{text:"Supplier \xa3/D"},{text:"Customer \xa3/H"},{text:"Customer \xa3/D"},{sortable:!0,sortName:"createdAt",text:"Created"},{sortable:!0,sortName:"status",text:"Status"},{formatter:c.Z,formatterData:(0,f.t)(g),text:"Actions"}],R=function(){return(0,v.jsx)(l.Z,{children:(0,v.jsx)(d.Z,{context:"secondary",content:"Create Service",onClick:w,size:"sm"})})};return(0,v.jsx)(p.Z,{toolbar:(0,v.jsx)(R,{}),open:!0,title:"Services",children:(0,v.jsx)(m.t,{columns:P,loading:x,meta:j,ref:i,refetch:Z,rows:O.map((function(e){var t=e.accounts,n=e.country,r=e.createdAt,i=e.currency,o=e.customerDayRate,a=e.customerHourRate,u=e.id,c=e.name,l=e.supplierHourRate,d=e.supplierDayRate,p=e.status,f=t.filter((function(e){return"supplier"===e.account.type}));return{id:u,name:c,country:n.name,currency:i.symbol,suppliers:f.length,supplierHourRate:l||"-",supplierDayRate:d||"-",customerHourRate:a||"-",customerDayRate:o||"-",date:(0,s.Z)(r),status:p,actions:""}}))})})},h=n(41482),O={countryId:null,currencyId:null,q:null,filterType:"services_table"},j=function(){return(0,v.jsx)(i.J,{FiltersComp:h.l,initialFilters:O,TableComp:b})},x=function(){return(0,v.jsx)(r.Z,{pageHeading:{heading:"Services"},View:(0,v.jsx)(j,{})})}},27137:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/services",function(){return n(46717)}])},10219:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[284,4195,5312,2002,3086,4712,7431,9774,2888,179],(function(){return t=27137,e(e.s=t);var t}));var t=e.O();_N_E=t}]);