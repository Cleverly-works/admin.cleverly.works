(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6155],{76800:function(e,n,t){"use strict";t.d(n,{M:function(){return m}});var a=t(92809),r=t(10219),i=t(42426),o=t(19716),s=t(22796),d=t(85893),c=["control","errors","name","space"];function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m=function(e){var n=e.control,t=e.errors,a=e.name,l=e.space,m=(0,r.Z)(e,c);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z,u({control:n,errors:t,locale:i.Z,name:a},m)),l&&(0,d.jsx)(s.Z,{marginBottom:"sm"})]})};m.defaultProps={space:!0}},1032:function(e,n,t){"use strict";t.d(n,{m:function(){return v}});var a,r=t(67294),i=t(93633),o=t(52209),s=(0,t(54397).Ps)(a||(a=(0,o.Z)(["\n  query GetJobsByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Count_By_Month_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    jobsByMonth: getDashboard_Count_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { strval_extra: asc }\n    ) {\n      count: count\n      month: strval_extra\n    }\n  }\n"]))),d=t(78840),c=t.n(d),l=t(75708),u=t.n(l),m=t(85726),I=t(5597);function p(e){var n=[];return e.forEach((function(e){try{n.push({name:(0,I.Z)(new Date(e.month),"LLL yyyy"),y:e.count})}catch(t){console.error("seriesData",e,t)}})),n}var g=t(85893),v=(0,r.forwardRef)((function(e,n){var a,r,o=e.filters,d=e.removeChart,l=(0,i.a)(s,{variables:{adminId:o.adminId,customerId:o.customerId,endTime:o.endDate,isFixed:o.isFixed,isPlanned:o.isPlanned,locationId:o.locationId,managerId:o.managerId,postCodeAreaId:o.postCodeAreaId,serviceId:o.serviceId,slaId:o.slaId,startTime:o.startDate,supplierId:o.supplierId}}).data,I=(l=void 0===l?{meta:{},jobsByMonth:[]}:l).meta,v=l.jobsByMonth;return t(18393)(c()),(0,g.jsx)(m.J,{name:"JobsByMonth",removeChart:d,title:"Total bookings by Month (".concat(null===(a=I.aggregate)||void 0===a?void 0:a.sum.count,")"),children:(0,g.jsx)(u(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:c(),options:(r=v,{chart:{type:"column"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{min:0,title:{text:"Counts"}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:"{point.name}</span>: <b>{point.y}</b> "},series:[{name:"Month",data:p(r),showInLegend:!1}]}),ref:n})})}))},66238:function(e,n,t){"use strict";t.d(n,{e:function(){return p}});var a,r=t(67294),i=t(93633),o=t(52209),s=(0,t(54397).Ps)(a||(a=(0,o.Z)(["\n  query GetJobsByStatus(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsByStatus: getDashboard_Count_By_Status(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: {}\n    ) {\n      statusname: name\n      count: count\n    }\n    meta: getDashboard_Count_By_Status_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { count: desc }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n  }\n"]))),d=t(78840),c=t.n(d),l=t(75708),u=t.n(l),m=t(85726),I=t(85893),p=(0,r.forwardRef)((function(e,n){var a,r,o=e.filters,d=e.removeChart,l=(0,i.a)(s,{variables:{adminId:o.adminId,customerId:o.customerId,endTime:o.endDate,isFixed:o.isFixed,isPlanned:o.isPlanned,locationId:o.locationId,managerId:o.managerId,postCodeAreaId:o.postCodeAreaId,serviceId:o.serviceId,slaId:o.slaId,startTime:o.startDate,supplierId:o.supplierId}}).data,p=(l=void 0===l?{meta:{},jobsByStatus:[]}:l).meta,g=l.jobsByStatus;return t(18393)(c()),g&&(0,I.jsx)(m.J,{name:"JobsByStatusPieChart",removeChart:d,title:"Total bookings by Status (".concat(null===(a=p.aggregate)||void 0===a?void 0:a.sum.count,")"),children:(0,I.jsx)(u(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:c(),options:(r=g,{chart:{type:"pie"},title:{text:null},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y}},series:[{data:r.map((function(e){return{name:e.statusname,y:e.count}})),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}}),ref:n})})}))},79859:function(e,n,t){"use strict";t.d(n,{$:function(){return $}});var a=t(67294),r=t(30266),i=t(64687),o=t.n(i),s=t(5597),d=function(e){var n=[];return e.map(function(){var e=(0,r.Z)(o().mark((function e(t){var a,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(0,s.Z)(new Date(t.scheduledAt?t.scheduledAt:t.timingStart),"yyyy dd MMM"),(null===(a=t.meta)||void 0===a?void 0:a.customerVATInvoice)&&n.push({name:i,y:null===(r=t.meta)||void 0===r?void 0:r.customerVATInvoice.expensesInfo.expensesTotal});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n},c=t(11640),l=t(26496),u=function(e){var n=e.acquisitionCost,t=e.datePutInService,a=e.maintenanceSpend,r=e.residualValue,i=e.usefulLife,o=parseInt(a)/12,d=(0,s.Z)(new Date(t),"MMMM yyyy"),u=new Array(parseInt(i)+1).fill({});return u=u.map((function(e,a){return 0===a?{name:d,y:(0,l.l)(parseInt(n),2)}:a+1===parseInt(i)+1?{name:(0,s.Z)((0,c.Z)(new Date(t),a),"MMMM yyyy"),y:(0,l.l)(a*o+parseInt(n)-parseInt(r),2)}:{name:(0,s.Z)((0,c.Z)(new Date(t),a),"MMMM yyyy"),y:(0,l.l)(a*o+parseInt(n),2)}}))},m=t(80284),I=t(78840),p=t.n(I),g=t(75708),v=t.n(g),y=t(85893),$=(0,a.forwardRef)((function(e,n){var a,r,i=e.initialData,o=e.jobs,s=void 0===o?[]:o;return t(18393)(p()),(0,y.jsx)(m.Z,{fitParentHeight:!0,title:"Total cost of ownership",children:(0,y.jsx)(v(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:p(),options:(a=u(i),r=d(s),{chart:{type:"line",zoomType:"x"},title:{text:"TCO"},series:[{data:a,showInLegend:!1},{data:Object.keys(r).map((function(e){return{name:e,y:r[e]}})),name:"Total Costs ",showInLegend:!1,type:"column",visible:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"\xa3"}}}),ref:n})})}))},85726:function(e,n,t){"use strict";t.d(n,{J:function(){return d}});var a=t(55657),r=t(77417),i=t(80284),o=t(24237),s=t(85893),d=function(e){var n=e.title,t=e.children,o=e.isTable,d=e.name,l=e.removeChart,u=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{context:"danger",icon:"trash",prefix:"fa",size:"sm",title:"Delete",onClick:function(e){e.stopPropagation(),l(e,d)}}),(0,s.jsx)(r.Z,{context:"darkGrey",vertical:!0}),(0,s.jsx)(a.Z,{className:"dragHandle",icon:"arrows-alt",prefix:"fa",size:"md",title:"Move",onClick:function(e){return e.stopPropagation()}})]});return(0,s.jsx)(i.Z,{context:"secondary",fitParentHeight:!0,open:!0,title:n,toolbar:u,loading:!0,children:(0,s.jsx)(c,{overflow:o,children:t})})},c=o.ZP.div.withConfig({displayName:"wrapper__StyledChildren",componentId:"sc-cfe7my-0"})(["height:100%;overflow-x:",";"],(function(e){return e.overflow?"hidden":"unset"}))},14399:function(e,n,t){"use strict";t.d(n,{cz:function(){return _},qd:function(){return T},nD:function(){return j},UH:function(){return C},SW:function(){return A},Qn:function(){return P},he:function(){return O},j$:function(){return w},_d:function(){return S},kx:function(){return D},t1:function(){return F},by:function(){return B},yR:function(){return Z},RJ:function(){return L},Cj:function(){return R},Ve:function(){return J},kU:function(){return q},kB:function(){return z}});var a,r,i,o,s,d,c,l,u,m,I,p,g,v,y,$,f,b,x=t(52209),h=t(54397),_=(0,h.Ps)(a||(a=(0,x.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]))),T=(0,h.Ps)(r||(r=(0,x.Z)(["\n  query GetAccountsForSelect($q: String) {\n    items: Account(where: { name: { _ilike: $q } }, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]))),j=(0,h.Ps)(i||(i=(0,x.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),C=(0,h.Ps)(o||(o=(0,x.Z)(["\n  query GetAssetsForSelect($locationId: Int, $q: String, $categoryId: Int, $bookable: String) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      parent: ParentAsset {\n        id\n        name\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          filename\n          meta\n          category\n          type\n        }\n      }\n    }\n  }\n"]))),A=(0,h.Ps)(s||(s=(0,x.Z)(['\n  query GetCustomersForSelect($q: String) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']))),P=(0,h.Ps)(d||(d=(0,x.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]))),O=(0,h.Ps)(c||(c=(0,x.Z)(['\n  query GetManagersForSelect($accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),w=(0,h.Ps)(l||(l=(0,x.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]))),S=(0,h.Ps)(u||(u=(0,x.Z)(["\n  query GetPropertiesForSelect($where: Location_bool_exp) {\n    items: Location(where: $where, order_by: { name: asc }) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(where: { registered: { _eq: true } }) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n"]))),D=(0,h.Ps)(m||(m=(0,x.Z)(['\n  query GetServicesForSelect($q: String) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),F=(0,h.Ps)(I||(I=(0,x.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),B=(0,h.Ps)(p||(p=(0,x.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp) {\n    items: Account(where: $where, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]))),Z=(0,h.Ps)(g||(g=(0,x.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),L=(0,h.Ps)(v||(v=(0,x.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),R=(0,h.Ps)(y||(y=(0,x.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),J=(0,h.Ps)($||($=(0,x.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),q=(0,h.Ps)(f||(f=(0,x.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int) {\n    items: Taxonomy(where: { type: { _eq: "complianceCategory" } }, order_by: { name: asc }) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),z=(0,h.Ps)(b||(b=(0,x.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"])))},81185:function(e,n,t){"use strict";t.d(n,{t:function(){return d}});var a=t(67294),r=t(11163),i=t(30493),o=t(52002),s=t(85893),d=(0,a.forwardRef)((function(e,n){var t=e.columns,d=e.history,c=e.initialSort,l=e.isResetTable,u=e.loading,m=e.meta,I=e.paginationSize,p=e.refetch,g=e.rowClick,v=e.rows,y=(0,r.useRouter)(),$=y.query,f=void 0===$?{}:$,b=(0,a.useState)(parseInt(null===f||void 0===f?void 0:f.page,10)||1),x=b[0],h=b[1],_=(0,a.useState)(i.C1.paginationSize),T=_[0],j=_[1];c||(c={item:"createdAt",order:"desc"}),(0,a.useEffect)((function(){h(1)}),[l]);var C=(0,a.useState)({item:c.item,order:c.order}),A=C[0],P=C[1],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=y.query,t=void 0===n?{}:n;e>1?t.page=e:delete t.page;var a=Object.keys(t).length>0;if(a){var r=Object.keys(t).map((function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])})).join("&&");return"?".concat(r)}return{}};(0,a.useImperativeHandle)(n,(function(){return{currentPage:x,pageSize:T,sort:A,resetPagination:function(){!function(){P({item:c.item,order:c.order}),h(1);var e=O();y.push(e),j(i.C1.paginationSize)}()}}}));return(0,s.jsx)(o.Z,{columns:t,loading:u,paginationSize:I,pagination:m&&!0,paginationProps:m&&{currentPage:x,onPageChange:function(e){var n=O(e);d&&y.push(n),h(e),p&&p()},onPageSizeChange:function(e){e!==i.C1.paginationSize&&(j(e),p&&p())},pageCount:Math.ceil(m.aggregate.totalCount/T),perPage:T},rowClick:g,rows:v,sort:A,setSort:function(e){var n=e.item,t=e.order;P({item:n,order:t}),p&&p()}})}));d.defaultProps={history:!0,loading:!0,paginationSize:!1}},49705:function(e,n,t){"use strict";t.d(n,{x:function(){return l}});var a=t(92809),r=t(67294),i=t(63867),o=t(30493),s=t(34770);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var l=function(e){var n,t,d,l,u,m,I,p,g,v,y,$=e.filters,f=e.initialSort,b=(0,r.useRef)();(0,r.useEffect)((function(){var e;(null===b||void 0===b||null===(e=b.current)||void 0===e?void 0:e.currentPage)>1&&(null===b||void 0===b||b.current.resetPagination(),(0,i.Z)("?page=1"))}),[$]);var x=f||{item:"createdAt",order:"desc"},h=(0,a.Z)({},(null===(n=b.current)||void 0===n?void 0:n.sort.item)||x.item,x.inneritem?(0,a.Z)({},x.inneritem,(null===(t=b.current)||void 0===t?void 0:t.sort.order)||x.order):(null===(d=b.current)||void 0===d?void 0:d.sort.order)||x.order);return{initialData:c(c({},$),{},{limit:"Infinity"===(null===(l=b.current)||void 0===l?void 0:l.pageSize)?null:parseInt(null===(u=b.current)||void 0===u?void 0:u.pageSize,10)||o.C1.paginationSize,offset:((null===(m=b.current)||void 0===m?void 0:m.currentPage)-1||0)*((null===(I=b.current)||void 0===I?void 0:I.pageSize)||o.C1.paginationSize),orderBy:(0,s.c)(null===(p=b.current)||void 0===p||null===(g=p.sort)||void 0===g||null===(v=g.item)||void 0===v?void 0:v.replace(/ORDER/i,null===(y=b.current)||void 0===y?void 0:y.sort.order))||h}),initialSort:f,ref:b}}},42772:function(e,n,t){"use strict";t.d(n,{S:function(){return a}});var a=function(e,n){var t=document.createElement("a");"string"===typeof t.download?(document.body.appendChild(t),t.download=n,t.href=e,t.click(),document.body.removeChild(t)):location.replace(e)}},34770:function(e,n,t){"use strict";t.d(n,{s:function(){return a},c:function(){return r}});var a=function(e){try{JSON.parse(e)}catch(n){return!1}return!0},r=function(e){try{return JSON.parse(e)}catch(n){return!1}}},26496:function(e,n,t){"use strict";t.d(n,{l:function(){return a}});var a=function(e,n){var t=Math.pow(10,n);return Math.round(e*t)/t}},2455:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return lo}});var a={};t.r(a),t.d(a,{asset:function(){return j},coverage:function(){return C},customer:function(){return $},overview:function(){return f},property:function(){return T},quote:function(){return A},service:function(){return b},sla:function(){return x},status:function(){return h},supplier:function(){return _}});var r={};t.r(r),t.d(r,{AverageAllocationTime:function(){return V},AverageDaysOutstandingChart:function(){return ee},AverageJobLengthChart:function(){return sn},AverageJobRevenueChart:function(){return fn},AverageProfitChart:function(){return _n},AverageQuoteValueChart:function(){return Sn},AverageTimeToAcceptByMinuteChart:function(){return kn},AverageTimeToAttendanceChart:function(){return Mn},AverageTimeToSubmitJobReportChart:function(){return Hn},AverageToCloseByHourChart:function(){return at},AvgPriceChart:function(){return xn},CountByActiveAccountChart:function(){return it},CountJobsEngagementRateChart:function(){return st},CountOpenJobsByDateChart:function(){return ct},CustomerAndSupplierAmounts:function(){return ut},CustomerDebtTable:function(){return Lt},DisputeRateChart:function(){return Jt},JobSLAByMonth:function(){return Yt},JobsByDayLineChart:function(){return zt},JobsByMonth:function(){return kt.m},JobsByService:function(){return Mt},JobsByStatusPieChart:function(){return Qt.e},JobsFinancialByDayLineChart:function(){return Gt},LateAttendanceBySupplierChart:function(){return U},NewCustomerAccountsChart:function(){return Xt},NewSupplierAccountsChart:function(){return ca},PercentageOfSpendByServiceLineTable:function(){return ga},PercentageOfWorkOrdersByServiceLineTable:function(){return _a},QuoteAcceptanceRateChart:function(){return sa},ReactiveAmountByMonth:function(){return ja},ReactiveBySLA:function(){return Aa},SlaBreachCountChart:function(){return Ti},SlaBreachPercentageChart:function(){return Si},SpendByCoverageAreaTable:function(){return La},SpendFromNewCustomerAccountsChart:function(){return Ja},SumQuoteAccepted:function(){return za},SumQuoteSent:function(){return Na},SupplierDebtTable:function(){return Va},TopAssetTypesBySpendTable:function(){return Ir},TopAssetsByNumberOfJobsTable:function(){return nr},TopAssetsBySpendTable:function(){return sr},TopCustomersByNumberOfPropertiesTable:function(){return br},TopCustomersByProfitChart:function(){return hr},TopPropertiesBySpendTable:function(){return Pr},TopSuppliersByNumberOfJobsTable:function(){return Br},TopSuppliersByQuoteReturnTable:function(){return zr},TopSuppliersByTimeToSubmitJobReportTable:function(){return Vr},TotalCostOfOwnershipChart:function(){return Yr.$},TotalJobRevenueChart:function(){return Xr},TotalQuoteInvoiceSent:function(){return ei},TotalQuoteReportSend:function(){return ti},TotalQuoteSentChart:function(){return li},WorstCustomersByAgedReceivablesTable:function(){return vi},jobsBySLA:function(){return Ht}});var i={};t.r(i),t.d(i,{asset:function(){return Hi},coverage:function(){return Qi},customer:function(){return Ji},overview:function(){return qi},property:function(){return Ei},quote:function(){return Wi},service:function(){return zi},sla:function(){return ki},status:function(){return Ni},supplier:function(){return Mi}});var o,s,d,c,l=t(66918),u=t(11163),m=t(24237),I=t(78215),p=t(2356),g=t(77024),v=t(32358),y=t(26398),$={lg:[{i:"CustomerDebtTable",x:0,y:0,w:12,h:3,minW:6,maxW:12,minH:1,maxH:3},{i:"ReactiveAmountByMonth",x:0,y:5,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"NewCustomerAccountsChart",x:3,y:8,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"SpendFromNewCustomerAccountsChart",x:6,y:8,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"WorstCustomersByAgedReceivablesTable",x:9,y:8,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6}]},f={lg:[{i:"JobsByMonth",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"JobsFinancialByDayLineChart",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},b={lg:[{i:"AverageAllocationTime",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"JobsByService",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"PercentageOfWorkOrdersByServiceLineTable",x:8,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"PercentageOfSpendByServiceLineTable",x:0,y:1,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},x={lg:[{i:"jobsBySLA",x:0,y:0,w:4,h:3,minW:2,maxW:6,minH:2,maxH:6}]},h={lg:[{i:"JobsByStatusPieChart",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},_={lg:[{i:"SupplierDebtTable",x:0,y:0,w:12,h:3,minW:6,maxW:12,minH:1,maxH:3},{i:"LateAttendanceBySupplierChart",x:0,y:4,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},T={lg:[{i:"TopPropertiesBySpendTable",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TopCustomersByNumberOfPropertiesTable",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},j={lg:[{i:"TopAssetTypesBySpendTable",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TopAssetsBySpendTable",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TopAssetsByNumberOfJobsTable",x:0,y:4,w:12,h:3,minW:2,maxW:6,minH:2,maxH:6}]},C={lg:[{i:"SpendByCoverageAreaTable",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},A={lg:[{i:"TotalQuotesSent",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TotalQuotesReportSent",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TotalQuoteIvoiceSent",x:8,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"SumQuoteSent",x:0,y:5,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"SumQuoteAccepted",x:8,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},P=t(30266),O=t(92809),w=t(64687),S=t.n(w),D=t(67294),F=t(69968),B=t(80880),Z=t(14347),L=t(77349),R=[{label:"Last Day",value:"-1"},{label:"Last 7 Days",value:"-7"},{label:"Last 30 Days",value:"-30",default:!0},{label:"Last 90 Days",value:"-90"},{label:"Custom",value:"custom"}],J=function(e){var n=new Date;return{startDate:(0,L.Z)(n,e),endDate:n,intervals:e}},q=t(93633),z=t(52209),k=t(54397),N=(0,k.Ps)(o||(o=(0,z.Z)(["\n  query GetDashboard_AllocationTime_By_Service(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    allocationByService: getDashboard_AllocationTime_By_Service(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { value: desc }\n    ) {\n      serviceId: id\n      allocationInMinutes: value\n      serviceName: name\n    }\n    meta: getDashboard_AllocationTime_By_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          value\n        }\n      }\n    }\n  }\n"]))),M=t(78840),E=t.n(M),H=t(75708),Q=t.n(H),W=t(85726),G=t(85893),V=(0,D.forwardRef)((function(e,n){var a,r,i,o=e.filters,s=e.removeChart,d=(0,q.a)(N,{variables:{adminId:o.adminId,customerId:o.customerId,endTime:o.endDate,isFixed:o.isFixed,isPlanned:o.isPlanned,locationId:o.locationId,managerId:o.managerId,postCodeAreaId:o.postCodeAreaId,serviceId:o.serviceId,slaId:o.slaId,startTime:o.startDate,supplierId:o.supplierId}}).data,c=(d=void 0===d?{allocationByService:[],meta:{}}:d).allocationByService,l=d.meta,u=(null===(a=l.aggregate)||void 0===a?void 0:a.avg.allocationInMinutes)/60|0,m=(null===(r=l.aggregate)||void 0===r?void 0:r.avg.allocationInMinutes)%60|0;return t(18393)(E()),c&&(0,G.jsx)(W.J,{name:"AverageAllocationTime",removeChart:s,title:"Average Allocation Time by Service Line (".concat(u,":").concat(m,")"),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(i=c,{chart:{type:"column"},title:{text:null},series:[{data:i.map((function(e){return{name:e.serviceName,y:e.allocationInMinutes}})),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}}),ref:n})})})),Y=(0,k.Ps)(s||(s=(0,z.Z)(["\n  query GetTopLateSuppliers(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    attendanceBySupplier: getDashboard_AttendanceTime_By_Supplier(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { reactive_customer: asc }\n      limit: 10\n    ) {\n      delayedJobs: intval_extra\n      delayedJobsPercent: reactive_customer\n      jobCount: count\n      latencyInMinutes: value\n      supplierName: name\n    }\n    meta: getDashboard_AttendanceTime_By_Supplier_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          latencyInMinutes: value\n        }\n      }\n    }\n  }\n"]))),U=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Y,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{attendanceBySupplier:[]}:o).attendanceBySupplier;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"LateAttendanceBySupplierChart",removeChart:i,title:"Top 10 Late Suppliers",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"column"},xAxis:{type:"category",title:null},yAxis:{stackLabels:{enabled:!0}},plotOptions:{column:{stacking:"normal",pointPadding:0,groupPadding:0,dataLabels:{enabled:!1}}},series:[{data:a.map((function(e){return{name:e.supplierName,y:-Math.round(e.delayedJobs/e.jobCount*100)}})),showInLegend:!1},{data:a.map((function(e){return{name:e.supplierName,y:100-Math.round(e.delayedJobs/e.jobCount*100)}})),showInLegend:!1}]}),ref:n})})})),X=(0,k.Ps)(d||(d=(0,z.Z)(["\n  query GetAverageOutstandingByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageDaysOutstanding: getDashboard_Average_Outstanding_By_Day(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Outstanding_By_Day_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),K=t(5597),ee=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(X,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{averageDaysOutstanding:[]}:o).averageDaysOutstanding;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"AverageDaysOutstandingChart",removeChart:i,title:"Average Days Outstanding",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}})),name:"Avg",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Days"}}}),ref:n})})})),ne=(0,k.Ps)(c||(c=(0,z.Z)(["\n  query GetAverageJobLength(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageJobLength: getDashboard_Average_Job_Length(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Job_Length_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),te=t(68162),ae=t(41733),re=t(74721),ie=t(36833),oe=t(65295),se=t(18515),de=t(99216),ce=t(2658),le=t(14563),ue=t(6867),me=t(42643),Ie=t(71508),pe=t(62224),ge={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"40%",minHeight:"40%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function ve(e){var n=e.openModal,t=e.setOpenModal,a=e.children,r=e.title;return(0,G.jsx)("div",{children:(0,G.jsx)(pe.Z,{open:n,onClose:function(){return t(!1)},children:(0,G.jsx)(Ie.Z,{sx:ge,children:(0,G.jsxs)(ce.Z,{variant:"h6",component:"h2",sx:{fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:600,fontSize:"1rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.87)"},children:[r," Filters",a]})})})})}var ye=t(14399),$e=t(30381),fe=t.n($e),be=function(e){var n=e.accountId,t=e.area,a=e.assetCategoryId,r=e.entity,i=e.entityId,o=(e.hasRole,e.id),s=e.locationId,d=e.serviceId,c=e.taxonomyGroupType,l=e.customerId,u=e.customerRole,m=e.type,I=e.userId,p=m;switch(u&&(p="".concat(m,"_").concat(u)),p){case"address":return{query:ye.cz,variables:{entity:r,entityId:i}};case"asset":return{query:ye.UH,variables:{categoryId:a,locationId:s}};case"assetBookable":return{query:ye.UH,variables:{categoryId:a,locationId:s,bookable:"yes"}};case"assetCategory":return{query:ye.nD,variables:{id:o}};case"compliance":return{query:ye.kU,variables:{locationId:s}};case"coverage":return{query:ye.j$};case"customer":return{query:ye.SW};case"job":return{query:ye.Qn,variables:{locationId:s}};case"manager":return{query:ye.he,variables:{accountId:n}};case"product":return{query:ye.UH,variables:{category:"product",locationId:s}};case"property":return{query:ye._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:n}}}}};case"property_user":return{query:ye._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:n},Account:{type:{_eq:"customer"},Account_Users:{role:{_eq:"user"},userId:{_eq:l}}},User_Account_Locations:{Account_User:{userId:{_eq:l},accountId:{_eq:n}}}}}}};case"sensor":return{query:ye.UH,variables:{category:"sensor",locationId:s}};case"service":return{query:ye.kx};case"sla":return{query:ye.t1,variables:{type:"priority",adminId:n}};case"sublocation":return{query:ye.UH,variables:{category:"sublocation",adminId:n,locationId:s}};case"supplier":var g={type:{_eq:"supplier"}};return t&&(g.PostcodeAreas={PostcodeArea:{area:{_eq:t}},status:{_eq:"active"}}),d&&(g.Services={serviceId:{_eq:d},status:{_eq:"active"}}),{query:ye.by,variables:{where:g}};case"user":return{query:ye.yR,variables:{accountId:n}};case"usersForBookings":return{query:ye.yR,variables:{accountId:I}};case"tenant":return{query:ye.RJ};case"taxonomyGroup":return{query:ye.Cj,variables:{type:c}};case"expenseCategory":return{query:ye.Ve};default:return{query:ye.qd}}},xe=function(e){switch(e){case"supplier":return"Select supplier";case"customer":return"Select customer";case"property":return"Select property";case"service":return"Select service";case"coverage":return"Select postcodes";case"sla":return"SLA";case"user":return"Assigned to";default:return""}},he=function(e){switch(e){case"-1":return"Today";case"-30":return"Last 30 Days";case"-7":return"Last Week";case"custom":return"Custom";default:return null}},_e=function(e){switch(e){case 0:return"Reactive";case 1:return"PPM";case"All":return"All";default:return null}},Te=function(e){switch(e){case 0:return"Time and materials";case 1:return"Fixed";case"All":return"All";default:return null}};function je(e){var n=e.title,t=e.children,a=e.isTable,r=e.name,i=e.removeChart,o=e.filtersComponent,s=e.activeFiltersComponent,d=e.setOpenModal,c=e.openModal,l=function(e){switch(e){case"Average Job Revenue":return"The average revenue per completed job.";case"Average Job Length":return"The average time taken to complete a job.";case"Average Time To Accept Job":return"The average time taken for a job to be accepted once it has been offered. ";case"SLA Breach (Count)":return"The number of jobs where a relevant SLA has been.";case"SLA Breach (Percentage)":return"The percentage of jobs where the relevant SLA has been breached.";case"Average Time To Close Job":return"The average time taken to close down a job once completed.";case"Number Of Quotes":return"Number of quotes submitted during time period.";case"Average Quote Value":return"The average value of quotes submitted during time period. ";case"Quote Acceptance Rate":return"The percentage of quotes submitted that are accepted. ";default:return null}}(n);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ve,{title:n,openModal:c,setOpenModal:d,children:o}),(0,G.jsxs)(oe.Z,{sx:{minWidth:300,border:"1px solid rgba(211,211,211,0.6)",height:"100%"},children:[(0,G.jsx)(se.Z,{title:(0,G.jsxs)(de.Z,{direction:"row",children:[(0,G.jsx)(ce.Z,{sx:{fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:500,fontSize:"1rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.87)"},children:n}),(0,G.jsx)(le.Z,{placement:"right-start",title:l,children:(0,G.jsx)(re.Z,{fontSize:"medium",sx:{color:"#2196F3",ml:"0.1rem",position:"relative"}})})]}),action:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ue.Z,{onClick:function(){return d(!0)},size:"small",sx:{mr:"20px"},children:(0,G.jsx)(te.Z,{sx:{color:"rgba(39, 39, 39, 0.7)"}})}),(0,G.jsx)(ue.Z,{onClick:function(e){e.stopPropagation(),i(e,r)},size:"small",sx:{mr:"20px"},children:(0,G.jsx)(ae.Z,{sx:{color:"rgba(39, 39, 39, 0.7)"}})}),(0,G.jsx)(ue.Z,{className:"dragHandle",onClick:function(e){return e.stopPropagation()},size:"small",sx:{mr:"20px"},children:(0,G.jsx)(ie.Z,{sx:{color:"rgba(39, 39, 39, 0.7)"}})})]})}),(0,G.jsxs)("div",{style:{backgroundColor:"white"},children:[(0,G.jsx)(me.Z,{sx:{borderBottom:"1px solid #E4E7EB"},children:(0,G.jsx)(Ce,{overflow:a,children:t})}),(0,G.jsx)(Ie.Z,{children:s})]})]})]})}var Ce=(0,m.ZP)(Ie.Z).withConfig({displayName:"chartWrapper__StyledChildren",componentId:"sc-1fsr1uy-0"})(["overflow-x:",";"],(function(e){return e.overflow?"hidden":"unset"})),Ae=t(1323),Pe=t(42283),Oe=t(76914),we=t(10219),Se=t(26075),De=t(45116),Fe=t(23258),Be=t(42593),Ze=["AddForm","accountId","area","assetCategoryId","entity","entityId","errors","id","isClearable","isDisabled","label","locationId","name","serviceId","taxonomyGroupType","customerId","customerRole","type","userId","onChange","control","filters"];function Le(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Le(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Le(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Je=function(e,n){var t,a,r=!0;return(null===(t=e.errors[e.name])||void 0===t?void 0:t.message)!==(null===(a=n.errors[n.name])||void 0===a?void 0:a.message)&&(r=!1),["accountId","assetCategoryId","entity","entityId","locationId","serviceId","type","value","customerId","customerRole"].forEach((function(t){e[t]!==n[t]&&(r=!1)})),r},qe=(0,D.memo)((function(e){e.AddForm;var n=e.accountId,t=e.area,a=e.assetCategoryId,r=e.entity,i=e.entityId,o=(e.errors,e.id),s=(e.isClearable,e.isDisabled,e.label,e.locationId),d=e.name,c=e.serviceId,l=e.taxonomyGroupType,u=e.customerId,m=e.customerRole,I=e.type,p=e.userId,g=(e.onChange,e.control),v=e.filters,y=((0,we.Z)(e,Ze),(0,Se.x)()),$=(0,D.useState)(!1),f=$[0],b=$[1],x=(0,D.useState)([]),h=x[0],_=x[1],T=(0,D.useState)(!1),j=T[0],C=T[1],A=(0,D.useContext)(Be.Z).hasRole,O=(0,D.useState)(!1)[1];(0,D.useEffect)((function(){return O(!1),C(!1),function(){}}),[n,a,r,i,s,c,I,u,m,p]);var w=function(){var e=(0,P.Z)(S().mark((function e(){var d,g,v,$,f,x,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=3;break}return O(!0),e.abrupt("return",null);case 3:return b(!0),d=be({accountId:n,area:t,assetCategoryId:a,entity:r,entityId:i,hasRole:A,id:o,locationId:s,serviceId:c,taxonomyGroupType:l,customerId:u,customerRole:m,type:I,userId:p}),g=d.query,v=d.variables,$=void 0===v?{}:v,e.next=7,y.query({query:g,variables:Re({},$)});case 7:f=e.sent,x=f.data,h=(x=void 0===x?{items:[]}:x).items,_(h),b(!1),C(!0),O(!0);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,G.jsx)(Pe.Qr,{render:function(e){return(0,G.jsx)(Fe.Z,Re(Re({},e),{},{options:h,value:v[d],getOptionLabel:function(e){return e.label},sx:{width:"45%",mb:2,"& .MuiInputLabel-root":{lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.54)"}},onOpen:w,loading:f,renderInput:function(e){return(0,G.jsx)(De.Z,Re(Re({},e),{},{label:xe(I),variant:"standard",inputProps:Re(Re({},e.inputProps),{},{style:{lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.07875px",color:"rgba(0, 0, 0, 0.54)"}})}))},onChange:function(n,t){e.onChange(t)}}))},name:d,control:g})}),Je);qe.defaultProps={isClearable:!0,label:"Account",name:"account",type:"account"};var ze=t(76800),ke=t(76446),Ne=t(27666),Me=t(34186),Ee=t(91753),He=["name","label","control","defaultValue","children","options","variant"];function Qe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function We(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Qe(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ge=function(e){var n=e.name,t=e.label,a=e.control,r=e.defaultValue,i=(e.children,e.options),o=e.variant,s=(0,we.Z)(e,He);return(0,G.jsxs)(ke.Z,{sx:{width:t?"45%":"100%"},fullWidth:!0,children:[t&&(0,G.jsx)(Ne.Z,{sx:{"&.MuiInputLabel-root\t":{lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.07875px",color:"rgba(0, 0, 0, 0.54)"},"&.MuiInputLabel-formControl":{left:"-13px",top:"5px"}},htmlFor:"select",children:t}),(0,G.jsx)(Pe.Qr,{as:(0,G.jsx)(Me.Z,We(We({id:"select"},s),{},{variant:o,sx:{mt:2,lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.54)"},children:i.map((function(e){return(0,G.jsx)(Ee.Z,{value:e.value,sx:{fontFamily:"Nunito-Regular",fontStyle:"normal",fontWeight:400,fontSize:"0.875rem",lineHeight:"24px",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.54)"},children:e.label},e.value)}))})),name:n,control:a,defaultValue:r})]})};function Ve(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ve(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ve(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ue=[{label:"All",value:"All"},{label:"PPM",value:1},{label:"Reactive",value:0}],Xe=[{label:"All",value:"All"},{label:"Fixed",value:1},{label:"Time and material",value:0}],Ke=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,Ae.x)().user,i=(0,Pe.cI)({defaultValues:Ye({},a)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:a},I=u("intervals");return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("form",{onSubmit:d((function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,o=Ye(Ye(Ye({},t),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:a,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId,isPlanned:e.isPlanned,isFixed:e.isFixed});n(o)})),children:(0,G.jsxs)(de.Z,{children:[(0,G.jsx)(Ge,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===I&&(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Ye(Ye({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Ye(Ye({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Ye(Ye({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,G.jsx)(qe,Ye(Ye({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Ye(Ye({},m),{},{name:"locationId",type:"property",control:o})),(0,G.jsx)(qe,Ye(Ye({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Ye(Ye({},m),{},{name:"slaId",type:"sla",control:o})),(0,G.jsx)(qe,Ye(Ye({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ge,{control:o,name:"isPlanned",options:Ue,variant:"standard",label:"Schedule"}),(0,G.jsx)(Ge,{control:o,name:"isFixed",options:Xe,variant:"standard",label:"Price"})]}),(0,G.jsxs)(de.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,G.jsx)(Oe.Z,{onClick:function(){l({initialFilters:t}),n(t)},variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,G.jsx)(Oe.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})},en=t(15725),nn=function(e){var n=function(e){return Object.keys(e).map((function(n){var t,a,r,i,o,s;switch(n){case"managerId":return{label:"Assigned to",value:(null===(t=e[n])||void 0===t?void 0:t.label)||null};case"customerId":return{label:"Customer",value:(null===(a=e[n])||void 0===a?void 0:a.label)||null};case"isFixed":return{label:"Price",value:Te(e[n])};case"isPlanned":return{label:"Schedule",value:_e(e[n])};case"locationId":return{label:"Location",value:(null===(r=e[n])||void 0===r?void 0:r.label)||null};case"serviceId":return{label:"Service",value:(null===(i=e[n])||void 0===i?void 0:i.label)||null};case"slaId":return{label:"SLA",value:(null===(o=e[n])||void 0===o?void 0:o.label)||null};case"supplierId":return{label:"Supplier",value:(null===(s=e[n])||void 0===s?void 0:s.label)||null};case"intervals":return{label:"Time Slot",value:he(e[n])};case"endDate":return{label:"End Date",value:fe()(e[n]).format("DD MMM YYYY")};case"startDate":return{label:"Start Date",value:fe()(e[n]).format("DD MMM YYYY")};default:return null}}))}(e.filters);return(0,G.jsx)(Ie.Z,{sx:{flexGrow:2,ml:6,mr:6,mb:4,mt:1},children:(0,G.jsx)(en.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},children:n.map((function(e){return e&&e.value&&(0,G.jsx)(tn,{label:e.label,value:e.value},e.label)}))})})},tn=function(e){var n=e.label,t=e.value;return(0,G.jsxs)(en.ZP,{item:!0,xs:3,children:[(0,G.jsx)(de.Z,{direction:"row",children:(0,G.jsxs)(ce.Z,{sx:{fontFamily:"Nunito-Regular",fontSize:"0.625rem",fontStyle:"normal",fontWeight:400,lineHeight:"21px",color:"rgba(0, 0, 0, 0.87)",letterSpacing:"0.07875px",mr:"5px"},children:[n," :"]})}),(0,G.jsx)(de.Z,{children:(0,G.jsx)(ce.Z,{sx:{fontFamily:"Nunito-Regular",fontSize:"0.75rem",fontStyle:"normal",fontWeight:400,lineHeight:"21px",color:"#2196F3",letterSpacing:"0.07875px"},children:t})})]})};function an(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function rn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?an(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):an(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var on,sn=(0,D.forwardRef)((function(e,n){var a,r,i,o,s,d,c,l=e.removeChart,u=(0,Ae.x)().user,m=R.find((function(e){return e.default})),I=rn(rn({},J(m.value)),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:u.accountId,accountType:u.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null,isPlanned:null,isFixed:null})),p=(0,D.useState)(I),g=p[0],v=p[1],y=(0,D.useState)(!1),$=y[0],f=y[1],b=(0,q.a)(ne,{onCompleted:function(){f(!1)},variables:{adminId:g.adminId,customerId:null===(a=g.customerId)||void 0===a?void 0:a.value,endTime:g.endDate,startTime:g.startDate,isFixed:g.isFixed,isPlanned:g.isPlanned,locationId:null===(r=g.locationId)||void 0===r?void 0:r.value,managerId:null===(i=g.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=g.serviceId)||void 0===o?void 0:o.value,slaId:null===(s=g.slaId)||void 0===s?void 0:s.value,supplierId:null===(d=g.supplierId)||void 0===d?void 0:d.value}}).data,x=(b=void 0===b?{averageJobLength:[]}:b).averageJobLength;return t(18393)(E()),x&&(0,G.jsx)(je,{name:"AverageJobLengthChart",removeChart:l,title:"Average Job Length",openModal:$,setOpenModal:f,filtersComponent:(0,G.jsx)(Ke,{filters:g,initialFilters:I,setFilters:v}),activeFiltersComponent:(0,G.jsx)(nn,{filters:g}),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(c=x,{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"AVG, hours",data:c.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}})),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Hours"}}}),ref:n})})})),dn=(0,k.Ps)(on||(on=(0,z.Z)(["\n  query GetJobsFinancialByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageJobRevenue: getDashboard_Financial_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      jobDate: date_val1_extra\n      jobRevenue: ppm_revenue\n    }\n    meta: getDashboard_Financial_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          sumJobRevenue: ppm_revenue\n        }\n      }\n    }\n  }\n"])));function cn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ln(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?cn(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var un=[{label:"All",value:"All"},{label:"PPM",value:1},{label:"Reactive",value:0}],mn=[{label:"All",value:"All"},{label:"Fixed",value:1},{label:"Time and material",value:0}],In=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,Ae.x)().user,i=(0,Pe.cI)({defaultValues:ln({},a)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:a},I=u("intervals");return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("form",{onSubmit:d((function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,o=ln(ln(ln({},t),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:a,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId,isPlanned:e.isPlanned,isFixed:e.isFixed});n(o)})),children:(0,G.jsxs)(de.Z,{children:[(0,G.jsx)(Ge,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===I&&(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,ln(ln({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,ln(ln({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,ln(ln({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,G.jsx)(qe,ln(ln({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,ln(ln({},m),{},{name:"locationId",type:"property",control:o})),(0,G.jsx)(qe,ln(ln({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,ln(ln({},m),{},{name:"slaId",type:"sla",control:o})),(0,G.jsx)(qe,ln(ln({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ge,{control:o,name:"isPlanned",options:un,variant:"standard",label:"Schedule"}),(0,G.jsx)(Ge,{control:o,name:"isFixed",options:mn,variant:"standard",label:"Price"})]}),(0,G.jsxs)(de.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,G.jsx)(Oe.Z,{onClick:function(){l({initialFilters:t}),n(t)},variant:"outlined",children:"Reset filters"}),(0,G.jsx)(Oe.Z,{type:"submit",variant:"contained",children:"Apply"})]})]})})})};function pn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function gn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pn(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var vn,yn,$n,fn=(0,D.forwardRef)((function(e,n){var a,r,i,o,s,d,c,l,u=e.removeChart,m=(0,Ae.x)().user,I=R.find((function(e){return e.default})),p=gn(gn({},J(I.value)),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:m.accountId,accountType:m.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null,isPlanned:null,isFixed:null})),g=(0,D.useState)(p),v=g[0],y=g[1],$=(0,D.useState)(!1),f=$[0],b=$[1],x=(0,q.a)(dn,{onCompleted:function(){b(!1)},variables:{adminId:v.adminId,startTime:v.startDate,endTime:v.endDate,customerId:null===(a=v.customerId)||void 0===a?void 0:a.value,locationId:null===(r=v.locationId)||void 0===r?void 0:r.value,managerId:null===(i=v.managerId)||void 0===i?void 0:i.value,postCodeAreaId:null===(o=v.postCodeAreaId)||void 0===o?void 0:o.value,serviceId:null===(s=v.serviceId)||void 0===s?void 0:s.value,slaId:null===(d=v.slaId)||void 0===d?void 0:d.value,supplierId:null===(c=v.supplierId)||void 0===c?void 0:c.value,isFixed:"All"===v.isFixed?null:v.isFixed,isPlanned:"All"===v.isPlanned?null:v.isPlanned}}).data,h=(x=void 0===x?{averageJobRevenue:[]}:x).averageJobRevenue;return t(18393)(E()),h&&(0,G.jsx)(je,{name:"AverageJobRevenueChart",removeChart:u,title:"Average Job Revenue",openModal:f,setOpenModal:b,filtersComponent:(0,G.jsx)(In,{filters:v,initialFilters:p,setFilters:y}),activeFiltersComponent:(0,G.jsx)(nn,{filters:v}),tooltip:"",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(l=h,{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"Revenue, \xa3",data:l.map((function(e){return{name:(0,K.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.jobRevenue}})),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}}),ref:n})})})),bn=(0,k.Ps)(vn||(vn=(0,z.Z)(["\n  query GetAvgPriceByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    priceByMonth: getDashboard_AvgPrice_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { strval_extra: asc }\n    ) {\n      month: strval_extra\n      avg: value\n    }\n    meta: getDashboard_AvgPrice_By_Month_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),xn=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(bn,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{priceByMonth:[]}:o).priceByMonth;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"AvgPriceChart",removeChart:i,title:"Average Job Price By Month ",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{name:"Ave",data:a.map((function(e){return{name:fe()(e.month,"YYYY-M").format("MMM YYYY"),y:e.avg||0}})),showInLegend:!1}]}),ref:n})})})),hn=(0,k.Ps)(yn||(yn=(0,z.Z)(["\n  query GetAverageProfit(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageProfit: getDashboard_Customer_Profit(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: ppm_customer\n    }\n    meta: getDashboard_Customer_Profit_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),_n=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(hn,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{averageProfit:[]}:o).averageProfit;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"AverageProfitChart",removeChart:i,title:"Average Profit Margin",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}})),name:"average margin profit",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}}),ref:n})})})),Tn=(0,k.Ps)($n||($n=(0,z.Z)(["\n  query GetAverageQuoteValue(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageQuoteValue: getDashboard_Average_Quote(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      amount: reactive_customer\n      date: date_val1_extra\n    }\n    meta: getDashboard_Average_Quote_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          sumJobRevenue: ppm_revenue\n        }\n      }\n    }\n  }\n"])));function jn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Cn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?jn(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var An=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,Ae.x)().user,i=(0,Pe.cI)({defaultValues:Cn({},a)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:a},I=u("intervals");return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("form",{onSubmit:d((function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,o=Cn(Cn(Cn({},t),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:a,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)})),children:(0,G.jsxs)(de.Z,{children:[(0,G.jsx)(Ge,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===I&&(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Cn(Cn({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Cn(Cn({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Cn(Cn({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,G.jsx)(qe,Cn(Cn({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Cn(Cn({},m),{},{name:"locationId",type:"property",control:o})),(0,G.jsx)(qe,Cn(Cn({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Cn(Cn({},m),{},{name:"slaId",type:"sla",control:o})),(0,G.jsx)(qe,Cn(Cn({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,G.jsxs)(de.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,G.jsx)(Oe.Z,{onClick:function(){l({initialFilters:t}),n(t)},variant:"outlined",children:"Reset filters"}),(0,G.jsx)(Oe.Z,{type:"submit",variant:"contained",children:"Apply"})]})]})})})};function Pn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function On(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pn(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var wn,Sn=(0,D.forwardRef)((function(e,n){var a,r,i,o,s,d=e.removeChart,c=(0,Ae.x)().user,l=R.find((function(e){return e.default})),u=On(On({},J(l.value)),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:c.accountId,accountType:c.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null})),m=(0,D.useState)(u),I=m[0],p=m[1],g=(0,D.useState)(!1),v=g[0],y=g[1],$=(0,q.a)(Tn,{onCompleted:function(){y(!1)},variables:{adminId:I.adminId,customerId:null===(a=I.customerId)||void 0===a?void 0:a.value,endTime:I.endDate,locationId:null===(r=I.locationId)||void 0===r?void 0:r.value,managerId:null===(i=I.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=I.serviceId)||void 0===o?void 0:o.value,slaId:I.slaId,startTime:I.startDate,supplierId:I.supplierId}}).data,f=($=void 0===$?{averageQuoteValue:[]}:$).averageQuoteValue;return t(18393)(E()),f&&(0,G.jsx)(je,{name:"AverageQuoteValueChart",removeChart:d,title:"Average Quote Value",openModal:v,setOpenModal:y,filtersComponent:(0,G.jsx)(An,{filters:I,initialFilters:u,setFilters:p}),activeFiltersComponent:(0,G.jsx)(nn,{filters:I}),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(s=f,{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"AVG, \xa3",data:s.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.amount}})),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}}),ref:n})})})),Dn=(0,k.Ps)(wn||(wn=(0,z.Z)(["\n  query GetAverageTimeToAcceptByMinute(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageTimeToAcceptByMinute: getDashboard_Average_Time_To_Accept_By_minute(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Time_To_Accept_By_minute_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function Fn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Bn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Fn(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Zn=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,Ae.x)().user,i=(0,Pe.cI)({defaultValues:Bn({},a)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:a},I=u("intervals");return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("form",{onSubmit:d((function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,o=Bn(Bn(Bn({},t),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:a,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId});n(o)})),children:(0,G.jsxs)(de.Z,{children:[(0,G.jsx)(Ge,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===I&&(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Bn(Bn({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Bn(Bn({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Bn(Bn({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,G.jsx)(qe,Bn(Bn({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Bn(Bn({},m),{},{name:"locationId",type:"property",control:o})),(0,G.jsx)(qe,Bn(Bn({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,G.jsx)(de.Z,{direction:"row",justifyContent:"space-between",children:(0,G.jsx)(qe,Bn(Bn({},m),{},{name:"slaId",type:"sla",control:o}))}),(0,G.jsxs)(de.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,G.jsx)(Oe.Z,{onClick:function(){l({initialFilters:t}),n(t)},variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,G.jsx)(Oe.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function Ln(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Rn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ln(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ln(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Jn,qn,zn,kn=(0,D.forwardRef)((function(e,n){var a,r,i,o,s,d,c=e.removeChart,l=(0,Ae.x)().user,u=R.find((function(e){return e.default})),m=Rn(Rn({},J(u.value)),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:l.accountId,accountType:l.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null})),I=(0,D.useState)(m),p=I[0],g=I[1],v=(0,D.useState)(!1),y=v[0],$=v[1],f=(0,q.a)(Dn,{onCompleted:function(){$(!1)},variables:{adminId:p.adminId,endTime:p.endDate,startTime:p.startDate,customerId:null===(a=p.customerId)||void 0===a?void 0:a.value,locationId:null===(r=p.locationId)||void 0===r?void 0:r.value,serviceId:null===(i=p.serviceId)||void 0===i?void 0:i.value,slaId:null===(o=p.slaId)||void 0===o?void 0:o.value,supplierId:null===(s=p.supplierId)||void 0===s?void 0:s.value}}).data,b=(f=void 0===f?{averageTimeToAcceptByMinute:[]}:f).averageTimeToAcceptByMinute;return t(18393)(E()),b&&(0,G.jsx)(je,{name:"AverageTimeToAcceptByMinuteChart",removeChart:c,title:"Average Time To Accept Job",openModal:y,setOpenModal:$,filtersComponent:(0,G.jsx)(Zn,{filters:p,initialFilters:m,setFilters:g,defaultInterval:u}),activeFiltersComponent:(0,G.jsx)(nn,{filters:p}),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(d=b,{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"Avg, minutes",data:d.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}})),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Minutes"}}}),ref:n})})})),Nn=(0,k.Ps)(Jn||(Jn=(0,z.Z)(["\n  query GetAverageTimeToAttendance(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageTimeToAttendance: getDashboard_Average_Time_To_Attendance(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Time_To_Attendance_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),Mn=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Nn,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{averageTimeToAttendance:[]}:o).averageTimeToAttendance;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"AverageTimeToAttendanceChart",removeChart:i,title:"Average Time To Attendance",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}})),name:"Attendance",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Hours"}}}),ref:n})})})),En=(0,k.Ps)(qn||(qn=(0,z.Z)(["\n  query GetAverageTimeToSubmitJobReport(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageTimeToSubmitJobReport: getDashboard_Average_Time_To_Compelete_By_Hour(\n      order_by: { date_val1_extra: asc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: value\n      date: date_val1_extra\n    }\n    meta: getDashboard_Average_Time_To_Compelete_By_Hour_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]))),Hn=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(En,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{averageTimeToSubmitJobReport:[]}:o).averageTimeToSubmitJobReport;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"AverageTimeToSubmitJobReportChart",removeChart:i,title:"Average Time To Submit Job",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}})),name:"Avg",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Hours"}}}),ref:n})})})),Qn=(0,k.Ps)(zn||(zn=(0,z.Z)(["\n  query GetAverageToCloseByHour(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageToCloseByHour: getDashboard_Average_To_Close_By_Hour(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_To_Close_By_Hour_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function Wn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Gn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Wn(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Vn=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,Ae.x)().user,i=(0,Pe.cI)({defaultValues:Gn({},a)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:a},I=u("intervals");return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("form",{onSubmit:d((function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,o=Gn(Gn(Gn({},t),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:a,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)})),children:(0,G.jsxs)(de.Z,{children:[(0,G.jsx)(Ge,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===I&&(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Gn(Gn({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Gn(Gn({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Gn(Gn({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,G.jsx)(qe,Gn(Gn({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Gn(Gn({},m),{},{name:"locationId",type:"property",control:o})),(0,G.jsx)(qe,Gn(Gn({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Gn(Gn({},m),{},{name:"slaId",type:"sla",control:o})),(0,G.jsx)(qe,Gn(Gn({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,G.jsxs)(de.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,G.jsx)(Oe.Z,{onClick:function(){l({initialFilters:t}),n(t)},variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,G.jsx)(Oe.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function Yn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Un(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Yn(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Xn,Kn,et,nt,tt,at=(0,D.forwardRef)((function(e,n){var a,r,i,o,s,d=e.removeChart,c=(0,Ae.x)().user,l=R.find((function(e){return e.default})),u=Un(Un({},J(l.value)),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:c.accountId,accountType:c.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null})),m=(0,D.useState)(u),I=m[0],p=m[1],g=(0,D.useState)(!1),v=g[0],y=g[1],$=(0,q.a)(Qn,{onCompleted:function(){y(!1)},variables:{adminId:I.adminId,customerId:null===(a=I.customerId)||void 0===a?void 0:a.value,endTime:I.endDate,locationId:null===(r=I.locationId)||void 0===r?void 0:r.value,managerId:null===(i=I.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=I.serviceId)||void 0===o?void 0:o.value,slaId:I.slaId,startTime:I.startDate,supplierId:I.supplierId}}).data,f=($=void 0===$?{averageToCloseByHour:[]}:$).averageToCloseByHour;return t(18393)(E()),f&&(0,G.jsx)(je,{name:"AverageToCloseByHourChart",removeChart:d,title:"Average Time To Close Job",openModal:v,setOpenModal:y,filtersComponent:(0,G.jsx)(Vn,{filters:I,initialFilters:u,setFilters:p}),activeFiltersComponent:(0,G.jsx)(nn,{filters:I}),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(s=f,{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{data:s.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}})),name:"AVG, days",showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Days"}}}),ref:n})})})),rt=(0,k.Ps)(Xn||(Xn=(0,z.Z)(["\n  query GetCountByActiveAccount(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    countByActiveAccount: getDashboard_Count_By_Active_Account(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      date: date_val1_extra\n    }\n    meta: getDashboard_Count_By_Active_Account_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]))),it=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(rt,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{countByActiveAccount:[]}:o).countByActiveAccount;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"CountByActiveAccountChart",removeChart:i,title:"Count By Active Account",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}})),name:"Active account",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}}),ref:n})})})),ot=(0,k.Ps)(Kn||(Kn=(0,z.Z)(["\n  query GetCountJobsEngagementRate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    CountJobsEngagementRate: getDashboard_Count_Jobs_Engagement_Rate(\n      order_by: { date_val1_extra: asc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: count\n      date: date_val1_extra\n    }\n    meta: getDashboard_Count_Jobs_Engagement_Rate_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]))),st=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(ot,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{CountJobsEngagementRate:[]}:o).CountJobsEngagementRate;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"CountJobsEngagementRateChart",removeChart:i,title:"Engagement Rate",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}})),name:"Count",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}}),ref:n})})})),dt=(0,k.Ps)(et||(et=(0,z.Z)(["\n  query GetCountOpenJobByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    countOpenJobsByDate: getDashboard_Count_Open_Jobs_By_Date(\n      order_by: { date_val1_extra: desc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: count\n      date: date_val1_extra\n    }\n    meta: getDashboard_Count_Open_Jobs_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count: count\n      }\n    }\n  }\n"]))),ct=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(dt,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{countOpenJobsByDate:[]}:o).countOpenJobsByDate;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"CountOpenJobsByDateChart",removeChart:i,title:"Number Of Open Jobs",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{type:"line",name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}})),name:"Count",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}}),ref:n})})})),lt=(0,k.Ps)(nt||(nt=(0,z.Z)(["\n  query getDashboard_Financial_By_Month(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    financebymonth: getDashboard_Financial_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { name: asc }\n    ) {\n      month: name\n      ppm_supplier\n      ppm_revenue\n      ppm_customer\n      reactive_customer\n      reactive_revenue\n      reactive_supplier\n    }\n  }\n"]))),ut=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(lt,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{financebymonth:[]}:o).financebymonth;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"CustomerAndSupplierAmounts",removeChart:i,title:"Customer \\ Supplier Amounts By Month",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{title:{text:null},xAxis:{type:"category"},yAxis:{title:{text:"Amounts(\xa3)"}},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal}},plotOptions:{column:{stacking:"normal"}},series:[{type:"column",name:"Customer Amount",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.ppm_customer,stack:"customer"}})),showInLegend:!1},{type:"column",name:"Customer Amount",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_customer,stack:"customer"}})),showInLegend:!1},{type:"column",name:"PPM Supplier Amount",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.ppm_supplier,stack:"supplier"}})),showInLegend:!1},{type:"column",name:"Supplier Amount",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_supplier,stack:"supplier"}})),showInLegend:!1},{type:"spline",marker:{radius:4,lineWidth:1,symbol:"square"},name:"Revenue Amount",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_revenue}})),showInLegend:!1},{type:"spline",marker:{radius:4,lineWidth:1,symbol:"diamond"},name:"Revenue Amount",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.ppm_revenue}})),showInLegend:!1}]}),ref:n})})})),mt=t(80318),It=t(38460),pt=(0,k.Ps)(tt||(tt=(0,z.Z)(["\n  query CustomerDebt(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_finance_debt_order_by!]\n    $outstanding_levels: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    customers: getDashboard_Financial_Debt_By_Customer(\n      limit: $limit\n      offset: $offset\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: $orderBy\n    ) {\n      customer: Account {\n        id\n        name\n      }\n      total_invoice_count\n      total_invoice_amount\n      outstanding_invoice_count\n      outstanding_invoice_amount\n      outstanding_0_30\n      outstanding_31_60\n      outstanding_61_90\n      outstanding_91_x\n    }\n    meta: getDashboard_Financial_Debt_By_Customer_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          total_invoice_count\n          total_invoice_amount\n          outstanding_invoice_count\n          outstanding_invoice_amount\n          outstanding_0_30\n          outstanding_31_60\n          outstanding_61_90\n          outstanding_91_x\n        }\n        totalCount: count\n      }\n    }\n  }\n"]))),gt=t(57460),vt=t.n(gt),yt=t(30493),$t=t(18862),ft=t(80285),bt=t(58448),xt=t(81185),ht=t(49705),_t=function(e,n,t){return e&&n?"".concat(t?(0,ft.Z)(e):e||0," (").concat(Math.round(e/n*100),"%)"):"".concat(t?(0,ft.Z)(e):e||0)},Tt=t(42772);function jt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Ct(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?jt(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var At,Pt,Ot,wt,St,Dt,Ft,Bt,Zt={item:"outstanding_invoice_amount",order:"desc"},Lt=(0,D.forwardRef)((function(e,n){var t,a,r,i=e.filters,o=e.removeChart,s=(0,ht.x)({filters:i,initialSort:Zt}),d=s.initialData,c=s.ref,l=(0,D.useState)(),u=l[0],m=l[1],g=(0,q.a)(pt,{variables:Ct(Ct({},d),{},{outstanding_levels:u})}),v=g.data,$=(v=void 0===v?{customers:[],meta:{aggregate:{}}}:v).customers,f=v.meta,b=g.loading,x=g.refetch,h=(0,It.t)(pt,{variables:{limit:yt.C1.paginationSize,offset:((null===(t=c.current)||void 0===t?void 0:t.currentPage)-1||0)*yt.C1.paginationSize,orderBy:(0,O.Z)({},null===(a=c.current)||void 0===a?void 0:a.sort.item,null===(r=c.current)||void 0===r?void 0:r.sort.order),outstanding_levels:u},onCompleted:function(e){var n=vt().unparse(function(e){return e.map((function(e){return{name:e.customer.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:_t(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:_t(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:_t(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:_t(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:_t(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,ft.Z)(e.total_invoice_amount),outstanding_invoice_amount:_t(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}}))}(e.customers)),t="data:application/octet-stream,"+encodeURIComponent(n);(0,Tt.S)(t,"customer-debt.csv")}}),_=(0,mt.Z)(h,1)[0],T=function(e){var n=e.accountId,t=e.level,a=e.number,r="/dashboard/customers/view?id=".concat(n),o="&endDate=".concat((0,$t.Z)(i.endDate)),s="&startDate=".concat((0,$t.Z)(i.startDate));return(0,G.jsx)(y.Z,{to:"".concat(r,"&tab=finance&outstandingLevel=").concat(t).concat(s).concat(o),children:a})},j=[{hidden:!0},{formatter:function(e){return function(e){return(0,G.jsx)(y.Z,{to:"/dashboard/customers/view?id=".concat(e.accountId,"&tab=finance"),children:e.name})}(e.row)},text:"Customer"},{sortable:!0,sortName:"total_invoice_count",text:"Invoice Count"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:0,number:n.outstanding_invoice_count})},sortable:!0,sortName:"outstanding_invoice_count",text:"Outstanding Invoices"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:1,number:n.outstanding_0_30})},sortable:!0,sortName:"outstanding_0_30",text:"Outstanding 1-30"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:31,number:n.outstanding_31_60})},sortable:!0,sortName:"outstanding_31_60",text:"Outstanding 31-60"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:61,number:n.outstanding_61_90})},sortable:!0,sortName:"outstanding_61_90",text:"Outstanding 61-90"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:91,number:n.outstanding_91_x})},sortable:!0,sortName:"outstanding_91_x",text:"Outstanding > 90"},{sortable:!0,sortName:"total_invoice_amount",text:"Total Invoice Amount"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:0,number:n.outstanding_invoice_amount})},sortable:!0,sortName:"outstanding_invoice_amount",text:"Outstanding Amount"}],C=function(e){m(e)};return(0,G.jsxs)(W.J,{isTable:!0,name:"CustomerDebtTable",removeChart:o,title:"Customer Debt",children:[(0,G.jsx)(I.Z,{children:(0,G.jsx)(p.Z,{md:1,children:(0,G.jsx)(Z.Z,{content:"Export to CSV",context:"secondary",onClick:_,title:"Export to CSV",size:"sm"})})}),f.aggregate.sum&&(0,G.jsxs)(bt.Z,{align:"flex-end",children:[(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Invoice Count: ",(0,G.jsx)("b",{children:f.aggregate.sum.total_invoice_count})]}),context:"secondary",onClick:function(e){return C(null)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding Invoices:",(0,G.jsx)("b",{children:_t(f.aggregate.sum.outstanding_invoice_count,f.aggregate.sum.total_invoice_count)})]}),context:"secondary",outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding 1-30:",(0,G.jsx)("b",{children:_t(f.aggregate.sum.outstanding_0_30,f.aggregate.sum.outstanding_invoice_count)})]}),context:1===u?"success":"secondary",onClick:function(e){return C(1)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding 31-60:",(0,G.jsx)("b",{children:_t(f.aggregate.sum.outstanding_31_60,f.aggregate.sum.outstanding_invoice_count)})]}),context:31===u?"success":"secondary",onClick:function(e){return C(31)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding 61-90:",(0,G.jsx)("b",{children:_t(f.aggregate.sum.outstanding_61_90,f.aggregate.sum.outstanding_invoice_count)})]}),context:61===u?"success":"secondary",onClick:function(e){return C(61)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding > 90:",(0,G.jsx)("b",{children:_t(f.aggregate.sum.outstanding_91_x,f.aggregate.sum.outstanding_invoice_count)})]}),context:91===u?"success":"secondary",onClick:function(e){return C(91)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Total Invoice Amount: ",(0,G.jsx)("b",{children:(0,ft.Z)(f.aggregate.sum.total_invoice_amount)})]}),context:"secondary",outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding Amount:",(0,G.jsx)("b",{children:_t(f.aggregate.sum.outstanding_invoice_amount,f.aggregate.sum.total_invoice_amount,!0)})]}),context:"secondary",outline:!0,size:"sm"})]}),(0,G.jsx)(xt.t,{columns:j,history:!1,initialSort:Zt,loading:b,meta:f,ref:c,refetch:x,rows:$.map((function(e){return{accountId:e.customer.id,name:e.customer.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:_t(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:_t(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:_t(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:_t(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:_t(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,ft.Z)(e.total_invoice_amount),outstanding_invoice_amount:_t(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}}))})]})})),Rt=(0,k.Ps)(At||(At=(0,z.Z)(["\n  query GetDisputeRateByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    disputeByMonth: getDashboard_DisputeRate_By_Month(\n      order_by: { strval_extra: asc, count: desc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      month: strval_extra\n      disputeRate: count\n    }\n    meta: getDashboard_DisputeRate_By_Month_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          disputeRate: count\n        }\n      }\n    }\n  }\n"]))),Jt=(0,D.forwardRef)((function(e,n){var a,r,i=e.filters,o=e.removeChart,s=(0,q.a)(Rt,{variables:{adminId:i.adminId,customerId:i.customerId,endTime:i.endDate,isFixed:i.isFixed,isPlanned:i.isPlanned,locationId:i.locationId,managerId:i.managerId,postCodeAreaId:i.postCodeAreaId,serviceId:i.serviceId,slaId:i.slaId,startTime:i.startDate,supplierId:i.supplierId}}).data,d=(s=void 0===s?{disputeByMonth:[],meta:{}}:s).disputeByMonth,c=s.meta;return t(18393)(E()),d&&(0,G.jsx)(W.J,{name:"DisputeRateChart",removeChart:o,title:"Average Dispute Rate By Month (".concat(Number(null===(a=c.aggregate)||void 0===a?void 0:a.avg.disputeRate).toFixed(2),")"),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(r=d,{chart:{type:"column"},title:{text:null},series:[{data:r.map((function(e){return{name:fe()(e.month,"YYYY-M").format("MMM YYYY"),y:e.disputeRate||0}})),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}}),ref:n})})})),qt=(0,k.Ps)(Pt||(Pt=(0,z.Z)(["\n  query GetJobsByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsByDay: getDashboard_Count_By_Date(\n      order_by: { date_val1_extra: asc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n    meta: getDashboard_Count_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]))),zt=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=(0,q.a)(qt,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,o=(i=void 0===i?{jobsByDay:[]}:i).jobsByDay;return t(18393)(E()),o&&(0,G.jsx)(W.J,{title:"Total bookings by Day",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=o,{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}},series:[{name:"count",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}})),showInLegend:!1}]}),ref:n})})})),kt=t(1032),Nt=(0,k.Ps)(Ot||(Ot=(0,z.Z)(["\n  query GetJobsByService(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsByService: getDashboard_Service(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { count: desc }\n    ) {\n      servicename: name\n      count: count\n      serviceid: id\n    }\n    meta: getDashboard_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n  }\n"]))),Mt=(0,D.forwardRef)((function(e,n){var a,r,i=e.filters,o=e.removeChart,s=(0,q.a)(Nt,{variables:{adminId:i.adminId,customerId:i.customerId,endTime:i.endDate,isFixed:i.isFixed,isPlanned:i.isPlanned,locationId:i.locationId,managerId:i.managerId,postCodeAreaId:i.postCodeAreaId,serviceId:i.serviceId,slaId:i.slaId,startTime:i.startDate,supplierId:i.supplierId}}).data,d=(s=void 0===s?{meta:{},jobsByService:[]}:s).meta,c=s.jobsByService;return t(18393)(E()),(0,G.jsx)(W.J,{name:"JobsByService",removeChart:o,title:"Total bookings by Service (".concat(null===(a=d.aggregate)||void 0===a?void 0:a.sum.count,")"),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(r=c,{chart:{type:"pie"},title:{text:null},series:[{data:r.map((function(e){return{name:e.servicename,y:e.count}})),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}}),ref:n})})})),Et=(0,k.Ps)(wt||(wt=(0,z.Z)(["\n  query GetDashboard_SlA(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsla: getDashboard_SLA(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { name: asc }\n    ) {\n      count\n      sla_name: name\n    }\n  }\n"]))),Ht=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Et,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{jobsla:[]}:o).jobsla;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"jobsBySLA",removeChart:i,title:"Bookings By SLAs",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1},title:{text:"SLAs",align:"center",verticalAlign:"middle",y:60},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-50,style:{fontWeight:"bold",color:"white"}},startAngle:-90,endAngle:90,center:["50%","75%"],size:"110%"}},series:[{type:"pie",name:"SLA",innerSize:"50%",data:a.map((function(e){return{name:e.sla_name,y:e.count}})),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}}),ref:n})})})),Qt=t(66238),Wt=(0,k.Ps)(St||(St=(0,z.Z)(["\n  query GetJobsFinancialByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsFinancialByDay: getDashboard_Financial_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      customerAmount: reactive_customer\n      supplierAmount: reactive_supplier\n      jobDate: date_val1_extra\n      jobRevenue: reactive_revenue\n    }\n    meta: getDashboard_Financial_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          sumJobRevenue: reactive_revenue\n        }\n      }\n    }\n  }\n"]))),Gt=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Wt,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{jobsFinancialByDay:[]}:o).jobsFinancialByDay;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"JobsFinancialByDayLineChart",removeChart:i,title:"Total Revenue by Day",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{type:"column",name:"Job Amount",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.customerAmount}})),showInLegend:!1},{type:"column",name:"Revenu",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.jobRevenue}})),showInLegend:!1}]}),ref:n})})})),Vt=(0,k.Ps)(Dt||(Dt=(0,z.Z)(["\n  query GetSLAJobsByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobSLAByMonth: getDashboard_SLA_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { strval_extra: desc }\n    ) {\n      slaname: name\n      count\n      month: strval_extra\n      p1: value\n      p5: intval_extra\n      p2: reactive_customer\n      P3: ppm_customer\n      P4: reactive_supplier\n    }\n  }\n"]))),Yt=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Vt,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{jobSLAByMonth:[]}:o).jobSLAByMonth;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"JobSLAByMonth",removeChart:i,title:"Monthly SLAs ",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"spline"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:null},tooltip:{headerFormat:"<b>{series.slaname}</b><br>",pointFormat:"{series.count}"},plotOptions:{series:{marker:{enabled:!0}}},series:[{name:"P1",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.P1}}))},{name:"P2",data:a.map((function(e){return{nam:(0,K.Z)(new Date(e.month),"LLL yyyy"),name:e.month,y:e.P2}}))},{name:"P3",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.P3}}))},{name:"P4",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.P4}}))},{name:"P5",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.P5}}))}]}),ref:n})})})),Ut=(0,k.Ps)(Ft||(Ft=(0,z.Z)(["\n  query GetNewCustomerAccounts(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    newCustomerAccounts: getDashboard_Count_New_Customer_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: desc }\n    ) {\n      date: date_val1_extra\n      count\n    }\n    meta: getDashboard_Count_New_Customer_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),Xt=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Ut,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{newCustomerAccounts:[]}:o).newCustomerAccounts;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"NewCustomerAccountsChart",removeChart:i,title:"New Customer Accounts",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"column",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"yyyy dd MMM"),y:e.count||0}})),name:"Active Customer",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}}),ref:n})})})),Kt=(0,k.Ps)(Bt||(Bt=(0,z.Z)(["\n  query GetAverageProfit(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    quoteAcceptanceRate: getDashboard_Quote_Acceptance_Rate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: value\n      date: date_val1_extra\n    }\n    meta: getDashboard_Quote_Acceptance_Rate_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function ea(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function na(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ea(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ea(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ta=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,Ae.x)().user,i=(0,Pe.cI)({defaultValues:na({},a)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:a},I=u("intervals");return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("form",{onSubmit:d((function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,o=na(na(na({},t),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:a,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)})),children:(0,G.jsxs)(de.Z,{children:[(0,G.jsx)(Ge,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===I&&(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,na(na({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,na(na({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,na(na({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,G.jsx)(qe,na(na({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,na(na({},m),{},{name:"locationId",type:"property",control:o})),(0,G.jsx)(qe,na(na({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,G.jsx)(de.Z,{direction:"row",justifyContent:"space-between",children:(0,G.jsx)(qe,na(na({},m),{},{name:"managerId",type:"user",control:o}))}),(0,G.jsxs)(de.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,G.jsx)(Oe.Z,{onClick:function(){l({initialFilters:t}),n(t)},variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,G.jsx)(Oe.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function aa(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ra(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?aa(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aa(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ia,oa,sa=(0,D.forwardRef)((function(e,n){var a,r,i,o,s,d,c=e.removeChart,l=(0,Ae.x)().user,u=R.find((function(e){return e.default})),m=ra(ra({},J(u.value)),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:l.accountId,accountType:l.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null})),I=(0,D.useState)(m),p=I[0],g=I[1],v=(0,D.useState)(!1),y=v[0],$=v[1],f=(0,q.a)(Kt,{onCompleted:function(){$(!1)},variables:{adminId:p.adminId,customerId:null===(a=p.customerId)||void 0===a?void 0:a.value,endTime:p.endDate,locationId:null===(r=p.locationId)||void 0===r?void 0:r.value,managerId:null===(i=p.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=p.serviceId)||void 0===o?void 0:o.value,startTime:p.startDate,supplierId:null===(s=p.supplierId)||void 0===s?void 0:s.value}}).data,b=(f=void 0===f?{quoteAcceptanceRate:[]}:f).quoteAcceptanceRate;return t(18393)(E()),b&&(0,G.jsx)(je,{name:"QuoteAcceptanceRateChart",removeChart:c,title:"Quote Acceptance Rate",openModal:y,setOpenModal:$,filtersComponent:(0,G.jsx)(ta,{filters:p,initialFilters:m,setFilters:g}),activeFiltersComponent:(0,G.jsx)(nn,{filters:p}),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(d=b,{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{data:d.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count||0}})),name:"%",showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"%"}}}),ref:n})})})),da=(0,k.Ps)(ia||(ia=(0,z.Z)(["\n  query GetNewCustomerAccounts(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    newSupplierAccounts: getDashboard_Count_New_Supplier_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: desc }\n    ) {\n      date: date_val1_extra\n      count\n    }\n    meta: getDashboard_Count_New_Supplier_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),ca=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(da,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{newSupplierAccounts:[]}:o).newSupplierAccounts;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"NewSupplierAccountsChart",removeChart:i,title:"New Supplier Accounts",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"column",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"yyyy dd MMM"),y:e.count||0}})),name:"Active Supplier",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}}),ref:n})})})),la=(0,k.Ps)(oa||(oa=(0,z.Z)(["\n  query GetPercentageOfSpendByServiceLine(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    percentageOfSpendByServiceLine: getDashboard_Count_All_Job_by_Service(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      serviceName: strval_extra\n      currentAmount: reactive_customer\n      lastAmount: ppm_customer\n    }\n    meta: getDashboard_Count_All_Job_by_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function ua(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ma(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ua(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ua(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ia,pa={item:"reactive_customer",order:"desc"},ga=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:pa}),i=r.initialData,o=r.ref,s=(0,q.a)(la,{variables:ma(ma({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{percentageOfSpendByServiceLine:[],meta:{aggregate:{}}}:d).percentageOfSpendByServiceLine,l=d.meta,u=s.loading,m=s.refetch;return(0,G.jsx)(W.J,{isTable:!0,name:"PercentageOfSpendByServiceLineTable",removeChart:a,title:"% Of Spend By Service Line",children:(0,G.jsx)(xt.t,{columns:[{text:"Service Name"},{sortable:!0,sortName:"reactive_customer",text:"Current Amount"},{sortable:!0,sortName:"last_amount",text:"Last Amount"}],history:!1,initialSort:pa,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{serviceName:e.serviceName,currentAmount:e.currentAmount,lastAmount:e.lastAmount}}))})})})),va=(0,k.Ps)(Ia||(Ia=(0,z.Z)(["\n  query GetPercentageOfWorkOrdersByServiceLine(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    percentageOfWorkOrdersByServiceLine: getDashboard_Count_Job_by_Service(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      countLastYear: value\n      countJobIdCurrentYear: intval_extra\n      serviceName: strval_extra\n    }\n    meta: getDashboard_Count_Job_by_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { intval_extra: desc }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function ya(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function $a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ya(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ya(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var fa,ba,xa,ha={item:"intval_extra",order:"desc"},_a=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:ha}),i=r.initialData,o=r.ref,s=(0,q.a)(va,{variables:$a($a({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{percentageOfWorkOrdersByServiceLine:[],meta:{aggregate:{}}}:d).percentageOfWorkOrdersByServiceLine,l=d.meta,u=s.loading,m=s.refetch;return(0,G.jsx)(W.J,{isTable:!0,name:"PercentageOfWorkOrdersByServiceLineTable",removeChart:a,title:"% Of Work Orders By Service Line",children:(0,G.jsx)(xt.t,{columns:[{text:"Service name"},{sortable:!0,sortName:"intval_extra",text:"current year"},{sortable:!0,sortName:"value",text:" last year"}],history:!1,initialSort:ha,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{serviceName:e.serviceName,countJobIdCurrentYear:e.countJobIdCurrentYear,countLastYear:e.countLastYear}}))})})})),Ta=(0,k.Ps)(fa||(fa=(0,z.Z)(["\n  query getDashboard_Financial_By_Month(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    financebymonth: getDashboard_Financial_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      month: name\n      reactive_customer\n      reactive_revenue\n      reactive_supplier\n    }\n  }\n"]))),ja=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Ta,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{financebymonth:[]}:o).financebymonth;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"ReactiveAmountByMonth",removeChart:i,title:"Supplier/Customer Amounts By Month",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amount(\xa3)"}},labels:{items:[{style:{fontSize:"15px",left:"50px",top:"18px"}}]},series:[{type:"column",name:"Customer",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_customer}}))},{type:"column",name:"supplier",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_supplier}}))},{type:"spline",name:"Revenue",marker:{lineWidth:2,fillColor:"white"},data:a.map((function(e){return{name:(0,K.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_revenue}}))}]}),ref:n})})})),Ca=(0,k.Ps)(ba||(ba=(0,z.Z)(["\n  query GetDashboard_SlA(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    sla: getDashboard_SLA(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { name: asc }\n    ) {\n      count\n      sla_name: name\n      Breached_Count: ppm_customer\n      Live_Count: reactive_customer\n    }\n  }\n"]))),Aa=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Ca,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{sla:[]}:o).sla;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"ReactiveBySLA",removeChart:i,title:"Reactive By SLA",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"bar"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{min:0,labels:{overflow:"justify"}},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,shadow:!0},credits:{enabled:!1},series:[{name:"live jobs",data:a.map((function(e){return{name:e.sla_name,y:e.Live_Count}})),showInLegend:!1},{name:"Breached jobs",data:a.map((function(e){return{name:e.sla_name,y:e.Breached_Count}})),showInLegend:!1}]}),ref:n})})})),Pa=(0,k.Ps)(xa||(xa=(0,z.Z)(["\n  query GetSpendByCoverageArea(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    spendByCoverageArea: getDashboard_Sum_CustomerAmount_By_Coverage(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      coverage: strval_extra\n      total: reactive_customer\n    }\n    meta: getDashboard_Sum_CustomerAmount_By_Coverage_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function Oa(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function wa(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Oa(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oa(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Sa,Da,Fa,Ba,Za={item:"reactive_customer",order:"desc"},La=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:Za}),i=r.initialData,o=r.ref,s=(0,q.a)(Pa,{variables:wa(wa({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{spendByCoverageArea:[],meta:{aggregate:{}}}:d).spendByCoverageArea,l=d.meta,u=s.loading,m=s.refetch;return(0,G.jsx)(W.J,{isTable:!0,name:"SpendByCoverageAreaTable",removeChart:a,title:"Spend By Coverage Area",children:(0,G.jsx)(xt.t,{columns:[{text:"coverage"},{sortable:!0,sortName:"reactive_customer",text:"Total"}],history:!1,initialSort:Za,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{coverage:e.coverage,total:e.total}}))})})})),Ra=(0,k.Ps)(Sa||(Sa=(0,z.Z)(["\n  query GetNewCustomerAccounts(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    spendFromNewCustomerAccounts: getDashboard_Count_New_Customer_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      count: count\n    }\n    meta: getDashboard_Count_New_Customer_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),Ja=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Ra,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{spendFromNewCustomerAccounts:[]}:o).spendFromNewCustomerAccounts;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"SpendFromNewCustomerAccountsChart",removeChart:i,title:"Spend From New Customer Accounts",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"column",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"yyyy dd MMM"),y:e.count||0}})),name:"Active Customer",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}}),ref:n})})})),qa=(0,k.Ps)(Da||(Da=(0,z.Z)(["\n  query GetSumQuoteAcceptedByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Sum_Quote_Accepted_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    sumQuoteAccepted: getDashboard_Sum_Quote_Accepted_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      sum: reactive_customer\n      jobDate: date_val1_extra\n    }\n  }\n"]))),za=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(qa,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{sumQuoteAccepted:[]}:o).sumQuoteAccepted;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"SumQuoteAccepted",removeChart:i,title:"Value of Quotes Accepted By Date",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{name:"sum",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.sum}})),showInLegend:!1}]}),ref:n})})})),ka=(0,k.Ps)(Fa||(Fa=(0,z.Z)(["\n  query GetSumQuoteSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Sum_Quote_Quotations_Sent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    sumQuoteSent: getDashboard_Sum_Quote_Quotations_Sent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      sum: reactive_customer\n      jobDate: date_val1_extra\n    }\n  }\n"]))),Na=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(ka,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{sumQuoteSent:[]}:o).sumQuoteSent;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"SumQuoteSent",removeChart:i,title:"Value Of Quotations Sent By Date",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{name:"sum",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.sum}})),showInLegend:!1}]}),ref:n})})})),Ma=(0,k.Ps)(Ba||(Ba=(0,z.Z)(["\n  query SupplierDebt(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_finance_debt_order_by!]\n    $outstanding_levels: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    suppliers: getDashboard_Financial_Debt_By_Supplier(\n      limit: $limit\n      offset: $offset\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: $orderBy\n    ) {\n      supplier: Account {\n        id\n        name\n      }\n      total_invoice_count\n      total_invoice_amount\n      outstanding_invoice_count\n      outstanding_invoice_amount\n      outstanding_0_30\n      outstanding_31_60\n      outstanding_61_90\n      outstanding_91_x\n    }\n    meta: getDashboard_Financial_Debt_By_Supplier_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          total_invoice_count\n          total_invoice_amount\n          outstanding_invoice_count\n          outstanding_invoice_amount\n          outstanding_0_30\n          outstanding_31_60\n          outstanding_61_90\n          outstanding_91_x\n        }\n        totalCount: count\n      }\n    }\n  }\n"]))),Ea=function(e,n,t){return e&&n?"".concat(t?(0,ft.Z)(e):e||0," (").concat(Math.round(e/n*100),"%)"):"".concat(t?(0,ft.Z)(e):e||0)};function Ha(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Qa(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ha(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ha(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Wa,Ga={item:"outstanding_invoice_amount",order:"desc"},Va=(0,D.forwardRef)((function(e,n){var t,a,r,i=e.filters,o=e.removeChart,s=(0,ht.x)({filters:i,initialSort:Ga}),d=s.initialData,c=s.ref,l=(0,D.useState)(),u=l[0],m=l[1],g=(0,q.a)(Ma,{variables:Qa(Qa({},d),{},{outstanding_levels:u})}),v=g.data,$=(v=void 0===v?{suppliers:[],meta:{aggregate:{}}}:v).suppliers,f=v.meta,b=g.loading,x=g.refetch,h=(0,It.t)(Ma,{variables:Qa(Qa({},d),{},{limit:yt.C1.paginationSize,offset:((null===(t=c.current)||void 0===t?void 0:t.currentPage)-1||0)*yt.C1.paginationSize,orderBy:(0,O.Z)({},null===(a=c.current)||void 0===a?void 0:a.sort.item,null===(r=c.current)||void 0===r?void 0:r.sort.order),outstanding_levels:u}),onCompleted:function(e){var n=vt().unparse(function(e){return e.map((function(e){return{name:e.customer.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:Ea(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:Ea(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:Ea(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:Ea(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:Ea(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,ft.Z)(e.total_invoice_amount),outstanding_invoice_amount:Ea(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}}))}(e.suppliers)),t="data:application/octet-stream,"+encodeURIComponent(n);(0,Tt.S)(t,"customer-debt.csv")}}),_=(0,mt.Z)(h,1)[0],T=function(e){var n=e.accountId,t=e.level,a=e.number,r="/dashboard/suppliers/view?id=".concat(n),o="&endDate=".concat((0,$t.Z)(i.endDate)),s="&startDate=".concat((0,$t.Z)(i.startDate));return(0,G.jsx)(y.Z,{to:"".concat(r,"&tab=finance&outstandingLevel=").concat(t).concat(s).concat(o),children:a})},j=[{hidden:!0},{formatter:function(e){return function(e){return(0,G.jsx)(y.Z,{to:"/dashboard/suppliers/view?id=".concat(e.accountId,"&tab=finance"),children:e.name})}(e.row)},text:"Supplier"},{sortable:!0,sortName:"total_invoice_count",text:"Invoice Count"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:0,number:n.outstanding_invoice_count})},sortable:!0,sortName:"outstanding_invoice_count",text:"Outstanding Invoices"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:1,number:n.outstanding_0_30})},sortable:!0,sortName:"outstanding_0_30",text:"Outstanding 1-30"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:31,number:n.outstanding_31_60})},sortable:!0,sortName:"outstanding_31_60",text:"Outstanding 31-60"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:61,number:n.outstanding_61_90})},sortable:!0,sortName:"outstanding_61_90",text:"Outstanding 61-90"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:91,number:n.outstanding_91_x})},sortable:!0,sortName:"outstanding_91_x",text:"Outstanding > 90"},{sortable:!0,sortName:"total_invoice_amount",text:"Total Invoice Amount"},{formatter:function(e){var n=e.row;return T({accountId:n.accountId,level:0,number:n.outstanding_invoice_amount})},sortable:!0,sortName:"outstanding_invoice_amount",text:"Outstanding Amount"}],C=function(e){m(e)};return(0,G.jsxs)(W.J,{isTable:!0,name:"SupplierDebtTable",removeChart:o,title:"Supplier Debt",children:[(0,G.jsx)(I.Z,{children:(0,G.jsx)(p.Z,{md:1,children:(0,G.jsx)(Z.Z,{content:"Export to CSV",context:"secondary",onClick:_,title:"Export to CSV",size:"sm"})})}),f.aggregate.sum&&(0,G.jsxs)(bt.Z,{align:"flex-end",children:[(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Invoice Count: ",(0,G.jsx)("b",{children:f.aggregate.sum.total_invoice_count})]}),context:"secondary",onClick:function(e){return C(null)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding Invoices:",(0,G.jsx)("b",{children:Ea(f.aggregate.sum.outstanding_invoice_count,f.aggregate.sum.total_invoice_count)})]}),context:"secondary",outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding 1-30:",(0,G.jsx)("b",{children:Ea(f.aggregate.sum.outstanding_0_30,f.aggregate.sum.outstanding_invoice_count)})]}),context:1===u?"success":"secondary",onClick:function(e){return C(1)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding 31-60:",(0,G.jsx)("b",{children:Ea(f.aggregate.sum.outstanding_31_60,f.aggregate.sum.outstanding_invoice_count)})]}),context:31===u?"success":"secondary",onClick:function(e){return C(31)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding 61-90:",(0,G.jsx)("b",{children:Ea(f.aggregate.sum.outstanding_61_90,f.aggregate.sum.outstanding_invoice_count)})]}),context:61===u?"success":"secondary",onClick:function(e){return C(61)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding > 90:",(0,G.jsx)("b",{children:Ea(f.aggregate.sum.outstanding_91_x,f.aggregate.sum.outstanding_invoice_count)})]}),context:91===u?"success":"secondary",onClick:function(e){return C(91)},outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Total Invoice Amount: ",(0,G.jsx)("b",{children:(0,ft.Z)(f.aggregate.sum.total_invoice_amount)})]}),context:"secondary",outline:!0,size:"sm"}),(0,G.jsx)(Z.Z,{content:(0,G.jsxs)(G.Fragment,{children:["Outstanding Amount:",(0,G.jsx)("b",{children:Ea(f.aggregate.sum.outstanding_invoice_amount,f.aggregate.sum.total_invoice_amount,!0)})]}),context:"secondary",outline:!0,size:"sm"})]}),(0,G.jsx)(xt.t,{columns:j,history:!1,initialSort:Ga,loading:b,meta:f,ref:c,refetch:x,rows:$.map((function(e){var n,t;return{accountId:null===(n=e.supplier)||void 0===n?void 0:n.id,name:null===(t=e.supplier)||void 0===t?void 0:t.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:Ea(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:Ea(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:Ea(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:Ea(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:Ea(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,ft.Z)(e.total_invoice_amount),outstanding_invoice_amount:Ea(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}}))})]})})),Ya=(0,k.Ps)(Wa||(Wa=(0,z.Z)(["\n  query GetTopAssetsByNumberOfJobs(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topAssetsByNumberOfJobs: getDashboard_Asset(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      assetName: strval_extra\n      amount: ppm_customer\n      countOfferedJob: count\n    }\n    meta: getDashboard_Asset_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function Ua(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Xa(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ua(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ua(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ka,er={item:"ppm_customer",order:"desc"},nr=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:er}),i=r.initialData,o=r.ref,s=(0,q.a)(Ya,{variables:Xa(Xa({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topAssetsByNumberOfJobs:[],meta:{aggregate:{}}}:d).topAssetsByNumberOfJobs,l=d.meta,u=s.loading,m=s.refetch,I=[{text:"Name"},{sortable:!0,sortName:"ppm_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,ft.Z)(n.amount)}},{sortable:!0,sortName:"count",text:"Count Offered Job"}];return(0,G.jsx)(W.J,{isTable:!0,name:"TopAssetsByNumberOfJobsTable",removeChart:a,title:"Top Assets By Number Of Jobs",children:(0,G.jsx)(xt.t,{columns:I,history:!1,initialSort:er,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{assetName:e.assetName,amount:e.amount,countOfferedJob:e.countOfferedJob}}))})})})),tr=(0,k.Ps)(Ka||(Ka=(0,z.Z)(["\n  query GetTopAssetsBySpend(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topAssetsBySpend: getDashboard_Asset(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      assetName: strval_extra\n      asset_id: intval_extra\n      amount: reactive_customer\n    }\n    meta: getDashboard_Asset_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function ar(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function rr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ar(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ar(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ir,or={item:"reactive_customer",order:"desc"},sr=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:or}),i=r.initialData,o=r.ref,s=(0,q.a)(tr,{variables:rr(rr({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topAssetsBySpend:[],meta:{aggregate:{}}}:d).topAssetsBySpend,l=d.meta,u=s.loading,m=s.refetch,I=[{text:"Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,ft.Z)(n.amount)}}];return(0,G.jsx)(W.J,{isTable:!0,name:"TopAssetsBySpendTable",removeChart:a,title:"Top Assets By Spend",children:(0,G.jsx)(xt.t,{columns:I,history:!1,initialSort:or,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{assetName:e.assetName,amount:e.amount}}))})})})),dr=(0,k.Ps)(ir||(ir=(0,z.Z)(["\n  query GetTopAssetTypesBySpend(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topAssetTypesBySpend: getDashboard_AssetTypes(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      amount: reactive_customer\n      assetTypeName: strval_extra\n      assetTypeID: intval_extra\n    }\n    meta: getDashboard_AssetTypes_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function cr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function lr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?cr(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ur,mr={item:"reactive_customer",order:"desc"},Ir=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:mr}),i=r.initialData,o=r.ref,s=(0,q.a)(dr,{variables:lr(lr({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topAssetTypesBySpend:[],meta:{aggregate:{}}}:d).topAssetTypesBySpend,l=d.meta,u=s.loading,m=s.refetch,I=[{text:"Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,ft.Z)(n.amount)}}];return(0,G.jsx)(W.J,{isTable:!0,name:"TopAssetTypesBySpendTable",removeChart:a,title:"Top Asset Types By Spend",children:(0,G.jsx)(xt.t,{columns:I,history:!1,initialSort:mr,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{assetTypeName:e.assetTypeName,amount:e.amount}}))})})})),pr=(0,k.Ps)(ur||(ur=(0,z.Z)(["\n  query GetTopCustomersByNumberOfProperties(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topCustomersByNumberOfProperties: getDashboard_Customers_By_Location(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      countLocationId: value\n      accountName: strval_extra\n      customerAmount: reactive_amount\n    }\n\n    meta: getDashboard_Customers_By_Location_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function gr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function vr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?gr(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var yr,$r,fr={item:"reactive_customer",order:"desc"},br=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:fr}),i=r.initialData,o=r.ref,s=(0,q.a)(pr,{variables:vr(vr({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topCustomersByNumberOfProperties:[],meta:{aggregate:{}}}:d).topCustomersByNumberOfProperties,l=d.meta,u=s.loading,m=s.refetch,I=[{text:"Account name"},{sortable:!0,sortName:"reactive_customer",text:"Count Location"},{text:"Customer amount",formatter:function(e){var n=e.row;return(0,ft.Z)(n.customerAmount)}}];return(0,G.jsx)(W.J,{isTable:!0,name:"TopCustomersByNumberOfPropertiesTable",removeChart:a,title:"Top Customers By Number Of Properties",children:(0,G.jsx)(xt.t,{columns:I,history:!1,initialSort:fr,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{accountName:e.accountName,countLocationId:e.countLocationId,customerAmount:e.customerAmount}}))})})})),xr=(0,k.Ps)(yr||(yr=(0,z.Z)(["\n  query GetTopCustomersByProfit(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topCustomersByProfit: getDashboard_Customer_Profit(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: reactive_customer\n    }\n    meta: getDashboard_Customer_Profit_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),hr=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(xr,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{topCustomersByProfit:[]}:o).topCustomersByProfit;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"TopCustomersByProfitChart",removeChart:i,title:"Top Customers By Profit",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}})),name:"Amount",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amount(\xa3)"}}}),ref:n})})})),_r=(0,k.Ps)($r||($r=(0,z.Z)(["\n  query GetTopPropertiesBySpend(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topPropertiesBySpend: getDashboard_Location(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      locationName: strval_extra\n      locationId: intval_extra\n      amount: reactive_customer\n    }\n    meta: getDashboard_Location_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function Tr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function jr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Tr(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Cr,Ar={item:"reactive_customer",order:"desc"},Pr=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:Ar}),i=r.initialData,o=r.ref,s=(0,q.a)(_r,{variables:jr(jr({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topPropertiesBySpend:[],meta:{aggregate:{}}}:d).topPropertiesBySpend,l=d.meta,u=s.loading,m=s.refetch,I=[{text:"Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,ft.Z)(n.amount)}}];return(0,G.jsx)(W.J,{isTable:!0,name:"TopPropertiesBySpendTable",removeChart:a,title:"Top Properties By Spend",children:(0,G.jsx)(xt.t,{columns:I,history:!1,initialSort:Ar,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{locationName:e.locationName,amount:e.amount}}))})})})),Or=(0,k.Ps)(Cr||(Cr=(0,z.Z)(["\n  query GetTopSuppliersByNumberOfJobs(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topSuppliersByNumberOfJobs: getDashboard_Supplier_To_Accept_Job(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      countAcceptedJob: count\n      amountAcceptedJob: reactive_customer\n      supplierName: strval_extra\n    }\n    meta: getDashboard_Supplier_To_Accept_Job_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function wr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Sr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?wr(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Dr,Fr={item:"reactive_customer",order:"desc"},Br=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:Fr}),i=r.initialData,o=r.ref,s=(0,q.a)(Or,{variables:Sr(Sr({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topSuppliersByNumberOfJobs:[],meta:{aggregate:{}}}:d).topSuppliersByNumberOfJobs,l=d.meta,u=s.loading,m=s.refetch,I=[{text:"Supplier Name"},{sortable:!0,sortName:"count",text:"Count Accepted Job"},{sortable:!0,sortName:"reactive_customer",text:"Amount Accepted Job",formatter:function(e){var n=e.row;return(0,ft.Z)(n.amountAcceptedJob)}}];return(0,G.jsx)(W.J,{isTable:!0,name:"TopSuppliersByNumberOfJobsTable",removeChart:a,title:"Top Suppliers By Number Of Jobs and Earnings",children:(0,G.jsx)(xt.t,{columns:I,history:!1,initialSort:Fr,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{supplierName:e.supplierName,countAcceptedJob:e.countAcceptedJob,amountAcceptedJob:e.amountAcceptedJob}}))})})})),Zr=(0,k.Ps)(Dr||(Dr=(0,z.Z)(["\n  query GetTopSuppliersByQuoteReturn(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topSuppliersByQuoteReturn: getDashboard_Suppliers_By_Quote_Return(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      reactiveAmount: reactive_supplier\n      dayDifference: count\n      supplierName: strval_extra\n    }\n    meta: getDashboard_Suppliers_By_Quote_Return_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function Lr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Rr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Lr(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Lr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Jr,qr={item:"reactive_supplier",order:"desc"},zr=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:qr}),i=r.initialData,o=r.ref,s=(0,q.a)(Zr,{variables:Rr(Rr({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topSuppliersByQuoteReturn:[],meta:{aggregate:{}}}:d).topSuppliersByQuoteReturn,l=d.meta,u=s.loading,m=s.refetch;return(0,G.jsx)(W.J,{isTable:!0,name:"TopSuppliersByQuoteReturnTable",removeChart:a,title:"Top Suppliers By Quote Return",children:(0,G.jsx)(xt.t,{columns:[{text:"Supplier Name"},{sortable:!0,sortName:"reactive_suppliers",text:"Reactive Amount"},{text:"Day Difference"}],history:!1,initialSort:qr,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{supplierName:e.supplierName,reactiveAmount:e.reactiveAmount,dayDifference:e.dayDifference}}))})})})),kr=(0,k.Ps)(Jr||(Jr=(0,z.Z)(["\n  query GetTopSuppliersByTimeToSubmitJobReport(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topSuppliersByTimeToSubmitJobReport: getDashboard_Supplier_To_Submit_Job(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      supplier_name: strval_extra\n      supplier_id: value\n      amount: reactive_customer\n    }\n    meta: getDashboard_Supplier_To_Submit_Job_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function Nr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Mr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Nr(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Nr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Er,Hr,Qr,Wr,Gr={item:"reactive_customer",order:"desc"},Vr=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:Gr}),i=r.initialData,o=r.ref,s=(0,q.a)(kr,{variables:Mr(Mr({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topSuppliersByTimeToSubmitJobReport:[],meta:{aggregate:{}}}:d).topSuppliersByTimeToSubmitJobReport,l=d.meta,u=s.loading,m=s.refetch,I=[{text:"Supplier Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,ft.Z)(n.amount)}}];return(0,G.jsx)(W.J,{isTable:!0,name:"TopSuppliersByTimeToSubmitJobReportTable",removeChart:a,title:"Top Suppliers By Time To Submit Job",children:(0,G.jsx)(xt.t,{columns:I,history:!1,initialSort:Gr,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{supplier_name:e.supplier_name,amount:e.amount}}))})})})),Yr=t(79859),Ur=(0,k.Ps)(Er||(Er=(0,z.Z)(["\n  query GetFinancialByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageJobLength: getDashboard_Financial_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: reactive_revenue\n    }\n    meta: getDashboard_Financial_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),Xr=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Ur,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{averageJobLength:[]}:o).averageJobLength;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"TotalJobRevenueChart",removeChart:i,title:"Total Job Revenue",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{data:a.map((function(e){return{name:(0,K.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}})),name:"Revenue",showInLegend:!1}]}),ref:n})})})),Kr=(0,k.Ps)(Hr||(Hr=(0,z.Z)(["\n  query GetTotalQuotInvoiceSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Count_Quote_InvoiceSent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    totalQuoteInvoiceSent: getDashboard_Count_Quote_InvoiceSent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n  }\n"]))),ei=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(Kr,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{totalQuoteInvoiceSent:[]}:o).totalQuoteInvoiceSent;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"totalQuoteInvoiceSent",removeChart:i,title:"Total Quote Invoice Sent By Date",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}},series:[{name:"count",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}})),showInLegend:!1}]}),ref:n})})})),ni=(0,k.Ps)(Qr||(Qr=(0,z.Z)(["\n  query GetTotalQuoteReportSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Count_Quote_ReportSent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    totalQuoteReportSend: getDashboard_Count_Quote_ReportSent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n  }\n"]))),ti=(0,D.forwardRef)((function(e,n){var a,r=e.filters,i=e.removeChart,o=(0,q.a)(ni,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(o=void 0===o?{totalQuoteReportSend:[]}:o).totalQuoteReportSend;return t(18393)(E()),s&&(0,G.jsx)(W.J,{name:"TotalQuoteReportSent",removeChart:i,title:"Total Quote Report Sent by Date",children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(a=s,{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}},series:[{name:"count",data:a.map((function(e){return{name:(0,K.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}})),showInLegend:!1}]}),ref:n})})})),ai=(0,k.Ps)(Wr||(Wr=(0,z.Z)(["\n  query GetTotalQuoteSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    totalQuoteSent: getDashboard_Count_QuoteSent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n    meta: getDashboard_Count_QuoteSent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n  }\n"])));function ri(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ii(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ri(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ri(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var oi=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,Ae.x)().user,i=(0,Pe.cI)({defaultValues:ii({},a)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:a},I=u("intervals");return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("form",{onSubmit:d((function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,o=ii(ii(ii({},t),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:a,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)})),children:(0,G.jsxs)(de.Z,{children:[(0,G.jsx)(Ge,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===I&&(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,ii(ii({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,ii(ii({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,ii(ii({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,G.jsx)(qe,ii(ii({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,ii(ii({},m),{},{name:"locationId",type:"property",control:o})),(0,G.jsx)(qe,ii(ii({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,G.jsx)(de.Z,{direction:"row",justifyContent:"space-between",children:(0,G.jsx)(qe,ii(ii({},m),{},{name:"managerId",type:"user",control:o}))}),(0,G.jsxs)(de.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,G.jsx)(Oe.Z,{onClick:function(){l({initialFilters:t}),n(t)},variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,G.jsx)(Oe.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function si(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function di(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?si(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):si(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ci,li=(0,D.forwardRef)((function(e,n){var a,r,i,o,s,d,c=e.removeChart,l=(0,Ae.x)().user,u=R.find((function(e){return e.default})),m=di(di({},J(u.value)),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:l.accountId,accountType:l.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null})),I=(0,D.useState)(m),p=I[0],g=I[1],v=(0,D.useState)(!1),y=v[0],$=v[1],f=(0,q.a)(ai,{onCompleted:function(){$(!1)},variables:{adminId:p.adminId,customerId:null===(a=p.customerId)||void 0===a?void 0:a.value,endTime:p.endDate,locationId:null===(r=p.locationId)||void 0===r?void 0:r.value,managerId:null===(i=p.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=p.serviceId)||void 0===o?void 0:o.value,startTime:p.startDate,supplierId:null===(s=p.supplierId)||void 0===s?void 0:s.value}}).data,b=(f=void 0===f?{totalQuoteSent:[]}:f).totalQuoteSent;return t(18393)(E()),b&&(0,G.jsx)(je,{name:"TotalQuoteSentChart",removeChart:c,title:"Number Of Quotes",openModal:y,setOpenModal:$,filtersComponent:(0,G.jsx)(oi,{filters:p,initialFilters:m,setFilters:g}),activeFiltersComponent:(0,G.jsx)(nn,{filters:p}),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(d=b,{chart:{type:"column"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},xAxis:{type:"category",title:null},yAxis:{title:{text:"Count"}},series:[{name:"Count, quotes",data:d.map((function(e){return{name:(0,K.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}})),showInLegend:!1,color:"#1E88E5"}]}),ref:n})})})),ui=(0,k.Ps)(ci||(ci=(0,z.Z)(["\n  query GetWorstCustomersByAgedReceivables(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    worstCustomersByAgedReceivables: getDashboard_Customer_Aged_Receivables(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      customer_name: strval_extra\n      amount: reactive_customer\n      customer_id: value\n    }\n    meta: getDashboard_Customer_Aged_Receivables_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function mi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Ii(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?mi(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var pi,gi={item:"reactive_customer",order:"desc"},vi=(0,D.forwardRef)((function(e,n){var t=e.filters,a=e.removeChart,r=(0,ht.x)({filters:t,initialSort:gi}),i=r.initialData,o=r.ref,s=(0,q.a)(ui,{variables:Ii(Ii({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{worstCustomersByAgedReceivables:[],meta:{aggregate:{}}}:d).worstCustomersByAgedReceivables,l=d.meta,u=s.loading,m=s.refetch,I=[{text:"Customer Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,ft.Z)(n.amount)}}];return(0,G.jsx)(W.J,{isTable:!0,name:"WorstCustomersByAgedReceivablesTable",removeChart:a,title:"Worst Customers By Aged Receivables",children:(0,G.jsx)(xt.t,{columns:I,history:!1,initialSort:gi,loading:u,meta:l,ref:o,refetch:m,rows:c.map((function(e){return{customer_name:e.customer_name,amount:e.amount}}))})})})),yi=(0,k.Ps)(pi||(pi=(0,z.Z)(["\n  query GetSlaBreachCount(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    slaBreachCount: getDashboard_Count_SLA_Breach_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Count_SLA_Breach_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function $i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function fi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$i(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var bi=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,Ae.x)().user,i=(0,Pe.cI)({defaultValues:fi({},a)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:a},I=u("intervals");return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("form",{onSubmit:d((function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,o=fi(fi(fi({},t),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:a,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)})),children:(0,G.jsxs)(de.Z,{children:[(0,G.jsx)(Ge,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===I&&(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,fi(fi({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,fi(fi({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,fi(fi({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,G.jsx)(qe,fi(fi({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,fi(fi({},m),{},{name:"locationId",type:"property",control:o})),(0,G.jsx)(qe,fi(fi({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,fi(fi({},m),{},{name:"slaId",type:"sla",control:o})),(0,G.jsx)(qe,fi(fi({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,G.jsxs)(de.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,G.jsx)(Oe.Z,{onClick:function(){l({initialFilters:t}),n(t)},variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,G.jsx)(Oe.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function xi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function hi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?xi(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _i,Ti=(0,D.forwardRef)((function(e,n){var a,r,i,o,s,d,c,l=e.removeChart,u=(0,Ae.x)().user,m=R.find((function(e){return e.default})),I=hi(hi({},J(m.value)),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:u.accountId,accountType:u.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null})),p=(0,D.useState)(I),g=p[0],v=p[1],y=(0,D.useState)(!1),$=y[0],f=y[1],b=(0,q.a)(yi,{onCompleted:function(){f(!1)},variables:{adminId:g.adminId,customerId:null===(a=g.customerId)||void 0===a?void 0:a.value,endTime:g.endDate,locationId:null===(r=g.locationId)||void 0===r?void 0:r.value,managerId:null===(i=g.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=g.serviceId)||void 0===o?void 0:o.value,slaId:null===(s=g.slaId)||void 0===s?void 0:s.value,startTime:g.startDate,supplierId:null===(d=g.supplierId)||void 0===d?void 0:d.value}}).data,x=(b=void 0===b?{slaBreachCount:[]}:b).slaBreachCount;return t(18393)(E()),x&&(0,G.jsx)(je,{name:"SlaBreachCountChart",removeChart:l,title:"SLA Breach (Count)",openModal:$,setOpenModal:f,filtersComponent:(0,G.jsx)(bi,{filters:g,initialFilters:I,setFilters:v}),activeFiltersComponent:(0,G.jsx)(nn,{filters:g}),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(c=x,{chart:{type:"column"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"Count, jobs",data:c.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}})),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Count"}}}),ref:n})})})),ji=(0,k.Ps)(_i||(_i=(0,z.Z)(["\n  query GetSlaBreachPercentage(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    slaBreachPercentage: getDashboard_SLA_Breach_Percentage_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_SLA_Breach_Percentage_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function Ci(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Ai(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ci(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ci(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Pi=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,Ae.x)().user,i=(0,Pe.cI)({defaultValues:Ai({},a)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:a},I=u("intervals");return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("form",{onSubmit:d((function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,o=Ai(Ai(Ai({},t),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:a,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)})),children:(0,G.jsxs)(de.Z,{children:[(0,G.jsx)(Ge,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===I&&(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Ai(Ai({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,G.jsx)(Ie.Z,{sx:{mt:2,width:"45%"},children:(0,G.jsx)(ze.M,Ai(Ai({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Ai(Ai({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,G.jsx)(qe,Ai(Ai({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Ai(Ai({},m),{},{name:"locationId",type:"property",control:o})),(0,G.jsx)(qe,Ai(Ai({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,G.jsxs)(de.Z,{direction:"row",justifyContent:"space-between",children:[(0,G.jsx)(qe,Ai(Ai({},m),{},{name:"slaId",type:"sla",control:o})),(0,G.jsx)(qe,Ai(Ai({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,G.jsxs)(de.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,G.jsx)(Oe.Z,{onClick:function(){l({initialFilters:t}),n(t)},variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,G.jsx)(Oe.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function Oi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function wi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Oi(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Si=(0,D.forwardRef)((function(e,n){var a,r,i,o,s,d,c,l=e.removeChart,u=(0,Ae.x)().user,m=R.find((function(e){return e.default})),I=wi(wi({},J(m.value)),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:u.accountId,accountType:u.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null})),p=(0,D.useState)(I),g=p[0],v=p[1],y=(0,D.useState)(!1),$=y[0],f=y[1],b=(0,q.a)(ji,{onCompleted:function(){f(!1)},variables:{adminId:g.adminId,customerId:null===(a=g.customerId)||void 0===a?void 0:a.value,endTime:g.endDate,locationId:null===(r=g.locationId)||void 0===r?void 0:r.value,managerId:null===(i=g.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=g.serviceId)||void 0===o?void 0:o.value,slaId:null===(s=g.slaId)||void 0===s?void 0:s.value,startTime:g.startDate,supplierId:null===(d=g.supplierId)||void 0===d?void 0:d.value}}).data,x=(b=void 0===b?{slaBreachPercentage:[]}:b).slaBreachPercentage;return t(18393)(E()),x&&(0,G.jsx)(je,{name:"SlaBreachPercentageChart",removeChart:l,title:"SLA Breach (Percentage)",openModal:$,setOpenModal:f,filtersComponent:(0,G.jsx)(Pi,{filters:g,initialFilters:I,setFilters:v}),activeFiltersComponent:(0,G.jsx)(nn,{filters:g}),children:(0,G.jsx)(Q(),{callback:function(e){e.reflow()},constructorType:"chart",Highcharts:E(),options:(c=x,{chart:{type:"column"},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},title:{text:null},series:[{name:"%",data:c.map((function(e){return{name:(0,K.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}})),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Percentage"}}}),ref:n})})})),Di=t(83789),Fi=t(97202),Bi=t(84184),Zi=t(65375),Li=t(84550),Ri=t(18060),Ji=[{name:"AverageJobLengthChart",label:"Average Job Length"},{name:"AverageJobRevenueChart",label:"Average Job Revenue"},{name:"AverageProfitChart",label:"Average Profit"},{name:"AverageTimeToAcceptByMinuteChart",label:"Average Time To Accept By Minute"},{name:"AverageTimeToAttendanceChart",label:"Average Time To Attendance"},{name:"AverageToCloseByHourChart",label:"Average Time To Close By Hour"},{name:"AverageTimeToSubmitJobReportChart",label:"Average Time To Submit Job Report"},{name:"CountJobsEngagementRateChart",label:"Count Jobs Engagement Rate"},{name:"CustomerDebtTable",label:"Customer Debt"},{name:"NewCustomerAccountsChart",label:"New Customer Accounts"},{name:"SpendFromNewCustomerAccountsChart",label:"Spend From New Customer Accounts"},{name:"TotalJobRevenueChart",label:"Total Job Revenue"},{name:"WorstCustomersByAgedReceivablesTable",label:"Worst Customers By Aged Receivables"}],qi=[{name:"AverageDaysOutstandingChart",label:"Average Days Outstanding"},{name:"AverageJobLengthChart",label:"Average Job Length"},{name:"AverageJobRevenueChart",label:"Average Job Revenue"},{name:"SlaBreachCountChart",label:"SLA Breach (Count)"},{name:"SlaBreachPercentageChart",label:"SLA Breach (Percentage)"},{name:"AverageToCloseByHourChart",label:"Average Time To Close Job"},{name:"AvgPriceChart",label:"Average Price"},{name:"AverageProfitChart",label:"Average Profit"},{name:"AverageQuoteValueChart",label:"Average Quote Value"},{name:"AverageTimeToAcceptByMinuteChart",label:"Average Time To Accept Job"},{name:"AverageTimeToAttendanceChart",label:"Average Time To Attendance"},{name:"AverageTimeToSubmitJobReportChart",label:"Average Time To Submit Job Report"},{name:"CountByActiveAccountChart",label:"Count By Active Account"},{name:"CountJobsEngagementRateChart",label:"Count Jobs Engagement Rate"},{name:"CountOpenJobsByDateChart",label:"Count Open Jobs By Date"},{name:"CustomerAndSupplierAmounts",label:"Customer And Supplier Amounts"},{name:"JobsByDayLineChart",label:"Jobs By Day Line"},{name:"JobsByMonth",label:"Jobs By Month"},{name:"JobsFinancialByDayLineChart",label:"Jobs Financial By Day Line"},{name:"NewCustomerAccountsChart",label:"New Customer Accounts"},{name:"NewSupplierAccountsChart",label:"New Supplier Accounts"},{name:"PercentageOfSpendByServiceLineTable",label:"Percentage Of Spend By Service Line"},{name:"PercentageOfWorkOrdersByServiceLineTable",label:"Percentage Of Work Orders By Service Line "},{name:"QuoteAcceptanceRateChart",label:"Quote Acceptance Rate"},{name:"SpendByCoverageAreaTable",label:"Spend By Coverage Area "},{name:"SpendFromNewCustomerAccountsChart",label:"Spend From New Customer Accounts"},{name:"SumQuoteAccepted",label:"Value of Quotes Accepted "},{name:"SumQuoteSent",label:"Value of quotations sent"},{name:"TopAssetsByNumberOfJobsTable",label:"Top Assets By Number Of Jobs"},{name:"TopAssetsBySpendTable",label:"Top Assets By Spend "},{name:"TopAssetTypesBySpendTable",label:"Top Asset Types By Spend "},{name:"TopCustomersByNumberOfPropertiesTable",label:"Top Customers By Number Of Properties"},{name:"TopCustomersByProfitChart",label:"Top Customers By Profit"},{name:"TopPropertiesBySpendTable",label:"Top Properties By Spend "},{name:"TopSuppliersByNumberOfJobsTable",label:"Top Suppliers By Number Of Jobs"},{name:"TopSuppliersByQuoteReturnTable",label:"Top Suppliers By Quote Return"},{name:"TopSuppliersByTimeToSubmitJobReportTable",label:"Top Suppliers By Time To Submit Job Report"},{name:"TotalJobRevenueChart",label:"Total Job Revenue"},{name:"TotalQuoteInvoiceSent",label:"Total Quote Invoice Sent"},{name:"TotalQuoteSentChart",label:"Number Of Quotes"},{name:"TotalQuoteReportSent",label:"Total Quote Report Sent"},{name:"WorstCustomersByAgedReceivablesTable",label:"Worst Customers By Aged Receivables"}],zi=[{name:"AverageAllocationTime",label:"Average Allocation Time"},{name:"JobsByService",label:"Jobs By Service"},{name:"PercentageOfSpendByServiceLineTable",label:"Percentage Of Spend By Service Line"},{name:"PercentageOfWorkOrdersByServiceLineTable",label:"Percentage Of Work Orders By Service Line"}],ki=[{name:"jobsBySLA",label:"jobs By SLA"}],Ni=[{name:"JobsByStatusPieChart",label:"Jobs By Status"}],Mi=[{name:"AverageJobLengthChart",label:"Average Job Length"},{name:"AverageTimeToAcceptByMinuteChart",label:"Average Time To Accept By Minute"},{name:"AverageTimeToAttendanceChart",label:"Average Time To Attendance"},{name:"AverageToCloseByHourChart",label:"Average Time To Close By Hour"},{name:"AverageTimeToSubmitJobReportChart",label:"Average Time To Submit Job Report"},{name:"CountJobsEngagementRateChart",label:"Count Jobs Engagement Rate"},{name:"LateAttendanceBySupplierChart",label:"Late Attendance By Supplier"},{name:"NewSupplierAccountsChart",label:"New Supplier Accounts"},{name:"SupplierDebtTable",label:"Supplier Debt"},{name:"TopSuppliersByNumberOfJobsTable",label:"Top Suppliers By Number Of Jobs"},{name:"TopSuppliersByTimeToSubmitJobReportTable",label:"Top Suppliers By Time To Submit Job Report"}],Ei=[{name:"TopCustomersByNumberOfPropertiesTable",label:"Top Customers By Number Of Properties"},{name:"TopPropertiesBySpendTable",label:"Top Properties By Spend"}],Hi=[{name:"TopAssetsByNumberOfJobsTable",label:"Top Assets By Number Of Jobs"},{name:"TopAssetsBySpendTable",label:"Top Assets By Spend"},{name:"TopAssetTypesBySpendTable",label:"Top Asset Types By Spend"}],Qi=[{name:"SpendByCoverageAreaTable",label:"Spend By Coverage Area"}],Wi=[{name:"TotalQuoteInvoiceSent",label:"Total Quote Invoice Sent"},{name:"TotalQuoteReportSend",label:"Total Quote Report Sent"},{name:"TotalQuoteSentChart",label:"Number Of Quotes"},{name:"SumQuoteAccepted",label:"Value of Quotes Accepted"},{name:"SumQuoteSent",label:"Value of quotations sent"}];function Gi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Vi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Gi(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Yi=function(e){var n={};return e.lg.map((function(e){return n=Vi(Vi({},n),{},(0,O.Z)({},e.i,!0))})),n},Ui=function(e){var n=e.newLayout,t=e.preLayout.lg.filter((function(e){return n[e.i]})),a=Object.keys(n).map((function(e){return{name:e,status:n[e]}})).filter((function(e){return!t.find((function(n){return n.i===e.name}))})).filter((function(e){return e.status})).map((function(e){return{i:e.name,w:4,h:4,x:0,y:0,minW:4,maxW:12,minH:4,maxH:4}}));return[].concat((0,Di.Z)(t),(0,Di.Z)(a))},Xi=function(e){var n=e.layout,t=e.setLayout,a=e.onSuccess,r=e.category,o=(0,Pe.cI)({defaultValues:Yi(n)}),s=o.control,d=o.errors,c=o.handleSubmit,l={control:s,errors:d,register:o.register};return(0,G.jsx)(Fi.Z,{id:"offCanvasForm",handleSubmit:c((function(e){t({lg:Ui({newLayout:e,preLayout:n})}),a()})),children:(0,G.jsx)(G.Fragment,{children:i[r].map((function(e){return(0,G.jsx)(Bi.Z,{bordered:!0,style:{marginBottom:"5px"},children:(0,G.jsx)(Ki,{children:(0,G.jsx)(I.Z,{children:(0,G.jsx)(p.Z,{md:12,children:(0,G.jsx)(Zi.Z,{label:"",children:(0,G.jsx)(Li.Z,Vi(Vi({size:"xs"},l),{},{name:e.name,data:[{label:e.label,key:e.i,value:!0}]}))})})})})})}))})})},Ki=(0,m.ZP)(Ri.Z).withConfig({displayName:"addChart__StyledCardBody",componentId:"sc-9g6xo7-0"})([""]);Xi.defaultProps={};var eo=t(96486),no=t.n(eo);function to(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ao(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?to(Object(t),!0).forEach((function(n){(0,O.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):to(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ro=(0,D.memo)((function(e){var n=e.category,t=e.locationId,i=e.supplierId,o=(0,F.WidthProvider)(F.Responsive),s=(0,D.useContext)(B.Z),d=(0,Ae.x)().user,c=(0,D.useRef)([]),l=ao(ao(ao({},function(e){var n=new Date;return{startDate:(0,L.Z)(n,e.value),endDate:n}}(R.find((function(e){return e.default})))),function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}}({accountId:d.accountId,accountType:d.accountType})),{},{locationId:t,supplierId:i}),u=(0,D.useState)(l)[0],m=(0,D.useState)(JSON.parse(window.localStorage.getItem("dashboardNewLayout_".concat(n)))||a[n]),g=m[0],v=m[1],y=function(){var e=(0,P.Z)(S().mark((function e(t,a){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.setItem("dashboardNewLayout_".concat(n),JSON.stringify(a));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),$=function(e){v(e),window.localStorage.setItem("dashboardNewLayout_".concat(n),JSON.stringify(e))},f=function(){s.close()};return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(I.Z,{children:[(0,G.jsxs)(p.Z,{md:6,children:[(0,G.jsx)(io,{context:"info",content:"Reset Layout",onClick:function(){window.localStorage.removeItem("dashboardNewLayout_".concat(n)),v(a[n])},size:"sm"}),(0,G.jsx)(io,{context:"secondary",content:"Add charts",onClick:function(e){s.show({content:(0,G.jsx)(Xi,{layout:g,setLayout:$,onSuccess:f,category:n}),submit:!0,title:"View charts list",width:"30%"})},size:"sm"})]}),(0,G.jsx)(p.Z,{md:12,children:(0,G.jsx)(o,{breakpoints:{lg:1200,sm:768},cols:{lg:12,sm:6},className:"layout",draggableHandle:".dragHandle",layouts:g,onLayoutChange:function(e,n){return y(e,n)},onResizeStop:function(e,n){var t,a=e.findIndex((function(e){return e.i===n.i})),r=null===(t=c.current[a])||void 0===t?void 0:t.chart;if(r){var i,o=null===(i=c.current[a])||void 0===i?void 0:i.container.current.parentElement,s=o.clientHeight,d=o.clientWidth;r.setSize(d,s)}},children:g.lg.filter((function(e){return r[e.i]})).map((function(e,t){var a=r[e.i];return(0,G.jsx)("div",{"data-key":e.i,children:(0,G.jsx)(a,{filters:u,ref:function(e){return c.current[t]=e},removeChart:function(e,t){return function(e,t){var a={lg:no().reject(g.lg,{i:t})};v(a),window.localStorage.setItem("dashboardNewLayout_".concat(n),JSON.stringify(a))}(0,t)}})},e.i)}))})})]})})}),(function(e,n){return!0})),io=(0,m.ZP)(Z.Z).withConfig({displayName:"chart__StyledButton",componentId:"sc-33dnb4-0"})(["align-self:flex-end;margin-right:5px;"]),oo=ro;ro.defaultProps={accountId:null,locationId:null};var so=m.ZP.div.withConfig({displayName:"view__StyledMenu",componentId:"sc-126if1g-0"})(["a{border:none;color:",";}"],(function(e){return e.theme.COLOUR.secondary})),co=function(){var e=(0,u.useRouter)(),n=a[e.query.category]?e.query.category:"overview";return(0,G.jsxs)(I.Z,{children:[(0,G.jsx)(p.Z,{md:1,children:(0,G.jsx)(so,{children:(0,G.jsxs)(g.Z,{className:"test",flush:!0,children:[(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=overview",children:"Overview"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=customer",children:"Customer"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=supplier",children:"Supplier"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=service",children:"Service"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=property",children:"Property"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=asset",children:"Asset"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=coverage",children:"Coverage"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=sla",children:"SLA"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=status",children:"Status"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(y.Z,{to:"/dashboard/data/business?category=quote",children:"Quote"})})]})})}),(0,G.jsx)(p.Z,{md:11,children:(0,G.jsx)(oo,{category:n})},n)]})},lo=function(){return(0,G.jsx)(l.Z,{pageHeading:{heading:"Data - Business"},View:(0,G.jsx)(co,{})})}},72316:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/data/business",function(){return t(2455)}])}},function(e){e.O(0,[6898,3662,284,4195,5312,7287,2002,3086,9082,1265,5597,8158,7615,5536,7139,4425,9774,2888,179],(function(){return n=72316,e(e.s=n);var n}));var n=e.O();_N_E=n}]);