(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2812],{8572:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Qe}});var r,o,i,a,s,c,l,u,d=t(66918),m=t(67294),f=t(1323),p=t(93633),y=t(52209),g=t(54397),h=((0,g.Ps)(r||(r=(0,y.Z)(["\n  query GetGmailList(\n    $accountId: Int!\n    $query: queryMailInput\n    $pageSize: Int\n    $nextPageToken: String\n  ) {\n    gmailList(\n      accountId: $accountId\n      query: $query\n      pageSize: $pageSize\n      nextPageToken: $nextPageToken\n    ) {\n      messages\n      success\n      nextPageToken\n    }\n  }\n"]))),(0,g.Ps)(o||(o=(0,y.Z)(["\n  query GetGmailLabels($userId: Int!) {\n    gmailLabels(userId: $userId) {\n      labels\n    }\n  }\n"]))),(0,g.Ps)(i||(i=(0,y.Z)(["\n  query MicrosoftMailList(\n    $accountId: Int!\n    $query: queryMailInput\n    $nextPageToken: String\n    $pageSize: Int\n  ) {\n    msMailList(\n      accountId: $accountId\n      query: $query\n      pageSize: $pageSize\n      nextPageToken: $nextPageToken\n    ) {\n      messages\n      nextPageToken\n      success\n    }\n  }\n"]))),(0,g.Ps)(a||(a=(0,y.Z)(["\n  query GetAcount($accountId: Int!) {\n    Account_by_pk(id: $accountId) {\n      meta\n      name\n    }\n  }\n"])))),b=((0,g.Ps)(s||(s=(0,y.Z)(["\n  query SendMSMail($accountId: Int!, $body: String, $recipient: String!, $subject: String) {\n    sendMSMail(accountId: $accountId, recipient: $recipient, body: $body, subject: $subject) {\n      error\n      statusText\n      success\n    }\n  }\n"]))),t(24237)),x=t(2356),j=t(78215),v=t(92809),w=t(11163),Z=(0,g.Ps)(c||(c=(0,y.Z)(['\n  query GetEmails(\n    $limit: Int\n    $offset: Int\n    $startDate: timestamptz\n    $where: Communication_bool_exp\n  ) {\n    emails: Communication(\n      where: $where\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      id\n      content\n      from\n      to\n      time\n      meta\n\n      tagsJobs: Communication_Entities(where: { entity: { _eq: "Job" } }) {\n        entity\n        entityId\n        id\n        job: Job {\n          id: number\n          description\n          title\n          type\n          shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n            taxonomy: Taxonomy {\n              name\n            }\n          }\n        }\n      }\n      tagsUsers: Communication_Entities(where: { entity: { _eq: "User" } }) {\n        entity\n        entityId\n        id\n        user: User {\n          label: fullName\n          value: id\n        }\n      }\n\n      tagsTaxonomy: Communication_Entities(where: { entity: { _eq: "Taxonomy" } }) {\n        entity\n        entityId\n        id\n        taxonomy: Taxonomy {\n          id\n          name\n          type\n          status\n        }\n      }\n    }\n    meta: Communication_aggregate(where: $where) {\n      aggregate {\n        count\n      }\n    }\n  }\n']))),O=t(80880),I=t(58448),_=t(14347),P=t(55657),$=t(80284),C=t(22150),S=t(83789),q=t(22796),E=t(28834),D=t(85893),T=function(){return(0,S.Z)(Array(10)).map((function(e,n){return(0,D.jsxs)("div",{children:[(0,D.jsx)(q.Z,{}),(0,D.jsx)(E.Z,{duration:700,height:"20px",hexColour:"#f6f7f8",width:"100%"})]},n)}))},k=t(18944),A=t(7720),z=t(77417),M=t(8675),N=t(30266),J=t(80318),F=t(64687),L=t.n(F),U=t(42283),G=(0,g.Ps)(l||(l=(0,y.Z)(["\n  mutation InsertCommunicationEntity(\n    $communicationId: Int!\n    $tags: [Communication_Entity_insert_input!]!\n  ) {\n    delete_Communication_Entity(where: { communicationId: { _eq: $communicationId } }) {\n      returning {\n        id\n      }\n    }\n    insert_Communication_Entity(objects: $tags) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),V=t(75709),R=t(43566),B=t(97202),H=t(10219),X=(0,g.Ps)(u||(u=(0,y.Z)(['\n  query GetTaxonomys(\n    $limit: Int\n    $offset: Int\n    $q: String\n    $status: String = "active"\n    $type: String\n    $parentId: Int\n    $id: Int\n    $accountId: Int\n  ) {\n    tags: Taxonomy(\n      limit: $limit\n      offset: $offset\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: $status }\n        type: { _eq: $type }\n        parentId: { _eq: $parentId }\n        id: { _eq: $id }\n      }\n    ) {\n      id\n      name\n      type\n      status\n    }\n\n    jobs: Job {\n      id: number\n      description\n      title\n      type\n\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n\n    users: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: { status: { _eq: "active" }, Account: { id: { _eq: $accountId } } }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),Q=t(65375),K=t(93515),W=t(65570),Y=["control","errors","label","name","register","filters"];function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach((function(n){(0,v.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te=function(e,n){var t,r,o=!0;return(null===(t=e.errors[e.name])||void 0===t?void 0:t.message)!==(null===(r=n.errors[n.name])||void 0===r?void 0:r.message)&&(o=!1),["name","type"].forEach((function(t){e[t]!==n[t]&&(o=!1)})),o},re=(0,m.memo)((function(e){var n=e.control,t=e.errors,r=e.label,o=e.name,i=e.register,a=e.filters,s=(0,H.Z)(e,Y),c={control:n,errors:t,register:i},l=function(){var e=(0,p.a)(X,{variables:ne(ne({},a),{},{orderBy:{name:"asc"},type:"tags"})}).data,n=(e=void 0===e?{tags:[],jobs:[],users:[]}:e).tags,t=e.jobs,r=e.users,o=n.map((function(e){return{label:e.name,value:e.id,entity:"Taxonomy"}})),i=t.map((function(e){var n,t;return{label:(0,D.jsx)(W.D,{id:e.id,openCanvas:!1,type:e.type,shortJobDesc:e.title||(null===(n=e.shortJobDesc[0])||void 0===n||null===(t=n.taxonomy)||void 0===t?void 0:t.name),style:{display:"flex"}}),value:e.id,entity:"Job"}})),s=r.map((function(e){return{label:e.label,value:e.value,entity:"User"}}));return o.concat(i,s)}();return(0,D.jsx)(Q.Z,{id:o,label:r,children:(0,D.jsx)(K.Z,ne(ne({},c),{},{cacheOptions:!0,isClearable:!0,options:l,name:o},s))})}),te);re.defaultProps={filters:{}};var oe=function(e,n){return n.map((function(n){return{communicationId:e,entity:n.entity,entityId:n.value}}))},ie={on:function(e,n){document.addEventListener(e,(function(e){return n(e.detail)}))},dispatch:function(e,n){document.dispatchEvent(new CustomEvent(e,{detail:n}))},remove:function(e,n){document.removeEventListener(e,n)}};function ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ae(Object(t),!0).forEach((function(n){(0,v.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ce=function(e){var n=e.defaultValues,t=e.communicationId,r=e.onSuccess,o=(0,m.useContext)(R.Z).user,i=n.map((function(e){return{label:e.label,value:e.value,entity:e.entity}})),a=(0,U.cI)({defaultValues:{tags:i}}),s=a.control,c=a.errors,l=a.handleSubmit,u=a.register,d=(0,V.D)(G),f=(0,J.Z)(d,1)[0],p=function(){var e=(0,N.Z)(L().mark((function e(n){var o,i,a;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.tags,e.next=3,f({variables:{communicationId:t,tags:oe(t,o)}});case 3:i=e.sent,a=i.data.insert_Communication_Entity.returning,ie.dispatch("emailTagsChanged",{data:a}),r(o);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y={control:s,errors:c,register:u};return(0,D.jsx)(B.Z,{id:"offCanvasForm",handleSubmit:l(p),children:(0,D.jsx)(re,se(se({},y),{},{isMulti:!0,filters:{accountId:o.accountId},label:"Tags",name:"tags",type:"tags"}))})},le=function(e){var n=e.tags,t=function(e){switch(e.entity){case"Job":return"/dashboard/issues/view?id=".concat(e.value);case"User":case"Taxonomy":default:return null}};return(0,D.jsx)(D.Fragment,{children:null===n||void 0===n?void 0:n.map((function(e,n){return(0,D.jsx)(ue,{to:t(e),context:"primary",content:e.label,size:"xs"},n)}))})},ue=(0,b.ZP)(A.Z).withConfig({displayName:"tagBadge__StyleBadge",componentId:"sc-srou29-0"})(["p{color:#fff !important;line-height:unset;}"]),de=function(e){var n=e.communicationId,t=e.showAdd,r=e.tags,o=(0,m.useContext)(O.Z),i=function(e){o.close()};return r?(0,D.jsxs)(j.Z,{children:[(0,D.jsx)(x.Z,{md:12,children:!t&&(0,D.jsx)(le,{tags:r})}),(0,D.jsx)(x.Z,{md:12,children:t&&(0,D.jsx)(_.Z,{context:"white",onClick:function(e){return function(e){e.stopPropagation(),o.show({content:(0,D.jsx)(ce,{defaultValues:r,communicationId:n,onSuccess:i}),title:"Add tags",width:"50%"})}(e)},title:"Tags",size:"sm",children:(null===r||void 0===r?void 0:r.length)>0?(0,D.jsx)(P.Z,{context:"secondary",icon:"tag",size:"lg"}):(0,D.jsx)(P.Z,{context:"light",icon:"tag",size:"lg"})})})]}):null};de.defaultProps={showAdd:!1};var me,fe=function(e){if(!e)return[];var n=e.tagsJobs,t=e.tagsUsers,r=e.tagsTaxonomy,o=null===r||void 0===r?void 0:r.map((function(e){var n,t;return{label:null===(n=e.taxonomy)||void 0===n?void 0:n.name,value:null===(t=e.taxonomy)||void 0===t?void 0:t.id,entity:"Taxonomy"}})),i=null===n||void 0===n?void 0:n.map((function(e){var n,t;return{label:(0,D.jsx)(W.D,{id:e.job.id,openCanvas:!1,type:e.job.type,shortJobDesc:e.job.title||(null===(n=e.job.shortJobDesc[0])||void 0===n||null===(t=n.taxonomy)||void 0===t?void 0:t.name),style:{display:"flex"}}),value:e.job.id,entity:"Job"}})),a=null===t||void 0===t?void 0:t.map((function(e){return{label:e.user.label,value:e.user.value,entity:"User"}}));return[].concat(o,i,a)},pe=t(12195),ye=function(e){var n=e.email,t=e.setEmail,r=e.selectedEmail,o=n.meta||{},i=o.avatar,a=o.snippet,s=o.subject;return(0,D.jsxs)(ge,{onClick:function(){t(n)},selected:(null===r||void 0===r?void 0:r.id)===n.id,children:[(0,D.jsxs)(j.Z,{children:[(0,D.jsx)(x.Z,{md:1,children:(0,D.jsx)(he,{context:"info",size:"xxs",children:i||n.from[0]})}),(0,D.jsx)(x.Z,{md:9,children:(0,D.jsx)(k.Z,{children:n.from})}),(0,D.jsx)(x.Z,{md:2,children:(0,D.jsx)(A.Z,{content:(0,pe.Z)(new Date(n.time),new Date),context:"white",size:"xs"})})]}),(0,D.jsx)(be,{children:s}),(0,D.jsxs)(be,{size:"xs",children:[" ",a," "]}),(0,D.jsx)(de,{tags:fe(n)}),(0,D.jsx)(z.Z,{})]})},ge=b.ZP.div.withConfig({displayName:"sidebarItem__StyledItem",componentId:"sc-1noqquw-0"})(["border-left:"," "," 4px;padding-left:5px;padding-right:5px;"],(function(e){return e.theme.COLOUR.info}),(function(e){return e.selected?"solid":"none"})),he=(0,b.ZP)(M.Z).withConfig({displayName:"sidebarItem__StyledAvatar",componentId:"sc-1noqquw-1"})(["height:24px;min-width:24px;width:24px;"]),be=(0,b.ZP)(k.Z).withConfig({displayName:"sidebarItem__StyledText",componentId:"sc-1noqquw-2"})(["white-space:nowrap;text-overflow:ellipsis;overflow:hidden;"]),xe=t(38460),je=(0,g.Ps)(me||(me=(0,y.Z)(["\n  query sendGoogleMail($body: String, $accountId: Int!, $recipient: String!, $subject: String) {\n    sendGoogleMail(accountId: $accountId, recipient: $recipient, body: $body, subject: $subject) {\n      error\n      statusText\n      success\n    }\n  }\n"]))),ve=t(89265),we=t.n(ve),Ze=t(9041),Oe=t(79665),Ie=t(19501),_e=(0,Ie.Ry)().shape({recipient:(0,Ie.Z_)().email().required(),subject:(0,Ie.Z_)().required()}),Pe=t(71247),$e=t(66805);function Ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ce(Object(t),!0).forEach((function(n){(0,v.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qe=function(){var e=(0,f.x)().user,n={editorState:Ze.EditorState.createEmpty(),html:""},t=(0,xe.t)(je,{onError:function(e){console.error(e)}}),r=(0,J.Z)(t,1)[0],o=(0,U.cI)({defaultValue:n,resolver:(0,Oe.S)(_e)}),i=o.control,a=o.errors,s=o.handleSubmit,c=o.register,l={control:i,errors:a,register:c};return(0,D.jsxs)(B.Z,{id:"offCanvasForm",handleSubmit:s((function(n){r({variables:{accountId:e.accountId,recipient:n.recipient,subject:n.subject,body:n.content.html}})})),children:[(0,D.jsx)(Q.Z,{label:"Recipient",children:(0,D.jsx)(Pe.Z,Se(Se({},l),{},{name:"recipient"}))}),(0,D.jsx)(Q.Z,{label:"Subject",children:(0,D.jsx)(Pe.Z,Se(Se({},l),{},{name:"subject"}))}),(0,D.jsx)(U.Qr,{name:"content",control:i,defaultValue:n,render:function(e){var n=e.value,t=e.onChange;return(0,D.jsx)(Ze.Editor,{editorState:n.editorState,onChange:function(e){return function(e,n){var t=we()((0,Ze.convertToRaw)(e.getCurrentContent()));n({editorState:e,html:t})}(e,t)},placeholder:"email content",toolbar:{inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0},history:{inDropdown:!0}}})}}),(0,D.jsx)($e.H,{content:"Send",type:"submit"})]})},Ee=t(76800);function De(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?De(Object(t),!0).forEach((function(n){(0,v.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):De(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ke=function(e){var n=e.defaultValues,t=e.setCurrentPage,r=e.setFilters,o=e.setTags,i=e.toggleShow,a=(0,m.useContext)(R.Z);null!==n&&void 0!==n&&n.from&&(n.from=n.from.replaceAll("%",""));var s=(0,U.cI)({defaultValues:n}),c=s.control,l=s.errors,u=s.handleSubmit,d={control:c,errors:l,register:s.register};return(0,D.jsxs)(B.Z,{id:"offCanvasForm",handleSubmit:u((function(e){var n={endDate:e.endDate,offset:0,from:e.from?"%".concat(e.from,"%"):null,startDate:e.startDate};r(n),o(e.tags),t(1),i()})),children:[(0,D.jsx)(Q.Z,{label:"From",children:(0,D.jsx)(Pe.Z,Te(Te({},d),{},{name:"from"}))}),(0,D.jsx)(q.Z,{}),(0,D.jsxs)(j.Z,{children:[(0,D.jsx)(x.Z,{sm:6,lg:6,children:(0,D.jsx)(Ee.M,Te(Te({},d),{},{isClearable:!0,dateFormat:"d MMM yyyy",name:"startDate",todayButton:!1,placeholder:"start date"}))}),(0,D.jsx)(x.Z,{sm:6,lg:6,children:(0,D.jsx)(Ee.M,Te(Te({},d),{},{isClearable:!0,dateFormat:"d MMM yyyy",placeholder:"end date",name:"endDate",todayButton:!1}))})," ",(0,D.jsx)(x.Z,{sm:12,children:(0,D.jsx)(re,Te(Te({},d),{},{isMulti:!0,label:"Tags",name:"tags",filters:{accountId:a.accountId}}))})]})]})};function Ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ze(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ae(Object(t),!0).forEach((function(n){(0,v.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Me=function(e){var n,t=e.emailAccount,r=e.selectedEmail,o=e.setEmail,i=(0,w.useRouter)(),a=(0,m.useContext)(O.Z),s=i.query.tagId?parseInt(i.query.tagId):0,c=i.query.tagName?i.query.tagName:"",l=(0,m.useState)(1),u=l[0],d=l[1],f=(0,m.useState)({from:null,startDate:null,endDate:null}),y=f[0],g=f[1],h=(0,m.useState)([]),b=h[0],x=h[1],j={type:{_eq:"email"},to:{_eq:t},from:{_ilike:y.from},_and:[{createdAt:{_gte:y.startDate}},{createdAt:{_lte:y.endDate}}]};if(null!==b&&void 0!==b&&b.length){var v=b.map((function(e){return e.value})),S=b.map((function(e){return e.entity}));j.Communication_Entities={entity:{_in:S},entityId:{_in:v}}}var q=(0,p.a)(Z,{skip:!t,variables:{limit:10,offset:10*(u-1),where:j}}),E=q.data,k=(E=void 0===E?{emails:[],meta:{}}:E).emails,A=E.meta,z=q.loading,M=q.refetch;(0,m.useEffect)((function(){s&&x([{value:s,label:c,entity:"Taxonomy"}])}),[s]),(0,m.useEffect)((function(){return k.length>0&&r&&o(null===k||void 0===k?void 0:k.find((function(e){return e.id===r.id}))),ie.on("emailTagsChanged",(function(){M()})),function(){ie.remove("emailTagsChanged")}}),[k]);var N=(0,D.jsxs)(I.Z,{children:[(0,D.jsx)(_.Z,{context:"white",onClick:function(e){!function(e){e.stopPropagation(),a.show({content:(0,D.jsx)(ke,{defaultValues:ze(ze({},y),{},{tags:b}),setCurrentPage:d,setFilters:g,setTags:x,toggleShow:function(){a.close(),o()}}),placement:"left",title:"Filter"})}(e)},title:"Filter",size:"sm",children:function(e){var n=Object.values(e).find((function(e){return e}));return Array.isArray(n)?n.length:n}(ze(ze({},y),{},{tags:b}))?(0,D.jsx)(P.Z,{context:"secondary",icon:"filter"}):(0,D.jsx)(P.Z,{context:"light",icon:"filter"})}),(0,D.jsx)(_.Z,{content:"Compose",context:"secondary",onClick:function(e){return function(e){e.stopPropagation(),a.show({content:(0,D.jsx)(qe,{}),title:"Compose New Email"})}(e)},size:"sm"})]});return(0,D.jsxs)($.Z,{fitParentHeight:!0,open:!0,title:"Emails",toolbar:N,children:[z&&(0,D.jsx)(T,{}),(0,D.jsx)(Ne,{children:k.map((function(e,n){return(0,D.jsx)(ye,{email:e,setEmail:o,selectedEmail:r},n)}))}),(0,D.jsx)(C.Z,{breakCount:5,context:"secondary",currentPage:u,onPageChange:d,pageCount:Math.ceil((null===(n=A.aggregate)||void 0===n?void 0:n.count)/10),size:"sm"})]})},Ne=b.ZP.div.withConfig({displayName:"sidebar__StyledContainer",componentId:"sc-hqu7xg-0"})(["width:100%;height:90%;overflow-y:scroll;overflow-x:hidden;"]),Je=t(38086),Fe=t.n(Je),Le=function(e){var n=e.html;return(new(Fe().Parser)).parse(String(n).replaceAll("@",""))},Ue=function(e){var n=e.email,t=(null===n||void 0===n?void 0:n.meta)||{},r=t.avatar,o=t.subject,i=void 0===o?"":o;return(0,D.jsx)($.Z,{fitParentHeight:!0,open:!0,title:i,toolbar:n&&(0,D.jsx)(de,{communicationId:n.id,tags:fe(n),showAdd:!0}),children:(0,D.jsxs)(Ge,{children:[(0,D.jsx)("div",{children:(0,D.jsx)(le,{tags:fe(n)})}),n&&(0,D.jsxs)(Ve,{children:[(0,D.jsxs)(j.Z,{children:[(0,D.jsx)(x.Z,{md:1,children:(0,D.jsx)(M.Z,{context:"primary",size:"xs",children:r||""})}),(0,D.jsxs)(x.Z,{md:11,children:[(0,D.jsx)(k.Z,{children:n.from}),(0,D.jsx)(k.Z,{size:"sm",children:n.from})]})]}),(0,D.jsx)(Le,{html:n.content||"<span>Could not load content</span>"})]})]})})},Ge=b.ZP.div.withConfig({displayName:"body__StyledContainer",componentId:"sc-1pdc17h-0"})(["height:100%;overflow:hidden;"]),Ve=b.ZP.div.withConfig({displayName:"body__StyledContext",componentId:"sc-1pdc17h-1"})(["width:100%;height:100%;overflow-y:scroll;overflow-x:hidden;"]),Re=function(e){var n=e.accounts,t=e.emailAccount,r=e.setEmailAccount;return(0,D.jsx)($.Z,{fitParentHeight:!0,open:!0,title:"Accounts",children:null===n||void 0===n?void 0:n.map((function(e,n){var o=e.profile,i=o.email,a=o.name,s=o.picture;return(0,D.jsx)(Be,{onClick:function(){return r(i)},selected:t===i,children:(0,D.jsxs)(j.Z,{children:[(0,D.jsx)(x.Z,{md:3,children:s?(0,D.jsx)(M.Z,{context:"primary",size:"sm",src:s}):(0,D.jsx)(M.Z,{context:"primary",size:"sm",content:a})}),(0,D.jsxs)(x.Z,{md:9,children:[(0,D.jsx)(k.Z,{children:a}),(0,D.jsx)(k.Z,{size:"xs",children:i})]})]})},n)}))})},Be=b.ZP.div.withConfig({displayName:"accountsBar__StyledItem",componentId:"sc-gmv33w-0"})(["border-left:"," "," 4px;padding-left:5px;padding-right:5px;"],(function(e){return e.theme.COLOUR.info}),(function(e){return e.selected?"solid":"none"})),He=function(){var e=(0,f.x)().user,n=(0,m.useState)(),t=n[0],r=n[1],o=(0,m.useState)(),i=o[0],a=o[1],s=(0,p.a)(h,{variables:{accountId:e.accountId},onCompleted:function(){var e;return r(null===c||void 0===c||null===(e=c.google[0])||void 0===e?void 0:e.profile.email)}}).data,c=(s=void 0===s?{Account_by_pk:{meta:{integration:{}}}}:s).Account_by_pk.meta.integration;return(0,D.jsxs)(Xe,{children:[(0,D.jsx)(x.Z,{md:2,children:(0,D.jsx)(Re,{accounts:null===c||void 0===c?void 0:c.google,emailAccount:t,setEmailAccount:r})}),(0,D.jsx)(x.Z,{md:3,children:(0,D.jsx)(Me,{emailAccount:t,selectedEmail:i,setEmail:a})}),(0,D.jsx)(x.Z,{md:7,children:(0,D.jsx)(Ue,{email:i})})]})},Xe=(0,b.ZP)(j.Z).withConfig({displayName:"conversations__StyledRow",componentId:"sc-mju906-0"})(["height:70vh;"]),Qe=function(){return(0,D.jsx)(d.Z,{pageHeading:{heading:"Conversations"},View:(0,D.jsx)(He,{})})}},7701:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/conversations",function(){return t(8572)}])}},function(e){e.O(0,[367,284,4195,5312,7287,2002,3086,7134,3486,9082,3515,4712,1265,6996,9666,4177,6487,5146,899,3016,9774,2888,179],(function(){return n=7701,e(e.s=n);var n}));var n=e.O();_N_E=n}]);